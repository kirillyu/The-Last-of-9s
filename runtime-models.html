
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The First Nine Guide, block 2: execution models and their tradeoffs">
      
      
        <meta name="author" content="Kirill Yu">
      
      
        <link rel="canonical" href="https://kirillyu.github.io/The-Last-of-9s/runtime-models.html">
      
      
      
      
        
          <link rel="alternate" href="runtime-models.html" hreflang="en">
        
          <link rel="alternate" href="ru/runtime-models.html" hreflang="ru">
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Runtime models: running thousands of functions at once - The Last of 9s</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="assets/styles/fonts.css">
    
      <link rel="stylesheet" href="assets/styles/brand.css">
    
      <link rel="stylesheet" href="assets/styles/layout.css">
    
      <link rel="stylesheet" href="assets/styles/components.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
  <script>
    // Ensure language selector links always navigate (base-path safe).
    // Registered early (in <head>) so it can win against later event handlers.
    (() => {
      window.addEventListener(
        "click",
        (e) => {
          const target = e.target;
          if (!(target instanceof Element)) return;
          const link = target.closest("a.md-select__link");
          if (!link) return;
          const href = link.getAttribute("href");
          if (!href || href.startsWith("javascript:")) return;
          e.preventDefault();
          e.stopImmediatePropagation();
          window.location.href = link.href;
        },
        true
      );
    })();
  </script>
  <script>
    // TL9: add static social icons to header (GitHub / LinkedIn / Telegram).
    // URLs are taken from the About page "Contacts" section.
    (() => {
      const SOCIAL = [
        { name: "GitHub", href: "https://github.com/kirillyu", svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8Z"/></svg>' },
        { name: "LinkedIn", href: "https://www.linkedin.com/in/kirillyu/", svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M19 3A2 2 0 0 1 21 5v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14Zm-11.75 7H5.5v9h1.75v-9ZM6.38 7.25A1.13 1.13 0 0 0 7.5 6.12 1.12 1.12 0 0 0 6.38 5 1.12 1.12 0 0 0 5.25 6.12c0 .62.5 1.13 1.13 1.13ZM19 13.75c0-2.02-1.08-3.25-2.82-3.25-1.25 0-1.97.69-2.32 1.18V10H12.1v9h1.75v-4.72c0-1.24.63-1.99 1.7-1.99 1.05 0 1.45.74 1.45 1.99V19H19v-5.25Z"/></svg>' },
        { name: "Telegram", href: "https://t.me/r9yo11yp9e", svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M9.04 15.55 8.9 19.2c.55 0 .8-.24 1.1-.53l2.64-2.52 5.47 4c1 .55 1.72.26 1.98-.93l3.6-16.9c.35-1.64-.6-2.28-1.64-1.9L1.9 9.3c-1.58.62-1.56 1.5-.28 1.9l5.46 1.7 12.67-7.98c.6-.36 1.15-.16.7.2L9.04 15.55Z"/></svg>' },
      ];

      const buildWrap = () => {
        const wrap = document.createElement("div");
        wrap.className = "md-header__option tl9-header-social";
        wrap.setAttribute("aria-label", "Social links");

        for (const item of SOCIAL) {
          const a = document.createElement("a");
          a.className = "md-header__button tl9-social-btn";
          a.href = item.href;
          a.target = "_blank";
          a.rel = "noopener noreferrer";
          a.setAttribute("aria-label", item.name);
          a.title = item.name;
          a.innerHTML = item.svg;
          wrap.appendChild(a);
        }
        return wrap;
      };

      const findAnchor = (header) => {
        if (!header) return null;
        return (
          header.querySelector('label[for="__search"]') ||
          header.querySelector('[data-md-component="header-search"]') ||
          header.querySelector('.md-search') ||
          header.querySelector('.md-header__option')
        );
      };

      const ensure = () => {
        const header = document.querySelector(".md-header__inner");
        if (!header) return false;
        if (header.querySelector(".tl9-header-social")) return true;

        const wrap = buildWrap();
        const anchor = findAnchor(header);
        if (anchor && anchor.parentElement) {
          anchor.parentElement.insertBefore(wrap, anchor);
        } else {
          header.appendChild(wrap);
        }
        return true;
      };

      const run = () => {
        if (ensure()) return;
        // Retry a few times: Material builds header async on some pages.
        let tries = 0;
        const t = setInterval(() => {
          tries += 1;
          if (ensure() || tries > 20) clearInterval(t);
        }, 100);
      };

      const watch = () => {
        const root = document.body;
        if (!root) return;
        const observer = new MutationObserver(() => {
          if (!document.querySelector(".tl9-header-social")) {
            run();
          }
        });
        observer.observe(root, { childList: true, subtree: true });
      };

      document.addEventListener("DOMContentLoaded", () => {
        run();
        watch();
      }, { once: true });
      document.addEventListener("navigation.instant", run);
      window.addEventListener("pageshow", run);
      if (document.readyState !== "loading") {
        run();
        watch();
      }
    })();
  </script>
  
  
  
  
  
  
    
  
  
    <meta property="og:title" content="Runtime models: running thousands of functions at once">
    <meta name="twitter:title" content="Runtime models: running thousands of functions at once">
  
  
    <meta property="og:description" content="The First Nine Guide, block 2: execution models and their tradeoffs">
    <meta name="twitter:description" content="The First Nine Guide, block 2: execution models and their tradeoffs">
  
  
    <meta property="og:url" content="https://kirillyu.github.io/The-Last-of-9s/runtime-models.html">
  
  <meta property="og:site_name" content="The Last of 9s">
  <meta property="og:type" content="website">
  
    <meta property="og:image" content="https://kirillyu.github.io/The-Last-of-9s/assets/logo-optimized.png">
    <meta name="twitter:image" content="https://kirillyu.github.io/The-Last-of-9s/assets/logo-optimized.png">
  
  <meta name="twitter:card" content="summary">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#runtime-models-running-thousands-of-functions-at-once" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="The Last of 9s" class="md-header__button md-logo" aria-label="The Last of 9s" data-md-component="logo">
      
  <img src="assets/logo-optimized.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Last of 9s
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Runtime models: running thousands of functions at once
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="green"  aria-label="Switch to light theme"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light theme" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="green"  aria-label="Switch to dark theme"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark theme" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="green"  aria-label="Switch to auto theme"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to auto theme" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="runtime-models.html" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="ru/runtime-models.html" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    

    <div class="md-header__option tl9-header-social" aria-label="Social links">
      <a class="md-header__button tl9-social-btn" href="https://github.com/kirillyu" target="_blank" rel="noopener noreferrer" aria-label="GitHub" title="GitHub">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8Z"/></svg>
      </a>
      <a class="md-header__button tl9-social-btn" href="https://www.linkedin.com/in/kirillyu/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" title="LinkedIn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M19 3A2 2 0 0 1 21 5v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14Zm-11.75 7H5.5v9h1.75v-9ZM6.38 7.25A1.13 1.13 0 0 0 7.5 6.12 1.12 1.12 0 0 0 6.38 5 1.12 1.12 0 0 0 5.25 6.12c0 .62.5 1.13 1.13 1.13ZM19 13.75c0-2.02-1.08-3.25-2.82-3.25-1.25 0-1.97.69-2.32 1.18V10H12.1v9h1.75v-4.72c0-1.24.63-1.99 1.7-1.99 1.05 0 1.45.74 1.45 1.99V19H19v-5.25Z"/></svg>
      </a>
      <a class="md-header__button tl9-social-btn" href="https://t.me/r9yo11yp9e" target="_blank" rel="noopener noreferrer" aria-label="Telegram" title="Telegram">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M9.04 15.55 8.9 19.2c.55 0 .8-.24 1.1-.53l2.64-2.52 5.47 4c1 .55 1.72.26 1.98-.93l3.6-16.9c.35-1.64-.6-2.28-1.64-1.9L1.9 9.3c-1.58.62-1.56 1.5-.28 1.9l5.46 1.7 12.67-7.98c.6-.36 1.15-.16.7.2L9.04 15.55Z"/></svg>
      </a>
    </div>

    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="index.html" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="blog.html" class="md-tabs__link">
        
  
  
    
  
  Blog

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="about.html" class="md-tabs__link">
        
  
  
    
  
  About

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="The Last of 9s" class="md-nav__button md-logo" aria-label="The Last of 9s" data-md-component="logo">
      
  <img src="assets/logo-optimized.png" alt="logo">

    </a>
    The Last of 9s
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="blog.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="about.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-thread-per-request" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Thread-per-request
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-thread-pool" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Thread pool
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-event-loop" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Event loop
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-fibers" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Fibers
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-green-threads" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Green threads
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-virtual-threads" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Virtual threads
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-actor-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Actor model
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary table
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hybrid-models-and-where-they-live" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hybrid models and where they live
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="runtime-models-running-thousands-of-functions-at-once">Runtime models - running thousands of functions at once<a class="headerlink" href="#runtime-models-running-thousands-of-functions-at-once" title="Anchor link to this section">&para;</a></h1>
<p><strong>The First Nine Guide. Block 2</strong></p>
<hr />
<p><img alt="Illustration" src="assets/first-nine/en/runtime-models_01.png" /></p>
<p><strong>Disclaimer:</strong> real systems blend multiple models. Pure versions are rare.</p>
<hr />
<p>In the previous part we discussed the atom of code - the function. We saw how complexity and characteristics affect performance.</p>
<p>But real systems execute not one, but thousands and tens of thousands of functions at the same time. Who manages that chaos? The answer is the <strong>runtime model</strong>. The choice of model is a foundation of software architecture.</p>
<p>Each model answers two questions:</p>
<ol>
<li>Who owns the threads? (runtime or application code)</li>
<li>What happens when a thread blocks?</li>
</ol>
<p>Let's go through the tradeoffs and where each model fits.</p>
<hr />
<h2 id="1-thread-per-request">1. Thread-per-request<a class="headerlink" href="#1-thread-per-request" title="Anchor link to this section">&para;</a></h2>
<p>One of the oldest models:</p>
<blockquote>
<p>one request - one thread - request completes - thread dies.</p>
</blockquote>
<p><strong>Who owns it:</strong> application code creates heavy threads and forgets them</p>
<p><strong>Weight:</strong> 1-8 MB per stack; creation ~100 microseconds</p>
<p><strong>If it blocks:</strong> hardware sits idle</p>
<p><img alt="Illustration" src="assets/first-nine/en/runtime-models_02.png" /></p>
<p><strong>Use it if:</strong> legacy monolith at 3 RPS - otherwise no.</p>
<hr />
<h2 id="2-thread-pool">2. Thread pool<a class="headerlink" href="#2-thread-pool" title="Anchor link to this section">&para;</a></h2>
<p>A logical evolution. We remove creation/destruction overhead, keep a fixed pool of heavy threads and a task queue. This is still common in the wild.</p>
<p><strong>Who owns it:</strong> the pool assigns tasks to ready threads</p>
<p><strong>If it blocks:</strong> the thread hangs, the queue grows</p>
<p><img alt="Illustration" src="assets/first-nine/en/runtime-models_03.png" /></p>
<p><strong>Use it if:</strong> mixed load (CPU + I/O), you want transparency, and you hate "modern" trends.</p>
<hr />
<blockquote>
<p>The next models try to solve the biggest pool problem: heavy threads idle while waiting on I/O.</p>
</blockquote>
<hr />
<h2 id="3-event-loop">3. Event loop<a class="headerlink" href="#3-event-loop" title="Anchor link to this section">&para;</a></h2>
<p>A radical shift. Instead of an army of workers you have one fast <strong>event loop</strong> on a single heavy thread. It kicks off an async operation (DB call, etc.) and immediately moves to other events. When the result is ready, it handles it.</p>
<blockquote>
<p>poll I/O - callbacks - timers - ...</p>
</blockquote>
<p><strong>Who owns it:</strong> the loop itself; only one heavy thread</p>
<p><strong>If it blocks:</strong> the whole application freezes</p>
<p><img alt="Illustration" src="assets/first-nine/en/runtime-models_04.png" /></p>
<p><strong>Use it if:</strong> mostly I/O with minimal CPU.</p>
<hr />
<h2 id="4-fibers">4. Fibers<a class="headerlink" href="#4-fibers" title="Anchor link to this section">&para;</a></h2>
<p>Not a separate model but an approach that upgrades the event loop (and beyond), partially solving callback hell. Logic is written inside lightweight fibers. The loop still orchestrates everything, but instead of callbacks it resumes the right fiber. When a fiber hits I/O it yields, keeping the code linear. Fibers can call each other following business logic rather than runtime logic.</p>
<p><strong>Who owns it:</strong> more control for the developer, but the runtime still drives</p>
<p><strong>If it blocks:</strong> it blocks the loop as well</p>
<p><img alt="Illustration" src="assets/first-nine/en/runtime-models_05.png" /></p>
<p><strong>Use it if:</strong> you want clean async in an I/O service.</p>
<hr />
<h2 id="5-green-threads">5. Green threads<a class="headerlink" href="#5-green-threads" title="Anchor link to this section">&para;</a></h2>
<p>An older model and the ancestor of many new ones. Many lightweight threads live inside one heavy thread. The runtime switches them on a timer.</p>
<p><strong>Who owns it:</strong> the runtime; everyone lives on one heavy thread</p>
<p><strong>If it blocks:</strong> any blocking sys-call in a lightweight thread blocks the heavy thread. Everything stops.</p>
<p><img alt="Illustration" src="assets/first-nine/en/runtime-models_06.png" /></p>
<p><strong>Use it if:</strong> a prototype, small script, lab project.</p>
<hr />
<h2 id="6-virtual-threads">6. Virtual threads<a class="headerlink" href="#6-virtual-threads" title="Anchor link to this section">&para;</a></h2>
<p>A game changer. The evolution of green threads. Millions of lightweight threads managed by the runtime scheduler and executed on a small pool of heavy threads. The key win is blocking behavior.</p>
<p><strong>Who owns it:</strong> the runtime creates lightweight threads and schedules them onto a heavy pool</p>
<p><strong>If it blocks:</strong> when a lightweight thread initiates I/O, the scheduler parks it and runs another. Heavy threads do not idle.</p>
<p><em>With blocking I/O (e.g., Thread.sleep() or File.read() on a regular socket) pinning may occur and reduce efficiency.</em></p>
<p><img alt="Illustration" src="assets/first-nine/en/runtime-models_07.png" /></p>
<p><strong>Use it if:</strong> modern high-load systems with many network calls. But still use mutexes, timeouts, and fail-fast to avoid millions of parked threads.</p>
<hr />
<h2 id="7-actor-model">7. Actor model<a class="headerlink" href="#7-actor-model" title="Anchor link to this section">&para;</a></h2>
<p>Not exactly a runtime model but a concurrency model that heavily shapes architecture. There is no shared memory: actors communicate via messages. The scheduler spreads actors across worker threads.</p>
<p>Principles:</p>
<ul>
<li>no shared state</li>
<li>only message passing, no shared memory or locks</li>
<li>one actor processes one message at a time</li>
<li>"let it crash" resilience philosophy</li>
</ul>
<p><strong>Who owns it:</strong> the actor runtime; an actor handles one message at a time</p>
<p><strong>If it blocks:</strong> it blocks only itself; others keep working</p>
<p><img alt="Illustration" src="assets/first-nine/en/runtime-models_08.png" /></p>
<p><strong>Use it if:</strong> you need high resilience and a ready-made framework. Works for microservices and internal service architecture.</p>
<hr />
<h2 id="summary-table">Summary table<a class="headerlink" href="#summary-table" title="Anchor link to this section">&para;</a></h2>
<p><img alt="Illustration" src="assets/first-nine/en/runtime-models_09.png" /></p>
<hr />
<h2 id="hybrid-models-and-where-they-live">Hybrid models and where they live<a class="headerlink" href="#hybrid-models-and-where-they-live" title="Anchor link to this section">&para;</a></h2>
<p>Pure models are rare. Modern runtimes combine approaches to patch weaknesses.</p>
<p>Short list:</p>
<ol>
<li>Worker threads + event loop. Common in Node.js (with Worker Threads). The main event loop handles I/O and a worker pool handles CPU.</li>
<li>Multi-loop architecture. Seen in Vert.x. Multiple event loops run in parallel, each on its own heavy thread. A balancer distributes incoming connections.</li>
<li>Actor model + thread pools. Typical Akka approach with configurable dispatchers. Different actor types sit on different pools: I/O actors on a large pool, CPU actors on a small one, critical ones on dedicated threads.</li>
</ol>
<hr />
<blockquote>
<p>Next up: <strong><a href="inner-architecture.html">typical application architecture</a></strong>.</p>
<p>Previous: <strong><a href="function-atomic-unit.html">function attributes</a></strong>.</p>
</blockquote>
<p>Follow the channel <a href="https://t.me/r9yo11yp9e">@r9yo11yp9e</a> - we will keep chasing the nines.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.top", "navigation.footer", "toc.follow", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="assets/scripts/hero-bg.js"></script>
      
        <script src="assets/scripts/brand-anim.js"></script>
      
        <script src="assets/scripts/lang-setup.js"></script>
      
        <script src="assets/scripts/post-slider.js"></script>
      
        <script src="assets/scripts/image-zoom.js"></script>
      
    
  </body>
</html>