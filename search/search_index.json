{"config":{"lang":["en","ru"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"index.html","title":"Home","text":"The Last of 9s The last stronghold of hardcore SRE. <p>         No marketing, just pure engineering. War stories, hacks, and tech guides on observability, performance, reliability, and troubleshooting. Here we fight for the nines after the decimal point.       </p> Blog Telegram <p>         Short notes and discussions - in the Telegram channel The Last of 9s (russian).       </p>          Russian mirror: Read in Russian.        Kirill Yurkov Latest posts Block 1 \u00b7 3 min read Function: the atomic unit of code <p>The First Nine Guide, block 1: complexity, resources, and concurrency safety</p> first-nineseriesperformancefunctions Read -&gt; Block 2 \u00b7 4 min read Runtime models: running thousands of functions at once <p>The First Nine Guide, block 2: execution models and their tradeoffs</p> first-nineseriesruntimeconcurrency Read -&gt; Block 3 \u00b7 3 min read Typical web-application inner architecture <p>The First Nine Guide, block 3: request layers and internal service anatomy</p> first-nineseriesarchitecturehttp Read -&gt; Block 4 \u00b7 5 min read Ideal application deployment <p>The First Nine Guide, block 4: deploying without throttling surprises</p> first-nineseriesdeploymentcontainers Read -&gt; Block 5 \u00b7 20+ min read Application footprint in operating system <p>System Footprint: how to separate OS and app issues by metrics</p> performancelinuxobservability Read -&gt;"},{"location":"index.html#about","title":"About","text":"<p>The Last of 9s is an engineering blog where I share my experience and approaches on how to build processes from scratch and solve applied tasks around my favorite aspects of systems. More in About.</p>"},{"location":"about.html","title":"About","text":"<p>The Last of 9s is an engineering blog where I share my experience and approaches on how to build processes from scratch and solve applied tasks around my favorite aspects of systems:</p> <ul> <li>Observability: How to extract maximum value from the most common signals.</li> <li>Performance: Where time is lost.</li> <li>Reliability: Architecture and processes that don't crash (or crash gracefully).</li> </ul>"},{"location":"about.html#briefly-about-me","title":"Briefly about me","text":"<p>10+ years in the industry (Telecom, Banking, Retail, Startups). Journey from Load Testing Engineer to Tech Lead and Acting CIO.</p> <ul> <li>Production Experience: Improved a major e-commerce SLA from one nine to three, personally resolving 400+ critical incidents.</li> <li>Processes: Implemented Incident Management, Error Budgets, SLO, Capacity Planning, and FinOps from scratch.</li> <li>Engineering: Wrote a custom load testing framework and implemented Performance Testing as a Service.</li> <li>Education: Conference speaker, mentor for performance and SRE communities.</li> <li>Current: Customer Reliability Technical Lead at VictoriaMetrics.</li> </ul>"},{"location":"about.html#contacts","title":"Contacts","text":"<ul> <li>Telegram Channel (Main content, RU)</li> <li>GitHub</li> <li>LinkedIn</li> <li>Telegram PM</li> </ul>"},{"location":"application-footprint.html","title":"Application footprint in operating system","text":"<p>The First Nine Guide. Block 5</p> <p></p> <p>You come to an incident. They say the product became slow. You need to understand if the problem is in the system layer or in the software itself, who is responsible and who to call. For years I looked for the most universal way, and I think I found it. This way has many \"buts\", so it is universal only in theory for now.</p> <p>This is the last article where we look at the app through OS footprints. Next we dive into the OS itself.</p> <p>In previous articles we talked about threads. I called them \"light\" and \"heavy\" threads. \"Heavy\" are created by the operating system, and \"light\" live only inside the app and do not pay all OS thread costs. But the key point is: to consume any resource, CPU or disk, our app (its process) needs OS threads, so \"heavy\" ones.</p> <p>This is the bridge between the app/runtime world and the OS world.</p> <p>Most people know that any code works in some thread/worker (often the same word). In the last article about ideal deployment I marked how runtime thread models map to OS threads. This mapping became my research area. When we ask \"app vs OS\", it is really a choice between user space and kernel space.</p> <p></p> <p>Any code slowdown is first of all a slowdown of \"work\". Work is very different. But almost always, when our app needs something from the OS, it makes a syscall (system call). There are many of them: reading disk is <code>read()</code>, opening a file is <code>open()</code>. A syscall is done only by an OS thread. As an analogy, the OS is like a web server with a thread pool, and syscalls are API calls. But to be honest, the OS has another \"interface\" too: virtual memory. It is harder. We write to memory directly, without syscalls. But if we touch a virtual address that has no physical RAM page yet (or it was swapped out), a CPU block called MMU triggers a hardware interrupt (Page Fault). Control goes to the kernel, it brings the page, and returns control to the program. For code it is transparent, but for latency it is a real stop of the thread.</p> <p>So, to understand what can slow our \"work\", we need to understand what this work can be. The OS is well covered by metrics, so by them we can guess what work was done quite well.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#anatomy-of-work-on-cpu-and-off-cpu","title":"Anatomy of work: On-CPU and Off-CPU","text":"<p>Work can run on CPU, or without CPU (waiting is also work, because a thread waits too, so it is busy). Work can wait inside the app or inside the system. For system waits there is Wait Channel (WCHAN), which sleeps a thread with a specific reason.</p> <p>WCHAN appears only if the kernel puts the thread to sleep. Work can be slow because a resource is missing, and then we often see PSI metrics (described here). PSI shows the share of time tasks were forced to wait for a resource. WCHAN is weakly covered by profilers. It is useful to know, but in practice it is rarely in metrics. Another plane of thread state is their state: R, D, S, etc. We will use it.</p> <p>Back to work. In performance analysis (per Brendan Gregg) work is split into two big groups: On-CPU (on CPU) and Off-CPU (off CPU).</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#1-on-cpu-thread-runs","title":"1. On-CPU (Thread runs)","text":"<p>This is when a thread uses CPU right now. Thread state is R (Running).</p> <p>There are three scenarios:</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#11-system-mode-work-in-kernel","title":"1.1. System Mode (Work in kernel)","text":"<p>The thread runs kernel code by its request (via syscall).</p> <ul> <li>Examples: <code>getpid()</code>, <code>fstat()</code>, <code>open()</code>, <code>read()</code>.</li> <li>Meaning: It goes to kernel space. Some syscalls like <code>getpid()</code> are instant, but many (<code>open()</code>, <code>read()</code>, <code>connect()</code>) can block on a resource and move the thread to wait.</li> <li>Metrics: <code>system time</code> grows. When blocked, WCHAN and PSI IO appear.</li> </ul>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#12-pure-user-space-useful-work","title":"1.2. Pure User-space (Useful work)","text":"<p>Classic app code execution. It runs without kernel, doing CPU work.</p> <ul> <li>Examples: math, parsing, GC work.</li> <li>Meaning: Fully in user space.</li> <li>Metrics: <code>user time</code> grows. No kernel, no syscall, no WCHAN, no PSI.</li> </ul>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#13-user-space-busy-wait-fake-work","title":"1.3. User-space Busy Wait (Fake work)","text":"<p>The code is logically waiting or in an endless loop, but it burns CPU.</p> <ul> <li>Examples: spin lock or <code>while(!flag) {}</code>.</li> <li>Meaning: The thread spins. For OS it works (On-CPU). For code logic it is stuck.</li> <li>Metrics: Looks like <code>user time</code> and often misleads.</li> </ul> <p>We separate: what a thread does (R/S/D state), what type of CPU consumption, and is there any resource wait (PSI). These are three different layers. We must not mix them. We glue them into a set of signals to understand the delay nature.</p> <p>On-CPU time has 8 common modes. Here is a table with mapping to thread state and PSI:</p> CPU type Thread State probable PSI Meaning user R (Runnable) <code>psi.cpu.some</code>* App code (useful or Busy Wait) system R (Runnable) - Kernel work (syscalls) iowait D (Uninterruptible) <code>psi.io.some</code> / <code>full</code> CPU idle, thread waits I/O irq / softirq - - Interrupts (network, timer) idle S (Interruptible) - CPU idle, thread sleeps steal R / - <code>psi.cpu.some</code> / <code>full</code> Hypervisor took CPU from VM nice S / R <code>psi.cpu.full</code> Low priority processes <p>A running thread does not create PSI for itself, but it creates a queue for others.</p> <p>A small Linux dictionary (more in links above):</p> <ul> <li>R (running) - the thread is on CPU or waits for CPU in a queue.</li> <li>S (sleep) - the thread sleeps (network, timer), can be woken up.</li> <li>D (uninterruptible sleep) - the thread sleeps in kernel, waits for hardware (mostly disk).</li> <li>%iowait - CPU is idle, waiting I/O, while threads are in D.</li> <li>PSI.XYZ.some - at least one thread suffered, waiting a resource (CPU/IO/Mem). Direct signal of contention.</li> <li>PSI.XYZ.full - all threads were waiting a resource (CPU/IO/Mem).</li> </ul> <p>Below I want to show how this work is covered by metrics and at what level. Here are classic <code>node_exporter</code> metrics, i.e. host monitoring:</p> CPU type user <code>node_cpu_seconds_total{mode=\"user\"}</code> <code>node_pressure_cpu_waiting_seconds_total</code> <code>node_procs_running</code> system <code>node_cpu_seconds_total{mode=\"system\"}</code> - <code>node_procs_running</code> iowait <code>node_cpu_seconds_total{mode=\"iowait\"}</code> <code>node_pressure_io_waiting_seconds_total</code> <code>node_procs_blocked</code> irq <code>node_cpu_seconds_total{mode=\"irq\"}</code> - <code>node_intr_total</code> softirq <code>node_cpu_seconds_total{mode=\"softirq\"}</code> - - idle <code>node_cpu_seconds_total{mode=\"idle\"}</code> - - steal <code>node_cpu_seconds_total{mode=\"steal\"}</code> <code>node_pressure_cpu_waiting_seconds_total</code> - nice <code>node_cpu_seconds_total{mode=\"nice\"}</code> <code>node_pressure_cpu_waiting_seconds_total</code> - <p><code>cpu_seconds</code> shows consumption (who owns the resource now), and PSI shows shortage (who waits in the queue).</p> <ul> <li>User/Nice: They do not create PSI for the same thread, but their active work creates <code>cpu_waiting</code> for other processes.</li> <li>IO: <code>waiting</code> (Some) - disk slows a process, but others can run. <code>stalled</code> (Full) - disk fully blocks the system (critical!).</li> </ul> <p>Here are container metrics from <code>cAdvisor</code>:</p> CPU type container metrics container_tasks_state PSI metrics user <code>container_cpu_user_seconds_total</code> <code>running</code> <code>container_pressure_cpu_waiting_seconds_total</code> system <code>container_cpu_system_seconds_total</code> <code>running</code> <code>container_pressure_cpu_waiting_seconds_total</code> iowait - <code>iowait</code> <code>container_pressure_io_waiting_seconds_total</code> throttled <code>container_cpu_cfs_throttled_seconds_total</code> <code>running</code>* <code>container_pressure_cpu_stalled_seconds_total</code> steal - - <code>container_pressure_cpu_waiting_seconds_total</code> irq / soft - - - idle - <code>sleeping</code> - <p>Throttled processes are formally <code>running</code> (ready to run), but the kernel does not give them CPU because the quota is spent (CFS bandwidth control). This is unique because they wait for cgroup permission while in R state. It is correct to count them as Off-CPU.</p> <p>Metrics are few (for me, always). PSI metrics are great. CPU work types are often underrated, but useful. Very few people look at process states (<code>running</code>/<code>blocked</code>); they are not super useful, but can help to separate problems when there are many processes.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#2-off-cpu","title":"2. Off-CPU","text":"<p>Here the thread is not running, CPU is idle.</p> <p>I made a classification for Off-CPU waits based on their properties and how they look in the system.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#21-syscall-based-explicit-wait","title":"2.1. Syscall-based (Explicit wait)","text":"<p>We ask the kernel to wait (network, timer, lock).</p> <ul> <li>Examples: <code>futex()</code>, <code>epoll_wait()</code>.</li> <li>Meaning: The kernel puts the thread to sleep (S or D), into a wait queue.</li> <li>Metrics: PSI appears if we wait for an overloaded resource. WCHAN is always there (kernel sleeps the thread at a specific point), but in common metrics (node_exporter/cAdvisor) it is missing \u2014 you can see the reason only on the node itself.</li> </ul>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#22-page-faults-implicit-wait","title":"2.2. Page Faults (Implicit wait)","text":"<p>We just touched memory.</p> <ul> <li>Examples: page faults are inevitable when we work with memory; it happens when we access addresses with no RAM pages.</li> <li>Meaning: MMU triggers an interrupt, kernel stops us and goes to disk/swap.</li> <li>Metrics: WCHAN (<code>do_page_fault</code>) and maybe PSI Memory.</li> </ul> <p>The table below shows how many waits, even system ones, we do not see in metrics, not to mention waits inside the app.</p> Wait type How to detect (WCHAN) Node Exporter (PSI) CAdvisor (PSI) Timer / sleep <code>nanosleep</code>, <code>hrtimer_sleep</code>, <code>pause</code> - - Locks (app) <code>futex_wait_queue_me</code>, <code>pthread_cond_wait</code> - - Events / network <code>ep_poll</code>, <code>poll_schedule_timeout</code> - - I/O wait <code>io_schedule</code> <code>io_waiting</code> / <code>io_stalled</code> <code>io_waiting</code> / <code>io_stalled</code> Page Fault <code>do_page_fault</code>, <code>swap_readpage</code> <code>memory_stalled</code> <code>memory_stalled</code> <p>So, there is no universal metric or simple way to quickly show what causes delays in the app. Below I try to squeeze maximum from the metrics we usually have.</p> <p>First, the approach. I call it System Footprint. It is based on the assumption that in 90% cases we have either <code>node_exporter</code> metrics, or container <code>cAdvisor</code> metrics (or both). Metrics give us transparency of OS work. The app itself is usually covered in a very specific and non-universal way, so it often stays a black box (or gray).</p> <p>A metaphor: we know the state of the Black Box because it is inside a Glass Box and we see how the app interacts with the system. We can draw many conclusions (even useful) about the app.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#operation-cost-scale-transition-to-the-method","title":"Operation cost scale (transition to the method)","text":"<p>Let us take a more practical scale:</p> <ul> <li>Cheap - nanoseconds: registers/L1/L2 cache.</li> <li>Moderate - microseconds: syscalls, context switch, RAM access, NVMe I/O (~30-40 \u00b5s). With millions per second it becomes visible.</li> <li>Expensive - milliseconds: network inside DC, short disk queues, HDD sequential.</li> <li>Very expensive - tens of milliseconds and more: HDD random, swap/major faults, RTO/many retransmits, long disk queues.</li> </ul> <p>Ranges depend on hardware and workload. It is a guide, not hard thresholds.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#system-footprint-method","title":"System Footprint Method","text":"<p>System Footprint Method is a performance analysis method based on USE method by Brendan Gregg and extended with a view through \"footprints\" of load in key system metrics. It is a forensic idea: find where CPU and app time goes by looking at signs (footprints) of load or waiting at each system level. We check process states, CPU time split, PSI, and main subsystems (CPU, disk, network, memory) to find the bottleneck. If a subsystem has abnormal metrics, there are \"footprints\", so we dig there. If graphs show no signs (no footprints), we assume the system is idle or waits for external resources (locks, network calls), i.e. the reason is outside CPU/disk/memory.</p> <p>For this method I prepared a Grafana dashboard that shows all metrics below. But the method is universal and works with any monitoring tool.</p> <p>Below is the analysis sequence and how to read metrics.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#0-process-states-running-vs-blocked","title":"0. Process States: Running vs Blocked","text":"<p>First, inspired by the picture above (app on top, threads go down to kernel), it is useful to check threads: metrics exist for two states - Running (R) and Blocked (D). Understand the scale: these are workers that do your app work. Metrics can show two states:</p> <ul> <li>Running (R) - if the number of OS threads in state R is much higher than CPU cores, a CPU queue forms (threads wait for a core). This is a CPU overload sign: more compute tasks than capacity. Even if the runtime hides waits inside (e.g., JVM web pool), R-state shows heavy threads do not get their time slice. In node metrics it is usually <code>node_procs_running</code> (count of OS threads, including kernel threads).</li> <li>Blocked (D) - if there are OS threads in D state (especially spikes), threads are stuck waiting for I/O. Each blocked D-thread means the system waits for disk, and useful work is idle. D spikes come with higher request latency and performance drop. In general many D means waiting for hardware, mostly disk. D threads do not use CPU and are not visible in CPU load. In node metrics this is usually <code>node_procs_blocked</code> (also includes kernel threads).</li> </ul> <p>Important: metrics usually give only R and D (node_exporter, cAdvisor). S/Z and their variants are not visible or only partially in aggregated counters. The picture is incomplete, and that is ok.</p> <p>I recommend to compare these thread counts with what your app should do and how many threads it should create (of course if your node does not run 100 apps). If threads are much more than you expected, your runtime probably hides something or you have a config issue.</p> <p>Then step by step: first PSI (is there pressure?), then blocks by resource - CPU, Disk, Network, Memory.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#1-psi-overview","title":"1. PSI Overview","text":"<p>The simplest and most useful thing to look at (if this metric exists) is PSI. It is available on host, in containers inside k8s, and outside k8s.</p> <p>Pressure Stall Information shows the share of time when tasks were forced to wait because of lack of CPU, IO, or memory. It is not load, but the percent of \"lost\" time. <code>some</code> means at least one thread was delayed; <code>full</code> means all runnable tasks were delayed (on host cpu.full is almost always 0, in cgroup it appears when CFS quotas are hit). We care about size and duration, not only \"&gt; 0\". Load Average is useful as a trend, but it mixes runnable and D-state and is not normalized by cores; PSI is more precise for wait time.</p> <p>How to read:</p> <ul> <li>PSI CPU.some - signal of CPU contention. Then check: is <code>user/system</code> high, is there single-thread or busy-wait (PSI low, <code>user</code> high).</li> <li>PSI IO.some - disk delays. Check util/latency/queue and D-state count. Reaction depends on disk type and I/O pattern.</li> <li>PSI Memory.some - share of time tasks could not get memory and waited while kernel freed RAM, evicted pages (from cache or to swap) and/or read them back from disk.</li> <li>All PSI near zero, but service is slow - delay can be in network or inside the app (external API, locks). Then use app metrics or profilers.</li> </ul> <p>Wherever you collect metrics, the logic is one: if PSI exists - choose a subsystem to investigate; if PSI is zero - look outside the kernel.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#how-to-check-system-footprint-top-down","title":"How to check System Footprint top-down","text":"<p>The view is simple: first pressure (PSI), then by resources - CPU, disk, network, memory. In each group we answer one question and decide to go deeper or move on.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#2-cpu-pressure-spend-balance","title":"2. CPU: pressure, spend, balance","text":"<p>This is about On-CPU part (user/system/softirq/steal), together with PSI CPU and R-state from the start.</p> <ul> <li>Where does CPU go? - look at user/system/softirq/steal split. High <code>system</code> means time in kernel (syscalls, drivers). High <code>softirq</code> means kernel is busy with network/disk in software interrupts. <code>steal</code> means hypervisor takes time from VM. Reaction: spread IRQ, limit heavy threads, profile code/GC.</li> <li>Is there CPU contention? - read PSI CPU with context switches. Node Exporter gives total context switches (<code>node_context_switches_total</code>), without voluntary/involuntary split; cAdvisor usually has none. A high counter alone (or growth) without normalization by cores is not a signal, but with performance drop it can hint too many threads or lock contention. High PSI with low switches can mean cgroup quotas or single-thread.</li> <li>Is there imbalance per core? - per-core load shows hot cores. One CPU is busy, others idle: hot thread or IRQ pinned to one core. On VMs and without RSS/irqbalance this is common: all network/disk traffic can stick to one CPU. Fix with IRQ/RPS and correct worker count (separate topic).</li> </ul> <p>About load average: it is an average of runnable + D-state over 1/5/15 min, not normalized by cores, and includes blocking (D) tasks. On multi-core systems LA can be high with even load, or low with one hot core. Research (e.g., man proc(5), LWN articles) says LA is a symptom, not truth. Use it as a trend and always confirm with PSI, R-state, and per-CPU load.</p> <p>If there is no CPU pressure or it is explained, move to other resources.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#3-disk-latency-and-queues","title":"3. Disk: latency and queues","text":"<p>These are Off-CPU waits from our model: growth of PSI IO and D-state shows threads wait for disk.</p> <ul> <li>Is I/O latency growing? - most universal signal: average time per operation (await): it is queue + device service time. In node_exporter: <code>rate(node_disk_read_time_seconds_total) / rate(node_disk_reads_completed_total)</code> (and same for write).</li> <li>If latency grows - why? - two helper signals:</li> <li>Queue depth - <code>rate(node_disk_io_time_weighted_seconds_total)</code>. If queue grows, requests pile up faster than disk serves them (Little's law: Queue \u2248 IOPS \u00d7 Latency).</li> <li>Utilization - <code>rate(node_disk_io_time_seconds_total)</code>. High util means \"disk always busy\", but alone it does not prove a bottleneck (especially on SSD/NVMe). Confirm with latency/queue.</li> <li>Where is iowait? - iowait in CPU row means CPU is idle while waiting disk. It can match util/latency/PSI IO. User/system and iowait are mutually exclusive on a core, but app impact adds up - we wait disk and do no useful work.</li> <li>iowait trap (details) - iowait is CPU state (idle), not thread state. A thread calls <code>read()</code> \u2192 goes to D-state off-CPU \u2192 CPU becomes free. When CPU is idle and there is pending I/O, it is counted as iowait. If new work arrives, CPU switches to it, iowait drops, but the thread still waits disk in D. Nuance: iowait shows \"CPU idle with I/O\", not \"how long we wait disk\". Waiting is tracked in <code>procs_blocked</code> and PSI IO. So with 100% disk util and busy CPU, iowait can be 0%, but threads still wait in D. Trap: you see low iowait and think disk is not a problem, but threads are waiting and work stops. Look at disk util, D-state and PSI IO together, not only iowait.</li> <li>Swap stall - any swap I/O (page-in/page-out) almost always means memory pressure: system does disk I/O to free RAM, and this hurts disk latency even if the disk as a device is ok.</li> <li>Errors/retries - if you have error/retry metrics on disk/RAID/NVMe (or at least dmesg/SMART), check them. Retries and device degradation almost always show higher latency. Node_exporter has no clear disk error counters; then rely on SMART/dmesg/vendor metrics.</li> </ul> <p>Reaction depends: faster disk (NVMe, more IOPS), change I/O pattern (batching, less fsync), remove swap by adding memory. If PSI IO is flat and util is low, disk is likely not the main cause.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#4-network-losses-and-queues-my-favorite-block","title":"4. Network: losses and queues (my favorite block)","text":"<p>Network waits are Off-CPU: when a thread waits on socket/epoll, it is in S-state (WCHAN: <code>ep_poll</code> / <code>tcp_recvmsg</code>) and does not show in PSI.</p> <ul> <li>Do we receive traffic fast enough? - drops and queues on our node answer this:</li> <li>Drops / backlog - first locate the layer where packets are lost:<ul> <li>Interface level (NIC/driver/RX/TX queues) - <code>node_network_receive_drop_total</code> / <code>node_network_transmit_drop_total</code> (per interface). Check physical <code>eth*</code> and virtual (<code>veth*</code>/<code>cni*</code>/<code>tap*</code>): sometimes the physical NIC is clean, but the container interface has drops.</li> <li>Softnet backlog level (CPU cannot digest input) - <code>node_softnet_dropped_total</code> with <code>node_softnet_processed_total</code>.</li> <li>TCP/socket receive path (packet reached TCP stack, but queues/buffers overflow) - localize where it overflows inside TCP receive path using TcpExt counters: <code>node_netstat_TcpExt_ListenOverflows</code>/<code>node_netstat_TcpExt_ListenDrops</code> (listen/accept overflow), <code>node_netstat_TcpExt_TCPRcvQDrop</code> (drop in rcv queue due to rcvbuf limits), <code>node_netstat_TcpExt_TCPOFOQueue</code> (out-of-order queue growth).</li> <li>Receive errors - <code>node_netstat_Tcp_InErrs</code>: how many incoming TCP segments were accepted with error. Any growth is a signal of problems on receive path (bad segments, checksum/offload/driver/port). Drops on receive cause losses; then sender retransmits and client latency grows. This lets us connect cause and effect with only network metrics.</li> </ul> </li> <li>Is the remote side (or the network between) too slow to receive? - retransmissions answer this:</li> <li>Retransmissions - re-sending lost packets. Metrics: on node <code>node_netstat_Tcp_RetransSegs</code> (node_exporter), in container similar TCP metrics exist in cAdvisor with advanced TCP stats, in k8s (limited cAdvisor) there are no TCP metrics. Also check SYN retries: <code>node_netstat_TcpExt_TCPSynRetrans</code> (SYN retrans on handshake; affects connect latency and errors, especially for short connections).     Retransmits are fast (fast retransmit: 3 dupACK \u2192 resend without timeout) and timeout (RTO/backoff: 200 \u2192 400 \u2192 800 \u2192 1600 \u2192 3200 ms \u2026 up to tens of seconds).     In node_exporter we have a size issue: <code>node_netstat_Tcp_RetransSegs</code> counts segments, and <code>node_netstat_TcpExt_TCPTimeouts</code> counts timeout events (RTO). So we cannot precisely split fast vs RTO without extra TcpExt fields, but we can make an optimistic lower bound for heavy losses.     Retransmits are normal: they can happen even in good times (also because of out-of-order packets, see RFC 4653). For diagnosis, look at share of traffic and trend.     Causes are two groups: (1) loss/errors in network (link/port/overload), (2) remote side is too slow to receive/process (queues, slow server/DB and drops).     For scale: a Linux test with CUBIC (default congestion control) on 10G bulk traffic with controlled loss: loss 1% \u2192 throughput ~2.36 Gbit/s, loss 5% \u2192 ~0.512 Gbit/s, loss 10% \u2192 ~0.028 Gbit/s, loss 15% \u2192 ~0.002 Gbit/s. For rough loss impact there is Mathis formula and it is even worse. Real numbers depend on congestion control and network conditions - use it as a guide. Test method: TCP Congestion Control in Action.     To interpret retransmits, check percent in total traffic:<ul> <li>retrans share in TCP traffic: <code>rate(node_netstat_Tcp_RetransSegs) / rate(node_netstat_Tcp_OutSegs)</code></li> <li>RTO lower bound: <code>rate(node_netstat_TcpExt_TCPTimeouts) / rate(node_netstat_Tcp_OutSegs)</code>. 1 RTO timeout means at least 1 retransmitted segment.</li> <li>fast retrans lower bound: <code>(rate(node_netstat_Tcp_RetransSegs) - rate(node_netstat_TcpExt_TCPTimeouts)) / rate(node_netstat_Tcp_OutSegs)</code> Then you can estimate useful traffic share: <code>(rate(node_netstat_Tcp_OutSegs) - rate(node_netstat_Tcp_RetransSegs)) / rate(node_netstat_Tcp_OutSegs)</code> - retransmits push out useful data. The bigger the share of RTO retransmits, the worse. Even 1% is already a lot. If there are no RTO, then fast retrans needs ~10-20% to really hurt. Thresholds from tests and prod can vary.</li> </ul> </li> <li>Do we hit system network limits? - another class of issues, partly same as disk, but grouped here:</li> <li>Conntrack / TIME_WAIT - Conntrack (<code>nf_conntrack</code>) is a kernel table that tracks active TCP/UDP connections for NAT, firewall (iptables/nftables) and stateful filtering. Each new connection adds a record. Near the limit (<code>node_nf_conntrack_entries</code> \u2192 <code>node_nf_conntrack_entries_limit</code>) new connects are dropped - it looks like \"pings work, but new DB connections hang\". TIME_WAIT is a TCP state after close (lives ~60 seconds by default). It stays on the side that closed first (often server in HTTP/1.1; in HTTP/2/gRPC this is softer due to persistent channels). Many TIME_WAIT on clients can hit ephemeral port limits and block outgoing connections; in practice it depends on <code>net.ipv4.ip_local_port_range</code> + number of TIME_WAIT sockets.</li> <li>Backlog / somaxconn / SYN backlog - limits of incoming queues. When they hit, it looks like \"new connects are slow/fail\", while traffic/pings are fine. In metrics it shows as <code>node_netstat_TcpExt_ListenOverflows</code>/<code>node_netstat_TcpExt_ListenDrops</code> (listen/accept queues), and for SYN phase - growth of <code>node_netstat_TcpExt_TCPSynRetrans</code> on clients. Limits live at several levels: app backlog (<code>listen()</code>), <code>net.core.somaxconn</code>, <code>net.ipv4.tcp_max_syn_backlog</code>.</li> <li>File descriptors (FD) - each TCP connection/socket uses an FD. When you hit FD, new accept/connect fails (often in logs as \"too many open files\"). At node level check <code>node_filefd_allocated</code> and <code>node_filefd_maximum</code>; also process limits (ulimit/systemd LimitNOFILE) and system limits (<code>fs.file-max</code>/<code>fs.nr_open</code>).</li> <li>Inodes - inodes limit number of files/dirs. When inodes are exhausted, creating files/dirs (and Unix sockets with FS paths) fails even if disk space is free. At node level check <code>node_filesystem_files_free</code> / <code>node_filesystem_files</code>.</li> </ul> <p>With retrans/drops first check network/stack (losses, queue overflow), then app. With normal drops/retrans and PSI near zero, look at external dependencies (API/DB) that are slow. Drops/retrans are signals of loss/overflow (often earlier than \"throughput limit\"). For \"slow without clear loss\" add TCP timeouts/queues: <code>node_netstat_TcpExt_TCPTimeouts</code> (RTO) and queue overflow counters (rcv/OFO/listen). RTT does not live in these counters - it is per-socket state; use <code>ss -ti</code> (tcp_info: <code>rtt</code>, <code>rto</code>, <code>retrans</code>) or app/proxy metrics.</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#5-memory-pressure-and-faults","title":"5. Memory: pressure and faults","text":"<p>Start with sharp problems. * Is there OOM? - on node check <code>node_vmstat_oom_kill</code>. At container level OOM events are in cAdvisor <code>container_oom_events_total</code>. If OOM exists, it is no longer \"footprint diagnosis\", but a limits/requests and app behavior review. * Do we hit container memory limit? - in cgroup v1 cAdvisor exports <code>container_memory_failcnt</code> (from <code>memory.failcnt</code>): number of failed allocations due to limit. Growing failcnt without OOM means working at the limit with constant reclaim. For limit context check <code>container_memory_usage_bytes</code> and <code>container_spec_memory_limit_bytes</code>. Here also check container awareness (does runtime see cgroup limits) and correct limit detection (see Ideal application deployment, block 4). * Is there free memory right now? - check <code>node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes</code> and its dynamics: sharp drops often match latency degradation. Also check if you hit a threshold visually - it can be due to limits (cgroup limits/requests). * Is swap present and used? - two different questions:   * swap enabled: <code>node_memory_SwapTotal_bytes &gt; 0</code> - swap exists (not yet a problem, it may be empty, but it is a flag to check more).   * swap used: <code>node_memory_SwapTotal_bytes - node_memory_SwapFree_bytes</code> (plus <code>node_memory_SwapCached_bytes</code>) - how much data is already swapped out. \"Swap used\" does not mean disk is busy now, but it is a risk: access will need disk page-in and is much slower than RAM.   * swap actively used: <code>node_vmstat_pswpin</code> / <code>node_vmstat_pswpout</code> (use rate) - pages move between RAM and swap right now. This is where disk affects latency: swap-in blocks threads on memory access path. * Do we read pages from disk due to major faults? - <code>node_vmstat_pgmajfault</code>: growth means page faults became \"major\", kernel had to read a page from disk before continuing. The disk can be (1) swap (swap-in), (2) file-backed pages (page cache miss / mmap). <code>node_vmstat_pswpin</code>/<code>node_vmstat_pswpout</code> count pages that went through swap: if <code>pgmajfault</code> grows with <code>pswpin</code>, then major faults are swap; if <code>pgmajfault</code> grows but <code>pswpin/pswpout</code> do not, it is more often file-backed pages. * Minor faults: do they matter? - minor faults are normal (first touch, COW, etc.). They matter when they grow by orders and become notable CPU/latency cost. At node level a rough estimate is <code>node_vmstat_pgfault - node_vmstat_pgmajfault</code>, but interpret only in workload context and dynamics.</p> <p>Next actions depend on load: add memory, adjust limits/requests, reduce caches/heap, set GOMEMLIMIT/ActiveProcessorCount, etc. In containers it is important to separate working set from page cache (e.g., <code>container_memory_working_set_bytes</code> vs usage).</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#6-if-there-are-no-footprints","title":"6. If there are no footprints","text":"<p>PSI \u2248 0, disk/network/memory are calm, but the service is slow? Then the delay is above OS level:</p> <ul> <li>external dependency (DB, API) - look in tracing and app metrics;</li> <li>lock contention in app - see <code>futex_wait</code> in off-CPU profilers;</li> <li>wrong parallelism - single-thread hot path, short pool, no backpressure.</li> </ul> <p>Then move to code profiling (on-CPU and off-CPU profilers, tracing).</p>","tags":["performance","linux","observability"]},{"location":"application-footprint.html#what-to-do-next","title":"What to do next","text":"<p>System Footprint Method gives direction, not a solution. Next actions depend on where the problem is:</p> <p>If the problem is in the app (high user time without PSI, lock contention, external API): * Profile the app: on-CPU (perf, pprof), off-CPU (offcputime), tracing (OpenTelemetry, Jaeger). * Optimize code, algorithms, parallelism.</p> <p>If metrics are not enough (container shows a problem, but details are hidden): * Go to host level: check node_exporter metrics for the node where the container runs. * Check if the bottleneck is shared (CPU, disk, network) with neighbors. * Use system tools: <code>perf</code>, <code>bpftrace</code>, <code>iotop</code>, <code>tcpdump</code>.</p> <p>If the problem is in host resources (PSI high, util 100%, latency grows): * Tune the system: scheduler (CFS/nice), I/O scheduler (mq-deadline/kyber), network parameters (RSS/RPS, ring buffers), memory (vm.swappiness, THP). * Add resources: add CPU/RAM, move to faster disks (NVMe), improve network (10G \u2192 25G, lower RTT). * Move load: horizontal scaling, move services to other nodes.</p> <p>System Footprint Method is a checklist for fast diagnosis, not a replacement for profilers. It shows where to start digging.</p> <p>In the previous series \u2014 we talked about deploying the app without throttling.</p> <p>Next I will talk about parallelism and concurrency at CPU level.</p>","tags":["performance","linux","observability"]},{"location":"blog.html","title":"Blog","text":"<p>Longreads in English on performance, observability, and reliability engineering.</p> Block 1 \u00b7 3 min read Function: the atomic unit of code <p>The First Nine Guide, block 1: complexity, resources, and concurrency safety</p> first-nineseriesperformancefunctions Read -&gt; Block 2 \u00b7 4 min read Runtime models: running thousands of functions at once <p>The First Nine Guide, block 2: execution models and their tradeoffs</p> first-nineseriesruntimeconcurrency Read -&gt; Block 3 \u00b7 3 min read Typical web-application inner architecture <p>The First Nine Guide, block 3: request layers and internal service anatomy</p> first-nineseriesarchitecturehttp Read -&gt; Block 4 \u00b7 5 min read Ideal application deployment <p>The First Nine Guide, block 4: deploying without throttling surprises</p> first-nineseriesdeploymentcontainers Read -&gt; Block 5 \u00b7 20+ min read Application footprint in operating system <p>System Footprint: how to separate OS and app issues by metrics</p> performancelinuxobservability Read -&gt; 1 min read About Read -&gt; 1 min read Dashboards Read -&gt;"},{"location":"dashboards.html","title":"Dashboards","text":"<ul> <li>System Footprint (SFP) \u2014 Grafana JSON: system-footprint.json</li> </ul>"},{"location":"function-atomic-unit.html","title":"Function: the atomic unit of code","text":"<p>The First Nine Guide. Block 1</p> <p></p> <p>Functions are the basic unit of every application. Requests call functions; some are fast, some are slow. To reason about performance, I classify functions by a few traits:</p> <ol> <li>Algorithmic complexity.</li> <li>Resource profile.</li> <li>Concurrency safety.</li> </ol> <p>Let's go in order.</p>","tags":["first-nine","series","performance","functions"]},{"location":"function-atomic-unit.html#algorithmic-complexity","title":"Algorithmic complexity","text":"<p>A function is a building block of performance. The first and roughest estimate of its behavior is Big-O.</p> <p>Before you roll your eyes: no heavy math here. To analyze slow code you only need to:</p> <ul> <li>tell O(1) from O(n^2)</li> <li>understand that O(n log n) is the boundary; beyond it there is only pain</li> <li>notice when an algorithm suddenly becomes O(n!)</li> </ul> <p></p> <p>Above the yellow line performance starts degrading as data volume grows.</p> <p>Here are examples and thresholds for n (I do not have real-life examples of O(n!)):</p> <p></p>","tags":["first-nine","series","performance","functions"]},{"location":"function-atomic-unit.html#resource-profiles","title":"Resource profiles","text":"<p>Speed is not the whole story; we're doing performance engineering.</p> <p>Some functions wait on disk, network, or cache. Others burn CPU.</p> <p>Classify functions early (ideally while writing them):</p> <ul> <li>IO-bound - waits on network, disk, or DB</li> <li>CPU-bound - parses and computes</li> <li>Memory-bound - pulls data from RAM without heavy CPU</li> <li>GPU-bound - obviously, uses GPU</li> </ul> <p>This tells you where the bottleneck hides: CPU, memory, socket, or the algorithm itself.</p> <p></p>","tags":["first-nine","series","performance","functions"]},{"location":"function-atomic-unit.html#concurrency-safety","title":"Concurrency safety","text":"<p>If code runs in parallel - and it almost always does - ask two questions:</p> <ul> <li>will we corrupt shared data?</li> <li>will we block our neighbors?</li> </ul> <p>Three categories:</p> <ul> <li>Thread-safe - can be called from any thread</li> <li>Thread-unsafe - can break everything</li> <li>Conditionally safe - safe only under certain conditions</li> </ul> <p>Thread-safe:</p> <ol> <li>Works with immutable data.</li> <li>Has no shared mutable state.</li> <li>Synchronizes access to shared data (locks).</li> <li>Uses atomic operations.</li> </ol> <p>Thread-unsafe:</p> <ol> <li>Mutates global state.</li> <li>Uses static mutable variables.</li> <li>Does non-atomic read-modify-write.</li> <li>Examples: strtok() in C, SimpleDateFormat in Java.</li> </ol> <p>Conditionally safe:</p> <ol> <li>Safe under external synchronization.</li> <li>Read-only operations on shared data.</li> </ol>","tags":["first-nine","series","performance","functions"]},{"location":"function-atomic-unit.html#call-overhead","title":"Call overhead","text":"<p>Every function call allocates its own memory region called a stack frame.</p> <p>Each call creates a new frame at the top of the stack; when the function completes, the frame is removed. Even int sum(int a, int b) costs 16-64 bytes of overhead.</p> <p></p> <p>Why should you care?</p> <p>Simple:</p> <ul> <li>Creating a stack frame takes 10-50 CPU cycles (fast, but it hurts in tight loops).</li> </ul> <p>The deeper a function sits in a call chain, the more expensive it becomes (hello, stack overflow). Lambdas and anonymous functions are even pricier.</p> <p>Dirty hack: inline functions. They remove the frame cost, but try/catch/finally breaks inlining.</p>","tags":["first-nine","series","performance","functions"]},{"location":"function-atomic-unit.html#common-traps-take-them-with-you","title":"Common traps (take them with you)","text":"<p>Loops:</p> <ul> <li>String concatenation in a loop (str += char often becomes O(n^2)).</li> <li>Nested loops over large collections (especially unbounded ones).</li> </ul> <p>Stack overflow risk:</p> <ul> <li>Each call creates a stack frame (~100-1000 bytes).</li> <li>Deep recursion will exhaust the stack (~1 MB by default).</li> </ul> <p>Hybrid-bound functions:</p> <ul> <li>Blocking I/O inside CPU functions is hard to debug and scale. Avoid it.</li> </ul> <p>Next up: a breakdown of runtime models.</p> <p>Follow the channel @r9yo11yp9e - we will keep chasing the nines.</p>","tags":["first-nine","series","performance","functions"]},{"location":"ideal-deployment.html","title":"Ideal application deployment","text":"<p>The First Nine Guide. Block 4</p> <p></p> <p>So, we finally built the ideal web application:</p> <ol> <li>We reduced method complexity and function cost (block 1).</li> <li>We picked the right runtime model for the workload (block 2).</li> <li>We understood the internal architecture, which made the system resilient (block 3).</li> </ol> <p>Now it's time to ship to production. And of course, into a container. Let's see what can go wrong. We'll also rate runtimes by how well they avoid traps on this path.</p> <p>How we will do it: each runtime gets the same three container variants:</p> <p>1) Naive - run as-is, no tuning. Typical problems show up.</p> <p>2) Tuned - remove CPU limits (quota=0) and keep base resources: no CFS throttling, less jitter.</p> <p>3) Ideal - aligned requests/parallelism with memory limits.</p> <p>On the right of each diagram I show thread behavior, parallelism, and mapping to heavy OS threads.</p> <p>Why remove CPU limits?</p> <ul> <li>Simplified: the kernel artificially slows the process (CFS throttling). Latency spikes and short bursts starve for CPU.</li> <li>What stays: cpu.requests (Kubernetes target share) plus memory.requests and memory.limits.</li> </ul> <p>(There will be a dedicated post, but feel free to argue in the comments.)</p> <p>When should limits stay?</p> <p>When CPU usage is uncontrolled and can eat the whole node. Limits are justified for untrusted code or shared clusters. A no-limits approach requires over-provisioned cpu.requests and careful monitoring. Test before removing limits.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ideal-deployment.html#java-virtual-machine-11","title":"Java Virtual Machine 11+","text":"<p>I wrote about JVM tuning before; here is the short version.</p> <p></p> <p>Naive deployment</p> <p>JVM sees a 2 CPU limit and sizes its parallelism accordingly: GC, ForkJoinPool, and web server pools (Tomcat). The problem may look like this: throttling during warm-up, latency spikes, off-heap leaks.</p> <p>Remove throttling</p> <p>In container B we remove limits. Trap: without limits JVM assumes the whole node. availableProcessors() becomes 128 and the runtime spawns a massive number of threads. Context switching explodes and performance degrades. The app tries to use 128 cores with a 1 CPU guarantee.</p> <p>Ideal deployment</p> <p>Remove limits, but tell JVM the real budget. Set -XX:ActiveProcessorCount=1 (equals requests). JVM aligns its internal parallelism and avoids thread explosion. Also tune memory (-XX:MaxRAMPercentage, -XX:MaxMetaspaceSize) to avoid OOM killer.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ideal-deployment.html#java-virtual-machine-21-virtual-threads","title":"Java Virtual Machine 21+ (Virtual Threads)","text":"<p>Add a note on JVM with virtual threads.</p> <p></p> <p>Naive deployment</p> <p>Same as JVM 11+: requests/limits and throttling. The virtual thread scheduler also sizes itself based on limits.</p> <p>Remove throttling</p> <p>Without limits the scheduler spawns too many heavy threads; virtual threads pile up.</p> <p>Ideal deployment</p> <p>Remove limits and do what we do in JVM 11+, plus one more flag:</p> <ol> <li>-XX:ActiveProcessorCount=1 - controls GC and ForkJoinPool parallelism.</li> <li>-Djdk.virtualThreadScheduler.parallelism=1 - sizes the heavy thread pool for virtual threads.</li> </ol> <p>This aligns runtime parallelism with guaranteed resources.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ideal-deployment.html#golang-110","title":"Golang 1.10+","text":"<p>Naive deployment</p> <p>Run with requests and limits. Go sees limits and runtime.NumCPU() returns 2. Issues: CPU throttling and GC not respecting container boundaries (OOMKill risk).</p> <p>Remove throttling</p> <p>Remove limits. Trap: Go now sees the whole machine, runtime.NumCPU() returns 128. The scheduler spawns 128 system threads. Performance degrades.</p> <p>Ideal deployment</p> <p>Set GOMAXPROCS=1 (from requests). Set GOMEMLIMIT to 70-90% of memory limit because Go ignores memory.limit. For automation, use automemlimit. The runtime respects container boundaries and behaves predictably.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ideal-deployment.html#nodejs-1820","title":"Node.js 18+/20+","text":"<p>Naive deployment</p> <p>Requests 1, limits 2. Node's main thread is single-threaded; libuv pool defaults to 4. Problems are minimal, except CPU throttling on CPU-bound workloads.</p> <p>Remove throttling</p> <p>Almost nothing happens. Node will not explode or try to use all cores. But you still do not get effective parallelism.</p> <p>Ideal deployment</p> <p>The right answer is scale-out. Keep process count aligned with requests. This yields predictable throughput and clarity.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ideal-deployment.html#python-38-gunicorn-uvicorn","title":"Python 3.8+ (Gunicorn / Uvicorn)","text":"<p>Naive deployment</p> <p>Python has the GIL, so execution is single-threaded. You can use multi-process pseudo-parallelism. Naive deployment is usually fine, but throttling can happen.</p> <p>Remove throttling</p> <p>Remove limits. Trap: C libraries (NumPy, Pandas, OpenCV) may see 128 cores and parallelize aggressively, creating resource contention.</p> <p>Ideal deployment</p> <ul> <li>Gunicorn processes = requests.</li> <li>For risky libraries: OPENBLAS_NUM_THREADS=1 and similar limits.</li> <li>For long-lived workers: max-requests(+jitter), preload.</li> </ul>","tags":["first-nine","series","deployment","containers"]},{"location":"ideal-deployment.html#ruby-3","title":"Ruby 3+","text":"<p>Naive deployment</p> <p>Single-threaded MRI. Same throttling risks, but usually acceptable.</p> <p>Remove throttling</p> <p>Remove limits. Trap: Puma uses Etc.nprocessors. Without limits it sees all cores and may spawn too many processes or threads.</p> <p>Ideal deployment</p> <p>Set it explicitly:</p> <ul> <li>WEB_CONCURRENCY=1 (from requests) - worker processes.</li> <li>RAILS_MAX_THREADS=5 - thread pool size per worker (depends on workload).</li> <li>For Unicorn and Sidekiq, set worker/worker concurrency explicitly as well.</li> </ul>","tags":["first-nine","series","deployment","containers"]},{"location":"ideal-deployment.html#php-fpm-74","title":"PHP-FPM 7.4+","text":"<p>Naive deployment</p> <p>PHP-FPM runs in dynamic mode by default, creating and removing child processes as needed (process-per-request). Heavy apps hit limits and suffer. Dynamic mode (pm=dynamic) also causes memory spikes and unpredictability.</p> <p>Remove throttling</p> <p>Remove limits. PHP-FPM itself does not explode. Trap: if a library queries CPU via getconf _NPROCESSORS_ONLN, it will see all 128 cores.</p> <p>Ideal deployment</p> <ul> <li>Process manager: pm = static.</li> <li>Worker count: pm.max_children = 1 (equals cpu.requests).</li> </ul> <p>This yields stable and predictable behavior. PHP-FPM is harder to instrument due to its short-lived runtime, but Roadrunner or FrankenPHP can help.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ideal-deployment.html#net-6","title":".NET 6+","text":"<p>Naive deployment</p> <p>.NET is container-aware: it sees a 2 CPU limit and sizes ThreadPool and GC accordingly. Throttling can still happen.</p> <p>Remove throttling</p> <p>Remove limits. Trap: .NET sees all host cores and inflates ThreadPool. You get a 1 CPU guarantee but plan for 128.</p> <p>Ideal deployment</p> <p>Tune runtime to requests:</p> <ul> <li>DOTNET_PROCESSOR_COUNT=1 - inherited by all pools.</li> <li>DOTNET_GCServer=true - server GC for predictable throughput (not always required, but reduces uncertainty).</li> </ul> <p>I once tried to build a subjective runtime score table. Now I believe it is impossible to do objectively. So I dropped it and focus on traps and recommendations instead.</p> <p>I will keep updating this article as a living cheat sheet. If you spot issues or gaps, leave comments.</p> <p>Next: we finally define what a \"heavy thread\" is and how to live with it.</p> <p>Previous: web server internals.</p> <p>Follow the channel @r9yo11yp9e - we will keep chasing the nines.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"inner-architecture.html","title":"Typical web-application inner architecture","text":"<p>The First Nine Guide. Block 3</p> <p></p> <p>Disclaimer: real-world application architectures vary, but there are common layers that show up almost everywhere. That's what we'll cover.</p> <p>In the previous part we discussed runtime models. A runtime alone is not a web application. Today we will look at what an application must implement inside a runtime to earn that name.</p> <p>I tried to find a good reference that explained web applications independent of language and runtime. I could not. So here is my own interpretation to fix two problems:</p> <ol> <li>Many engineers do not want to dive into application internals - it feels too complex or unclear where to start.</li> <li>The opposite view is also common: \"there is a box, an input, an output, and business logic in the middle.\" That hides what resource each function actually consumes.</li> </ol> <p>Let's open the box.</p>","tags":["first-nine","series","architecture","http"]},{"location":"inner-architecture.html#http-request-layers","title":"HTTP request layers","text":"<p>Start with the layers a request passes through. We'll separate four internal layers.</p>","tags":["first-nine","series","architecture","http"]},{"location":"inner-architecture.html#network-layer","title":"NETWORK LAYER","text":"<p>Goal: turn an HTTP request into structured data for business logic.</p> <p></p> <p>What happens here:</p> <ul> <li>socket listen (ports 8080, 443)</li> <li>accept connections</li> <li>TLS handshake - decrypt HTTPS traffic</li> <li>HTTP parsing - headers and body</li> </ul> <p>Many assume this is IO-only. With large HTTPS bodies it can become CPU-bound.</p>","tags":["first-nine","series","architecture","http"]},{"location":"inner-architecture.html#request-processing","title":"REQUEST PROCESSING","text":"<p>Goal: turn an HTTP request into a function call and route it to the correct handler.</p> <p></p> <p>What happens here:</p> <ul> <li>deserialize (JSON/XML/Proto)</li> <li>validation &amp; auth</li> <li>rate limiting</li> <li>request routing by URL</li> </ul> <p>Rate limits are usually memory-bound if local. Distributed limits live in Redis and become IO.</p>","tags":["first-nine","series","architecture","http"]},{"location":"inner-architecture.html#business-logic","title":"BUSINESS LOGIC","text":"<p>Goal: execute the core logic of the service.</p> <p></p> <p>What happens here:</p> <ul> <li>domain operations - algorithms and business rules</li> <li>calculations - compute, transform</li> <li>external API calls</li> <li>database queries - PostgreSQL/MySQL/MongoDB</li> <li>cache operations - Redis/Memcached</li> </ul> <p>This is the SRE favorite for incidents. Slow SQL, locks, external APIs without timeouts, and heavy O(n!) compute all live here.</p>","tags":["first-nine","series","architecture","http"]},{"location":"inner-architecture.html#response-formation","title":"RESPONSE FORMATION","text":"<p>Goal: package the result into an HTTP response and send it back.</p> <p></p> <p>What happens here:</p> <ul> <li>serialization (JSON/XML/Proto)</li> <li>compression (gzip/brotli)</li> <li>encryption for HTTPS</li> <li>send to socket</li> </ul> <p>The same problems as the first layer.</p>","tags":["first-nine","series","architecture","http"]},{"location":"inner-architecture.html#full-picture","title":"Full picture","text":"","tags":["first-nine","series","architecture","http"]},{"location":"inner-architecture.html#internal-architecture","title":"Internal architecture","text":"<p>Now that we have layers, let's draw an abstract architecture as if this were a microservice system.</p> <p></p> <p>Meet the components. The real system may have more or fewer. The idea is what matters: isolate anything that has its own worker pool or executes outside the application.</p> <p>List:</p> <ul> <li>HTTP Ingress - entry point, initial routing, load balancing across instances.</li> <li>Dispatcher - distributes requests to workers, manages queues and priorities.</li> <li>Worker Execution - core business logic, controllers and services.</li> <li>Runtime Overhead - GC, schedulers, thread scheduling. The name is intentionally harsh to highlight cost.</li> <li>Cache Access - in-memory caches and external caches (Redis/Memcached).</li> <li>Scripting &amp; Serialization - JSON/XML/Protobuf, template engines, data transforms.</li> <li>Logging &amp; Instrumentation - structured logging and tracing.</li> <li>External Interaction - databases, queues, HTTP APIs, microservices.</li> </ul> <p>Why does this matter? A simple timeout example:</p> <ul> <li>Business logic issues an SQL query. The DB has its own pool (e.g., Hikari).</li> <li>The pool is exhausted. A worker thread waits for a connection.</li> <li>Goroutines accumulate or the worker pool stalls.</li> </ul> <p>Sure, a timeout in the DB pool helps, but in reactive runtimes this is often missed.</p>","tags":["first-nine","series","architecture","http"]},{"location":"inner-architecture.html#bag-of-advice","title":"Bag of advice","text":"<p>Knowing the internal architecture makes resilience patterns easier:</p> <ul> <li>timeouts and TTLs on internal queues</li> <li>bulkheads and pool separation (CPU vs IO pools)</li> <li>fallback mechanics, even internal circuit breakers</li> </ul> <p>More on patterns later.</p> <p>That's all for now.</p> <p>Next: we finish designing the ideal application and deploy it.</p> <p>Previous: runtime models.</p> <p>Follow the channel @r9yo11yp9e - we will keep chasing the nines.</p>","tags":["first-nine","series","architecture","http"]},{"location":"runtime-models.html","title":"Runtime models - running thousands of functions at once","text":"<p>The First Nine Guide. Block 2</p> <p></p> <p>Disclaimer: real systems blend multiple models. Pure versions are rare.</p> <p>In the previous part we discussed the atom of code - the function. We saw how complexity and characteristics affect performance.</p> <p>But real systems execute not one, but thousands and tens of thousands of functions at the same time. Who manages that chaos? The answer is the runtime model. The choice of model is a foundation of software architecture.</p> <p>Each model answers two questions:</p> <ol> <li>Who owns the threads? (runtime or application code)</li> <li>What happens when a thread blocks?</li> </ol> <p>Let's go through the tradeoffs and where each model fits.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"runtime-models.html#1-thread-per-request","title":"1. Thread-per-request","text":"<p>One of the oldest models:</p> <p>one request - one thread - request completes - thread dies.</p> <p>Who owns it: application code creates heavy threads and forgets them</p> <p>Weight: 1-8 MB per stack; creation ~100 microseconds</p> <p>If it blocks: hardware sits idle</p> <p></p> <p>Use it if: legacy monolith at 3 RPS - otherwise no.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"runtime-models.html#2-thread-pool","title":"2. Thread pool","text":"<p>A logical evolution. We remove creation/destruction overhead, keep a fixed pool of heavy threads and a task queue. This is still common in the wild.</p> <p>Who owns it: the pool assigns tasks to ready threads</p> <p>If it blocks: the thread hangs, the queue grows</p> <p></p> <p>Use it if: mixed load (CPU + I/O), you want transparency, and you hate \"modern\" trends.</p> <p>The next models try to solve the biggest pool problem: heavy threads idle while waiting on I/O.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"runtime-models.html#3-event-loop","title":"3. Event loop","text":"<p>A radical shift. Instead of an army of workers you have one fast event loop on a single heavy thread. It kicks off an async operation (DB call, etc.) and immediately moves to other events. When the result is ready, it handles it.</p> <p>poll I/O - callbacks - timers - ...</p> <p>Who owns it: the loop itself; only one heavy thread</p> <p>If it blocks: the whole application freezes</p> <p></p> <p>Use it if: mostly I/O with minimal CPU.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"runtime-models.html#4-fibers","title":"4. Fibers","text":"<p>Not a separate model but an approach that upgrades the event loop (and beyond), partially solving callback hell. Logic is written inside lightweight fibers. The loop still orchestrates everything, but instead of callbacks it resumes the right fiber. When a fiber hits I/O it yields, keeping the code linear. Fibers can call each other following business logic rather than runtime logic.</p> <p>Who owns it: more control for the developer, but the runtime still drives</p> <p>If it blocks: it blocks the loop as well</p> <p></p> <p>Use it if: you want clean async in an I/O service.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"runtime-models.html#5-green-threads","title":"5. Green threads","text":"<p>An older model and the ancestor of many new ones. Many lightweight threads live inside one heavy thread. The runtime switches them on a timer.</p> <p>Who owns it: the runtime; everyone lives on one heavy thread</p> <p>If it blocks: any blocking sys-call in a lightweight thread blocks the heavy thread. Everything stops.</p> <p></p> <p>Use it if: a prototype, small script, lab project.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"runtime-models.html#6-virtual-threads","title":"6. Virtual threads","text":"<p>A game changer. The evolution of green threads. Millions of lightweight threads managed by the runtime scheduler and executed on a small pool of heavy threads. The key win is blocking behavior.</p> <p>Who owns it: the runtime creates lightweight threads and schedules them onto a heavy pool</p> <p>If it blocks: when a lightweight thread initiates I/O, the scheduler parks it and runs another. Heavy threads do not idle.</p> <p>With blocking I/O (e.g., Thread.sleep() or File.read() on a regular socket) pinning may occur and reduce efficiency.</p> <p></p> <p>Use it if: modern high-load systems with many network calls. But still use mutexes, timeouts, and fail-fast to avoid millions of parked threads.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"runtime-models.html#7-actor-model","title":"7. Actor model","text":"<p>Not exactly a runtime model but a concurrency model that heavily shapes architecture. There is no shared memory: actors communicate via messages. The scheduler spreads actors across worker threads.</p> <p>Principles:</p> <ul> <li>no shared state</li> <li>only message passing, no shared memory or locks</li> <li>one actor processes one message at a time</li> <li>\"let it crash\" resilience philosophy</li> </ul> <p>Who owns it: the actor runtime; an actor handles one message at a time</p> <p>If it blocks: it blocks only itself; others keep working</p> <p></p> <p>Use it if: you need high resilience and a ready-made framework. Works for microservices and internal service architecture.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"runtime-models.html#summary-table","title":"Summary table","text":"","tags":["first-nine","series","runtime","concurrency"]},{"location":"runtime-models.html#hybrid-models-and-where-they-live","title":"Hybrid models and where they live","text":"<p>Pure models are rare. Modern runtimes combine approaches to patch weaknesses.</p> <p>Short list:</p> <ol> <li>Worker threads + event loop. Common in Node.js (with Worker Threads). The main event loop handles I/O and a worker pool handles CPU.</li> <li>Multi-loop architecture. Seen in Vert.x. Multiple event loops run in parallel, each on its own heavy thread. A balancer distributes incoming connections.</li> <li>Actor model + thread pools. Typical Akka approach with configurable dispatchers. Different actor types sit on different pools: I/O actors on a large pool, CPU actors on a small one, critical ones on dedicated threads.</li> </ol> <p>Next up: typical application architecture.</p> <p>Previous: function attributes.</p> <p>Follow the channel @r9yo11yp9e - we will keep chasing the nines.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"ru/index.html","title":"\u0413\u043b\u0430\u0432\u043d\u0430\u044f","text":"The Last of 9s \u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043e\u043f\u043b\u043e\u0442 \u0445\u0430\u0440\u0434\u043a\u043e\u0440\u043d\u043e\u0433\u043e SRE. <p>         \u041d\u0438\u043a\u0430\u043a\u043e\u0433\u043e \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433\u0430, \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0443\u0440\u043e\u0432\u0430\u044f \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u0438\u044f. \u041a\u0443\u043b\u0441\u0442\u043e\u0440\u0438, \u0445\u0430\u043a\u0438 \u0438 \u0442\u0435\u0445\u0433\u0430\u0439\u0434\u044b \u043f\u0440\u043e \u043d\u0430\u0431\u043b\u044e\u0434\u0430\u0435\u043c\u043e\u0441\u0442\u044c, \u043f\u0435\u0440\u0444\u043e\u0440\u043c\u0430\u043d\u0441, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u0438 \u0442\u0440\u0430\u0431\u043b\u0448\u0443\u0442\u0438\u043d\u0433. \u0417\u0434\u0435\u0441\u044c \u043c\u044b \u0431\u043e\u0440\u0435\u043c\u0441\u044f \u0437\u0430 \u0434\u0435\u0432\u044f\u0442\u043a\u0438 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439.       </p> \u0411\u043b\u043e\u0433 Telegram <p>         \u041a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 \u0438 \u043e\u0431\u0441\u0443\u0436\u0434\u0435\u043d\u0438\u044f - \u0432 Telegram \u043a\u0430\u043d\u0430\u043b\u0435 The Last of 9s.       </p>          English first: Switch to English.        Kirill Yurkov \u0421\u0432\u0435\u0436\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0411\u043b\u043e\u043a 1 \u00b7 3 \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f Function: the atomic unit of code <p>The First Nine Guide, \u0431\u043b\u043e\u043a 1: \u0430\u0442\u043e\u043c \u043a\u043e\u0434\u0430, \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u044b</p> first-nineseriesperformancefunctions \u0427\u0438\u0442\u0430\u0442\u044c -&gt; \u0411\u043b\u043e\u043a 2 \u00b7 4 \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f Runtime models: \u043a\u0430\u043a \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0442\u044b\u0441\u044f\u0447\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e <p>The First Nine Guide, \u0431\u043b\u043e\u043a 2: \u043c\u043e\u0434\u0435\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0438 \u0438\u0445 \u043a\u043e\u043c\u043f\u0440\u043e\u043c\u0438\u0441\u0441\u044b</p> first-nineseriesruntimeconcurrency \u0427\u0438\u0442\u0430\u0442\u044c -&gt; \u0411\u043b\u043e\u043a 3 \u00b7 4 \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f Typical web-application inner architecture <p>The First Nine Guide, \u0431\u043b\u043e\u043a 3: \u0441\u043b\u043e\u0438 \u0432\u0435\u0431-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0438 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430</p> first-nineseriesarchitecturehttp \u0427\u0438\u0442\u0430\u0442\u044c -&gt; \u0411\u043b\u043e\u043a 4 \u00b7 5 \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f Ideal application deployment <p>The First Nine Guide, \u0431\u043b\u043e\u043a 4: \u043a\u0430\u043a \u0434\u0435\u043f\u043b\u043e\u0438\u0442\u044c \u0431\u0435\u0437 \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433\u0430 \u0438 \u0441\u044e\u0440\u043f\u0440\u0438\u0437\u043e\u0432</p> first-nineseriesdeploymentcontainers \u0427\u0438\u0442\u0430\u0442\u044c -&gt; \u0411\u043b\u043e\u043a 5 \u00b7 20+ \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f Application footprint in operating system <p>System Footprint: \u043a\u0430\u043a \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b OS \u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u043e \u0441\u043b\u0435\u0434\u0430\u043c \u0432 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0445</p> performancelinuxobservability \u0427\u0438\u0442\u0430\u0442\u044c -&gt;"},{"location":"ru/index.html#_1","title":"\u041e \u0431\u043b\u043e\u0433\u0435","text":"<p>The Last of 9s - \u044d\u0442\u043e \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u044b\u0439 \u0431\u043b\u043e\u0433, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u044f \u0434\u0435\u043b\u044e\u0441\u044c \u043e\u043f\u044b\u0442\u043e\u043c \u0438 \u043f\u043e\u0434\u0445\u043e\u0434\u0430\u043c\u0438 \u043a \u0442\u043e\u043c\u0443, \u043a\u0430\u043a \u043f\u043e\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b \u0441 \u043d\u0443\u043b\u044f \u0438 \u0440\u0435\u0448\u0430\u0442\u044c \u043f\u0440\u0438\u043a\u043b\u0430\u0434\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0432\u043e\u043a\u0440\u0443\u0433 \u043c\u043e\u0438\u0445 \u043b\u044e\u0431\u0438\u043c\u044b\u0445 \u0430\u0441\u043f\u0435\u043a\u0442\u043e\u0432 \u0441\u0438\u0441\u0442\u0435\u043c. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u041e\u0431\u043e \u043c\u043d\u0435.</p>"},{"location":"ru/about.html","title":"\u041e\u0431\u043e \u043c\u043d\u0435","text":"<p>The Last of 9s - \u044d\u0442\u043e \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u044b\u0439 \u0431\u043b\u043e\u0433, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u044f \u0434\u0435\u043b\u044e\u0441\u044c \u043e\u043f\u044b\u0442\u043e\u043c \u0438 \u043f\u043e\u0434\u0445\u043e\u0434\u0430\u043c\u0438 \u043a \u0442\u043e\u043c\u0443, \u043a\u0430\u043a \u043f\u043e\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b \u0441 \u043d\u0443\u043b\u044f \u0438 \u0440\u0435\u0448\u0430\u0442\u044c \u043f\u0440\u0438\u043a\u043b\u0430\u0434\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0432\u043e\u043a\u0440\u0443\u0433 \u043c\u043e\u0438\u0445 \u043b\u044e\u0431\u0438\u043c\u044b\u0445 \u0430\u0441\u043f\u0435\u043a\u0442\u043e\u0432 \u0441\u0438\u0441\u0442\u0435\u043c:</p> <ul> <li>Observability: \u041a\u0430\u043a \u0438\u0437\u0432\u043b\u0435\u043a\u0430\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0446\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0438\u0437 \u0441\u0430\u043c\u044b\u0445 \u043f\u0440\u0438\u0432\u044b\u0447\u043d\u044b\u0445 \u0441\u0438\u0433\u043d\u0430\u043b\u043e\u0432.</li> <li>Performance: \u0413\u0434\u0435 \u0442\u0435\u0440\u044f\u0435\u0442\u0441\u044f \u0432\u0440\u0435\u043c\u044f.</li> <li>Reliability: \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435 \u043f\u0430\u0434\u0430\u044e\u0442 (\u0438\u043b\u0438 \u043f\u0430\u0434\u0430\u044e\u0442, \u043d\u043e \u043a\u0440\u0430\u0441\u0438\u0432\u043e).</li> </ul>"},{"location":"ru/about.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e \u043e\u0431\u043e \u043c\u043d\u0435","text":"<p>10+ \u043b\u0435\u0442 \u0432 \u0438\u043d\u0434\u0443\u0441\u0442\u0440\u0438\u0438 (Telecom, Banking, Retail, Startups). \u041f\u0440\u043e\u0448\u0435\u043b \u043f\u0443\u0442\u044c \u043e\u0442 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u0430 \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u0447\u043d\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043e \u0442\u0435\u0445\u043b\u0438\u0434\u0430 \u0438 \u0438.\u043e. CIO.</p> <ul> <li>Production Experience: \u0412\u044b\u0432\u0435\u043b SLA \u043a\u0440\u0443\u043f\u043d\u043e\u0433\u043e e-commerce \u0441 \u043e\u0434\u043d\u043e\u0439 \u0434\u0435\u0432\u044f\u0442\u043a\u0438 \u0434\u043e \u0442\u0440\u0435\u0445, \u043b\u0438\u0447\u043d\u043e \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0432 400+ \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u043e\u0432.</li> <li>Processes: \u0412\u043d\u0435\u0434\u0440\u044f\u043b \u0441 \u043d\u0443\u043b\u044f Incident Management, Error Budgets, SLO, Capacity Planning \u0438 FinOps.</li> <li>Engineering: \u041d\u0430\u043f\u0438\u0441\u0430\u043b \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a \u0434\u043b\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u0447\u043d\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0438 \u0432\u043d\u0435\u0434\u0440\u044f\u043b Performance Testing as a Service.</li> <li>Education: \u0421\u043f\u0438\u043a\u0435\u0440 \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0439, \u043c\u0435\u043d\u0442\u043e\u0440 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432 \u043f\u043e \u043f\u0435\u0440\u0444\u043e\u0440\u043c\u0430\u043d\u0441\u0443 \u0438 SRE.</li> <li>Current: Customer Reliability Technical Lead \u0432 VictoriaMetrics.</li> </ul>"},{"location":"ru/about.html#_3","title":"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b","text":"<ul> <li>Telegram Channel (\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442)</li> <li>GitHub</li> <li>LinkedIn</li> <li>Telegram PM</li> </ul>"},{"location":"ru/application-footprint.html","title":"Application footprint in operating system","text":"<p>The First Nine Guide. \u0411\u043b\u043e\u043a 5</p> <p></p> <p>\u0412\u043e\u0442 \u0432\u044b \u043f\u0440\u0438\u0448\u043b\u0438 \u043d\u0430 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442, \u0433\u0434\u0435 \u0432\u0430\u043c \u0441\u043a\u0430\u0437\u0430\u043b\u0438, \u0447\u0442\u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442 \u0447\u0442\u043e-\u0442\u043e \u043d\u0430\u0447\u0430\u043b \u0434\u0435\u043b\u0430\u0442\u044c \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e, \u0438 \u0432\u0430\u043c \u043f\u0440\u0435\u0434\u0441\u0442\u043e\u0438\u0442 \u043f\u043e\u043d\u044f\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c \u0441\u043b\u043e\u0435 \u0438\u043b\u0438 \u0432 \u0441\u0430\u043c\u043e\u043c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u043e\u043c \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0438, \u043a\u0442\u043e \u0432\u0438\u043d\u043e\u0432\u0430\u0442 \u0438 \u043a\u043e\u0433\u043e \u0437\u0432\u0430\u0442\u044c \u043d\u0430 \u043f\u043e\u043c\u043e\u0449\u044c. \u0413\u043e\u0434\u0430\u043c\u0438 \u044f \u0438\u0441\u043a\u0430\u043b \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0438, \u0434\u0443\u043c\u0430\u044e, \u043d\u0430\u0448\u0435\u043b. \u0423 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u0431\u043e\u043b\u044c\u0448\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \"\u043d\u043e\" \u0438 \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u043d, \u043f\u043e\u043a\u0430, \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u043e\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043a\u0438.</p> <p>\u042d\u0442\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0441\u0442\u0430\u0442\u044c\u044f, \u0433\u0434\u0435 \u043c\u044b \u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 \u043e\u0442\u043f\u0435\u0447\u0430\u0442\u043a\u0438 \u041e\u0421. \u0414\u0430\u043b\u044c\u0448\u0435 \u043d\u044b\u0440\u044f\u0435\u043c \u0432 \u0441\u0430\u043c\u0443 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0441\u0438\u0441\u0442\u0435\u043c\u0443.</p> <p>\u0412 \u043f\u0440\u043e\u0448\u043b\u044b\u0445 \u0441\u0442\u0430\u0442\u044c\u044f\u0445 \u043c\u044b \u0441 \u0432\u0430\u043c\u0438 \u043e\u0441\u043e\u0437\u043d\u0430\u0432\u0430\u043b\u0438 \u0442\u0430\u043a\u0443\u044e \u0432\u0435\u0449\u044c \u043a\u0430\u043a \u043f\u043e\u0442\u043e\u043a\u0438. \u042f \u043e\u0431\u0437\u044b\u0432\u0430\u043b \u0438\u0445 \"\u043b\u0435\u0433\u043a\u0438\u0435\" \u0438 \"\u0442\u044f\u0436\u0435\u043b\u044b\u0435\" \u043f\u043e\u0442\u043e\u043a\u0438. \u0418 \"\u0442\u044f\u0436\u0435\u043b\u044b\u0435\" \u044d\u0442\u043e \u0442\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b, \u0430 \"\u043b\u0435\u0433\u043a\u0438\u0435\" \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0438 \u043d\u0435 \u043d\u0435\u0441\u0443\u0442 \u0432\u0441\u0435\u0445 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0435\u0441\u0442\u044c \u0443 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b. \u041d\u043e \u0441\u0430\u043c\u043e\u0435 \u0433\u043b\u0430\u0432\u043d\u043e\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0442\u044c \u0445\u043e\u0442\u044c \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0440\u0435\u0441\u0443\u0440\u0441, \u0431\u0443\u0434\u044c \u0442\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u0438\u043b\u0438 \u0434\u0438\u0441\u043a, \u043d\u0430\u0448\u0435\u043c\u0443 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e, \u0430 \u0442\u043e\u0447\u043d\u0435\u0435, \u0435\u0433\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0443 \u043d\u0443\u0436\u043d\u044b \u0438\u043c\u0435\u043d\u043d\u043e \u043f\u043e\u0442\u043e\u043a\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b, \u0442\u043e \u0435\u0441\u0442\u044c \"\u0442\u044f\u0436\u0435\u043b\u044b\u0435\".</p> <p>\u0418\u043c\u0435\u043d\u043d\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043c\u043e\u0441\u0442 \u043c\u0435\u0436\u0434\u0443 \u043c\u0438\u0440\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f/\u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0430 \u0438 \u043c\u0438\u0440\u043e\u043c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b.</p> <p>\u0414\u0443\u043c\u0430\u044e \u043e\u0447\u0435\u043d\u044c \u043c\u043d\u043e\u0433\u0438\u043c \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e, \u0447\u0442\u043e \u043b\u044e\u0431\u043e\u0439 \u043a\u043e\u0434 \u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0443 \u0432 \u043a\u0430\u043a\u043e\u043c-\u0442\u043e \u043f\u043e\u0442\u043e\u043a\u0435/\u0442\u0440\u0435\u0434\u0435/\u0432\u043e\u0440\u043a\u0435\u0440\u0435 (\u0447\u0430\u0441\u0442\u043e \u044d\u0442\u043e \u0441\u0438\u043d\u043e\u043d\u0438\u043c\u044b). \u0418 \u0432 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u043f\u0440\u043e \u0434\u0435\u043f\u043b\u043e\u0439 \u0438\u0434\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u044f \u0432\u0435\u0437\u0434\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u043b, \u043a\u0430\u043a \u043f\u043e\u0442\u043e\u043a\u043e\u0432\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0430 \u043c\u0430\u043f\u043f\u0438\u0442\u0441\u044f \u043d\u0430 \u043f\u043e\u0442\u043e\u043a\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b. \u0418\u043c\u0435\u043d\u043d\u043e \u044d\u0442\u043e\u0442 \u043c\u0430\u043f\u043f\u0438\u043d\u0433 \u0438 \u0441\u0442\u0430\u043b \u0437\u043e\u043d\u043e\u0439 \u043c\u043e\u0435\u0433\u043e \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f. \u041a\u043e\u0433\u0434\u0430 \u043f\u0435\u0440\u0435\u0434 \u043d\u0430\u043c\u0438 \u0441\u0442\u043e\u0438\u0442 \u0432\u043e\u043f\u0440\u043e\u0441 \u043c\u0435\u0436\u0434\u0443 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c \u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043a\u043e\u0439, \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u044d\u0442\u043e \u0432\u044b\u0431\u043e\u0440 \u043c\u0435\u0436\u0434\u0443 user space \u0438 kernel space.</p> <p></p> <p>\u0418\u0442\u0430\u043a, \u043b\u044e\u0431\u043e\u0435 \u0437\u0430\u043c\u0435\u0434\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u0434\u0430 \u044d\u0442\u043e \u0432 \u043f\u0435\u0440\u0432\u0443\u044e \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u0437\u0430\u043c\u0435\u0434\u043b\u0435\u043d\u0438\u0435 \"\u0440\u0430\u0431\u043e\u0442\u044b\". \u0420\u0430\u0431\u043e\u0442\u0430 \u0431\u044b\u0432\u0430\u0435\u0442 \u043e\u0447\u0435\u043d\u044c \u0440\u0430\u0437\u043d\u0430\u044f, \u043d\u043e \u043f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435\u0433\u0434\u0430, \u043a\u043e\u0433\u0434\u0430 \u043d\u0430\u0448\u0435\u043c\u0443 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e \u043d\u0430\u0434\u043e \u0447\u0442\u043e-\u0442\u043e \u043e\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b, \u0442\u043e \u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f syscall (\u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0439 \u0432\u044b\u0437\u043e\u0432). \u0418\u0445 \u0431\u044b\u0432\u0430\u0435\u0442 \u043c\u043d\u043e\u0433\u043e, \u0438 \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0447\u0442\u0435\u043d\u0438\u0435 \u0434\u0438\u0441\u043a\u0430 \u044d\u0442\u043e \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0439 \u0432\u044b\u0437\u043e\u0432 \"read()\", \u0430 \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \"open()\". Syscall \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0442\u043e\u043a\u043e\u043c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b. \u0414\u043b\u044f \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0438, \u043c\u043e\u0436\u043d\u043e \u0441\u043a\u0430\u0437\u0430\u0442\u044c, \u0447\u0442\u043e \u041e\u0421 \u044d\u0442\u043e \u043d\u0435\u043a\u0438\u0439 \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440 \u0441 \u043f\u0440\u0438\u0432\u044b\u0447\u043d\u044b\u043c \u0442\u0440\u0435\u0434 \u043f\u0443\u043b\u043e\u043c, \u0430 syscall \u044d\u0442\u043e \u0432\u044b\u0437\u043e\u0432\u044b \u0430\u043f\u0438. \u041d\u043e \u0447\u0442\u043e\u0431\u044b \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0447\u0435\u0441\u0442\u043d\u044b\u043c, \u0441\u0442\u043e\u0438\u0442 \u0441\u043a\u0430\u0437\u0430\u0442\u044c, \u0447\u0442\u043e \u0443 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u043f\u043e\u043c\u0438\u043c\u043e syscalls \u0435\u0441\u0442\u044c \u0438 \u0434\u0440\u0443\u0433\u043e\u0439 \"\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\" - \u044d\u0442\u043e \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0430\u043c\u044f\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430. \u0421 \u043d\u0435\u0439 \u0447\u0443\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u0435\u0435: \u043c\u044b \u043f\u0438\u0448\u0435\u043c \u0432 \u043f\u0430\u043c\u044f\u0442\u044c \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e, \u0431\u0435\u0437 \u044f\u0432\u043d\u044b\u0445 syscall. \u041d\u043e \u0435\u0441\u043b\u0438 \u043c\u044b \u043e\u0431\u0440\u0430\u0449\u0430\u0435\u043c\u0441\u044f \u043a \u0430\u0434\u0440\u0435\u0441\u0443 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438, \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u0435\u0449\u0435 \u043d\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0430 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 RAM (\u0438\u043b\u0438 \u043e\u043d\u0430 \u0431\u044b\u043b\u0430 \u0432\u044b\u0433\u0440\u0443\u0436\u0435\u043d\u0430 \u0432 swap), \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u043b\u043e\u043a \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430 \u043f\u043e\u0434 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c MMU \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0438\u0442 \u0430\u043f\u043f\u0430\u0440\u0430\u0442\u043d\u043e\u0435 \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u043d\u0438\u0435 (Page Fault). \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0433\u043d\u043e\u0432\u0435\u043d\u043d\u043e \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u0442 \u044f\u0434\u0440\u0443, \u043e\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442 \u043d\u0443\u0436\u043d\u044b\u0439 \u043a\u0443\u0441\u043e\u043a \u043f\u0430\u043c\u044f\u0442\u0438 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0435. \u0414\u043b\u044f \u043a\u043e\u0434\u0430 \u044d\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e, \u043d\u043e \u0441 \u0442\u043e\u0447\u043a\u0438 \u0437\u0440\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0435\u0440\u0436\u0435\u043a - \u044d\u0442\u043e \u0440\u0435\u0430\u043b\u044c\u043d\u0430\u044f \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u043e\u0442\u043e\u043a\u0430.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043d\u044f\u0442\u044c, \u0447\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0432\u043b\u0438\u044f\u0442\u044c \u043d\u0430 \u0442\u043e \u043d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0431\u044b\u0441\u0442\u0440\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043d\u0430\u0448\u0430 \"\u0440\u0430\u0431\u043e\u0442\u0430\", \u043d\u0430\u0434\u043e \u043f\u043e\u043d\u044f\u0442\u044c \u043a\u0430\u043a\u0430\u044f \u043e\u043d\u0430 \u0431\u044b\u0432\u0430\u0435\u0442. \u0421\u0430\u043c\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0445\u043e\u0440\u043e\u0448\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0430 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c\u0438, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u043e \u043d\u0438\u043c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043d\u044f\u0442\u044c \u043a\u0430\u043a\u0430\u044f \u0438\u043c\u0435\u043d\u043d\u043e \u0440\u0430\u0431\u043e\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u043b\u0430\u0441\u044c \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0442\u043e\u0447\u043d\u043e. </p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#on-cpu-off-cpu","title":"\u0410\u043d\u0430\u0442\u043e\u043c\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u044b: On-CPU \u0438 Off-CPU","text":"<p>\u0420\u0430\u0431\u043e\u0442\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u043d\u0430 \u043a\u0430\u043a\u043e\u043c-\u0442\u043e CPU, \u0430 \u043c\u043e\u0436\u0435\u0442 \u0438 \u0431\u0435\u0437 CPU (\u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 - \u044d\u0442\u043e \u0442\u043e\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0436\u0434\u0430\u0442\u044c \u0442\u043e\u0436\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0442\u0440\u0435\u0434, \u0430 \u0437\u043d\u0430\u0447\u0438\u0442 \u043e\u043d \u0432 \u044d\u0442\u043e\u0442 \u043c\u043e\u043c\u0435\u043d\u0442 \u0437\u0430\u043d\u044f\u0442). \u0420\u0430\u0431\u043e\u0442\u0430 \u043c\u043e\u0436\u0435\u0442 \u0436\u0434\u0430\u0442\u044c \u0447\u0435\u0433\u043e-\u0442\u043e \u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u044b. \u0414\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0438\u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0445 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0439 \u0435\u0441\u0442\u044c \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u043f\u043e\u0434 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c Wait Channel (WCHAN), \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0442\u0440\u0435\u0434 \u0441 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043f\u0440\u0438\u0447\u0438\u043d\u043e\u0439.</p> <p>WCHAN \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0442\u0440\u0435\u0434 \u0431\u044b\u043b \u0443\u0441\u044b\u043f\u043b\u0451\u043d \u044f\u0434\u0440\u043e\u043c. \u0420\u0430\u0431\u043e\u0442\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e \u0438\u0437-\u0437\u0430 \u043d\u0435\u0445\u0432\u0430\u0442\u043a\u0438 \u043a\u0430\u043a\u043e\u0433\u043e-\u0442\u043e \u0440\u0435\u0441\u0443\u0440\u0441\u0430, \u0447\u0430\u0441\u0442\u043e \u0432 \u0442\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0432\u0438\u0434\u0435\u0442\u044c PSI \u043c\u0435\u0442\u0440\u0438\u043a\u0443 (\u043e\u043f\u0438\u0441\u0430\u043d\u0430 \u0442\u0443\u0442). PSI \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u0434\u043e\u043b\u044e \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u043a\u043e\u0433\u0434\u0430 \u0437\u0430\u0434\u0430\u0447\u0438 \u0432\u044b\u043d\u0443\u0436\u0434\u0435\u043d\u043d\u043e \u0436\u0434\u0430\u043b\u0438 \u0440\u0435\u0441\u0443\u0440\u0441. WCHAN \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0441\u043b\u0430\u0431\u043e \u043f\u043e\u043a\u0440\u044b\u0442 \u043f\u0440\u043e\u0444\u0438\u043b\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0430\u043c\u0438, \u0437\u043d\u0430\u0442\u044c \u043e \u043d\u0451\u043c \u043f\u043e\u043b\u0435\u0437\u043d\u043e \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u043e, \u043d\u043e \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043d \u0440\u0435\u0434\u043a\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0432 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0445. \u0415\u0449\u0435 \u043e\u0434\u043d\u0430 \u0438\u0437 \u043f\u043b\u043e\u0441\u043a\u043e\u0441\u0442\u0435\u0439, \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0449\u0430\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 - \u044d\u0442\u043e \u0438\u0445 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435: R, D, S \u0438 \u0434\u0440. \u042d\u0442\u0438\u043c \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f.</p> <p>\u0412\u0435\u0440\u043d\u0435\u043c\u0441\u044f \u043a \u0440\u0430\u0431\u043e\u0442\u0435. \u0412 \u043f\u0435\u0440\u0444\u043e\u0440\u043c\u0430\u043d\u0441 \u0430\u043d\u0430\u043b\u0438\u0437\u0435 (\u043f\u043e \u0411\u0440\u0435\u043d\u0434\u0430\u043d\u0443 \u0413\u0440\u0435\u0433\u0433\u0443) \u0435\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u043e \u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u0434\u0432\u0435 \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438: On-CPU (\u043d\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0435) \u0438 Off-CPU (\u0432\u043d\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430).</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#1-on-cpu","title":"1. On-CPU (\u0422\u0440\u0435\u0434 \u0438\u0441\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f)","text":"<p>\u042d\u0442\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435, \u043a\u043e\u0433\u0434\u0430 \u0442\u0440\u0435\u0434 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u044f\u0434\u0440\u043e CPU \u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441. \u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0442\u043e\u043a\u0430 - R (Running).</p> <p>\u0417\u0434\u0435\u0441\u044c \u0435\u0441\u0442\u044c \u0442\u0440\u0438 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u044f:</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#11-system-mode","title":"1.1. System Mode (\u0420\u0430\u0431\u043e\u0442\u0430 \u0432 \u044f\u0434\u0440\u0435)","text":"<p>\u041f\u043e\u0442\u043e\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043a\u043e\u0434 \u044f\u0434\u0440\u0430 \u043f\u043e \u0441\u0432\u043e\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 (\u0447\u0435\u0440\u0435\u0437 syscall).</p> <ul> <li>\u041f\u0440\u0438\u043c\u0435\u0440\u044b:<code>getpid()</code>, <code>fstat()</code>, <code>open()</code>, <code>read()</code>.</li> <li>\u0421\u0443\u0442\u044c: \u041f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u0442 \u0432 kernel-space. \u0427\u0430\u0441\u0442\u044c syscalls \u0432\u0440\u043e\u0434\u0435 <code>getpid()</code> \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043c\u0433\u043d\u043e\u0432\u0435\u043d\u043d\u043e, \u043d\u043e \u043c\u043d\u043e\u0433\u0438\u0435 (<code>open()</code>, <code>read()</code>, <code>connect()</code>) \u043c\u043e\u0433\u0443\u0442 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0440\u0435\u0441\u0443\u0440\u0441\u0435 \u0438 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0440\u0435\u0434 \u0432 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435.</li> <li>\u041c\u0435\u0442\u0440\u0438\u043a\u0438: \u0420\u0430\u0441\u0442\u0435\u0442 <code>system time</code>. \u041f\u0440\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u043f\u043e\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f WCHAN \u0438 PSI IO.</li> </ul>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#12-pure-user-space","title":"1.2. Pure User-space (\u041f\u043e\u043b\u0435\u0437\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430)","text":"<p>\u041a\u043b\u0430\u0441\u0441\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u0434\u0430 \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041e\u043d\u043e \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0431\u0435\u0437 kernel \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0434\u0435\u043b\u0430\u044f \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043d\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0435.</p> <ul> <li>\u041f\u0440\u0438\u043c\u0435\u0440\u044b:\u00a0\u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430, \u043f\u0430\u0440\u0441\u0438\u043d\u0433, \u0440\u0430\u0431\u043e\u0442\u0430 GC.</li> <li>\u0421\u0443\u0442\u044c: \u041f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0432 user-space.</li> <li>\u041c\u0435\u0442\u0440\u0438\u043a\u0438: \u0420\u0430\u0441\u0442\u0435\u0442 <code>user time</code>. \u041d\u0435\u0442 \u044f\u0434\u0440\u0430, \u043d\u0435\u0442 syscall, \u043d\u0435\u0442 WCHAN, \u043d\u0435\u0442 PSI.</li> </ul>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#13-user-space-busy-wait","title":"1.3. User-space Busy Wait (\u041b\u043e\u0436\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430)","text":"<p>\u0421\u0438\u0442\u0443\u0430\u0446\u0438\u044f, \u043a\u043e\u0433\u0434\u0430 \u043a\u043e\u0434 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438 \u0436\u0434\u0435\u0442 \u0438\u043b\u0438 \u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u043e \u0437\u0430\u0446\u0438\u043a\u043b\u0438\u043b\u0441\u044f, \u043d\u043e \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0436\u0436\u0435\u0442 CPU.</p> <ul> <li>\u041f\u0440\u0438\u043c\u0435\u0440\u044b: \u0441\u043f\u0438\u043d\u043b\u043e\u043a \u0438\u043b\u0438 while(!flag) {}</li> <li>\u0421\u0443\u0442\u044c: \u0422\u0440\u0435\u0434 \u043a\u0440\u0443\u0442\u0438\u0442\u0441\u044f \u0432 \u0446\u0438\u043a\u043b\u0435. \u0421 \u0442\u043e\u0447\u043a\u0438 \u0437\u0440\u0435\u043d\u0438\u044f \u041e\u0421 \u043e\u043d \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 (On-CPU). \u0421 \u0442\u043e\u0447\u043a\u0438 \u0437\u0440\u0435\u043d\u0438\u044f \u043b\u043e\u0433\u0438\u043a\u0438 \u043a\u043e\u0434\u0430 - \u0437\u0430\u0432\u0438\u0441.</li> <li>\u041c\u0435\u0442\u0440\u0438\u043a\u0438: \u0412 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0445 \u044d\u0442\u043e \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043a\u0430\u043a <code>user time</code> \u0438 \u0447\u0430\u0441\u0442\u043e \u0432\u0432\u043e\u0434\u0438\u0442 \u0432 \u0437\u0430\u0431\u043b\u0443\u0436\u0434\u0435\u043d\u0438\u0435.</li> </ul> <p>\u041c\u044b \u0440\u0430\u0437\u043b\u0438\u0447\u0430\u0435\u043c, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u043f\u043e\u0442\u043e\u043a (R/S/D - \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0442\u043e\u043a\u0430), \u043a\u0430\u043a\u043e\u0439 \u0442\u0438\u043f \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f CPU \u0438 \u0435\u0441\u0442\u044c \u043b\u0438 \u0443 \u043d\u0430\u0441 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u043a\u043e\u0433\u043e-\u0442\u043e \u0440\u0435\u0441\u0443\u0440\u0441\u0430 (PSI). \u042d\u0442\u043e \u0442\u0440\u0438 \u0440\u0430\u0437\u043d\u044b\u0445 \u0441\u043b\u043e\u044f \u043d\u0430\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u044f, \u0438\u0445 \u043d\u0435\u043b\u044c\u0437\u044f \u043f\u0443\u0442\u0430\u0442\u044c - \u043c\u044b \u0438\u0445 \u0441\u043a\u043b\u0435\u0438\u0432\u0430\u0435\u043c \u0432 \u043d\u0430\u0431\u043e\u0440 \u0441\u0438\u0433\u043d\u0430\u043b\u043e\u0432, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043d\u044f\u0442\u044c \u043f\u0440\u0438\u0440\u043e\u0434\u0443 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0438.</p> <p>On-CPU \u0432\u0440\u0435\u043c\u044f \u0434\u0435\u043b\u0438\u0442\u0441\u044f \u043d\u0430 \u0437\u043d\u0430\u043a\u043e\u043c\u044b\u0435 8 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432 \u0440\u0430\u0431\u043e\u0442\u044b. \u0412\u043e\u0442 \u0441\u0432\u043e\u0434\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0447\u043a\u0430 \u043f\u043e \u043d\u0438\u043c \u0441 \u043c\u0430\u043f\u043f\u0438\u043d\u0433\u043e\u043c \u043d\u0430 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0442\u0440\u0435\u0434\u043e\u0432 \u0438 PSI:</p> CPU type Thread State \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u044b\u0439 PSI \u0418\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0430\u0446\u0438\u044f user R (Runnable) <code>psi.cpu.some</code>* \u041a\u043e\u0434 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f (\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439 \u0438\u043b\u0438 Busy Wait) system R (Runnable) - \u0420\u0430\u0431\u043e\u0442\u0430 \u044f\u0434\u0440\u0430 (syscalls) iowait D (Uninterruptible) <code>psi.io.some</code> / <code>full</code> CPU \u0441\u0432\u043e\u0431\u043e\u0434\u0435\u043d, \u043f\u043e\u0442\u043e\u043a \u0436\u0434\u0435\u0442 I/O irq / softirq - - \u041f\u0440\u0435\u0440\u044b\u0432\u0430\u043d\u0438\u044f (\u0441\u0435\u0442\u044c, \u0442\u0430\u0439\u043c\u0435\u0440) idle S (Interruptible) - CPU \u0441\u0432\u043e\u0431\u043e\u0434\u0435\u043d, \u043f\u043e\u0442\u043e\u043a \u0441\u043f\u0438\u0442 steal R / - <code>psi.cpu.some</code> / <code>full</code> \u0413\u0438\u043f\u0435\u0440\u0432\u0438\u0437\u043e\u0440 \u043e\u0442\u043e\u0431\u0440\u0430\u043b CPU \u0443 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u043a\u0438 nice S / R <code>psi.cpu.full</code> \u041f\u0440\u043e\u0446\u0435\u0441\u0441\u044b \u0441 \u043d\u0438\u0437\u043a\u0438\u043c \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043e\u043c <p>\u0421\u0430\u043c \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0438\u0439 \u043f\u043e\u0442\u043e\u043a \u043d\u0435 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 PSI \u0434\u043b\u044f \u0441\u0435\u0431\u044f, \u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445.</p> <p>\u0421\u043e\u0431\u0440\u0430\u043b \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u0439 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u043d\u0438\u043a \u0441 \u043b\u0438\u043d\u0443\u043a\u0441\u043e\u0432\u043e\u0433\u043e (\u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0435 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0430\u043c \u0432\u044b\u0448\u0435):</p> <ul> <li>R (running) - \u043f\u043e\u0442\u043e\u043a \u043d\u0430 CPU \u0438\u043b\u0438 \u0436\u0434\u0451\u0442 CPU \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u0438.</li> <li>S (sleep) - \u043f\u043e\u0442\u043e\u043a \u0441\u043f\u0438\u0442 (\u0441\u0435\u0442\u044c, \u0442\u0430\u0439\u043c\u0435\u0440), \u0435\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0437\u0431\u0443\u0434\u0438\u0442\u044c/\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c.</li> <li>D (uninterruptible sleep) - \u043f\u043e\u0442\u043e\u043a \u0441\u043f\u0438\u0442 \u0432 \u044f\u0434\u0440\u0435, \u0436\u0434\u0451\u0442 \u0436\u0435\u043b\u0435\u0437\u043e (\u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c \u0434\u0438\u0441\u043a).</li> <li>%iowait - CPU \u043f\u0440\u043e\u0441\u0442\u0430\u0438\u0432\u0430\u0435\u0442, \u043e\u0436\u0438\u0434\u0430\u044f I/O, \u043f\u043e\u043a\u0430 \u043f\u043e\u0442\u043e\u043a\u0438 \u0432 \u0441\u0442\u0430\u0442\u0443\u0441\u0435 D.</li> <li>PSI.XYZ.some - \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u0438\u043d \u0442\u0440\u0435\u0434 \u0441\u0442\u0440\u0430\u0434\u0430\u043b, \u043e\u0436\u0438\u0434\u0430\u044f \u0440\u0435\u0441\u0443\u0440\u0441 (CPU/IO/Mem). \u041f\u0440\u044f\u043c\u043e\u0439 \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0446\u0438\u0438 \u0437\u0430 \u0440\u0435\u0441\u0443\u0440\u0441\u044b.</li> <li>PSI.XYZ.full - \u0432\u0441\u0435 \u0442\u0440\u0435\u0434\u044b \u043e\u0436\u0438\u0434\u0430\u043b\u0438 \u0440\u0435\u0441\u0443\u0440\u0441 (CPU/IO/Mem). </li> </ul> <p>\u041d\u0438\u0436\u0435 \u044f \u0445\u043e\u0447\u0443 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c, \u043d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u043e\u043e\u0431\u0449\u0435 \u044d\u0442\u0430 \u0440\u0430\u0431\u043e\u0442\u0430 \u043f\u043e\u043a\u0440\u044b\u0442\u0430 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c\u0438 \u0438 \u043d\u0430 \u043a\u0430\u043a\u043e\u043c \u043e\u043d\u0438 \u0443\u0440\u043e\u0432\u043d\u0435. \u0412\u043e\u0442 \u043a\u043b\u0430\u0441\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0432\u0441\u0435\u043c\u0438 \u043b\u044e\u0431\u0438\u043c\u043e\u0433\u043e <code>node_exporter</code>, \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u043d\u043e\u0434\u044b/\u0445\u043e\u0441\u0442\u0430/\u0441\u0435\u0440\u0432\u0435\u0440\u0430:</p> CPU type user <code>node_cpu_seconds_total{mode=\"user\"}</code> <code>node_pressure_cpu_waiting_seconds_total</code> <code>node_procs_running</code> system <code>node_cpu_seconds_total{mode=\"system\"}</code> - <code>node_procs_running</code> iowait <code>node_cpu_seconds_total{mode=\"iowait\"}</code> <code>node_pressure_io_waiting_seconds_total</code> <code>node_procs_blocked</code> irq <code>node_cpu_seconds_total{mode=\"irq\"}</code> - <code>node_intr_total</code> softirq <code>node_cpu_seconds_total{mode=\"softirq\"}</code> - - idle <code>node_cpu_seconds_total{mode=\"idle\"}</code> - - steal <code>node_cpu_seconds_total{mode=\"steal\"}</code> <code>node_pressure_cpu_waiting_seconds_total</code> - nice <code>node_cpu_seconds_total{mode=\"nice\"}</code> <code>node_pressure_cpu_waiting_seconds_total</code> - <p>\u041c\u0435\u0442\u0440\u0438\u043a\u0438 <code>cpu_seconds</code> \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435 (\u043a\u0442\u043e \u0441\u0435\u0439\u0447\u0430\u0441 \u0432\u043b\u0430\u0434\u0435\u0435\u0442 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u043c), \u0430 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 PSI \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u043d\u0435\u0445\u0432\u0430\u0442\u043a\u0443 (\u043a\u0442\u043e \u0441\u0442\u043e\u0438\u0442 \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u0438).</p> <ul> <li>User/Nice: \u0421\u0430\u043c\u0438 \u043f\u043e \u0441\u0435\u0431\u0435 \u043d\u0435 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u044e\u0442 PSI \u0434\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u043f\u043e\u0442\u043e\u043a\u0430, \u043d\u043e \u0438\u0445 \u0430\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u0435\u0442 <code>cpu_waiting</code> \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432, \u043e\u0436\u0438\u0434\u0430\u044e\u0449\u0438\u0445 \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u0438.</li> <li>IO:<code>waiting</code> (Some) - \u0434\u0438\u0441\u043a \u0442\u043e\u0440\u043c\u043e\u0437\u0438\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441, \u043d\u043e \u0434\u0440\u0443\u0433\u0438\u0435 \u043c\u043e\u0433\u0443\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c. <code>stalled</code> (Full) - \u0434\u0438\u0441\u043a \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043b \u0440\u0430\u0431\u043e\u0442\u0443 \u0441\u0438\u0441\u0442\u0435\u043c\u044b (\u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e!).</li> </ul> <p>\u0410 \u0432\u043e\u0442 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0438\u0437 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432, \u0442\u043e \u0447\u0442\u043e \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 <code>cAdvisor</code>:</p> CPU type container metrics container_tasks_state PSI metrics user <code>container_cpu_user_seconds_total</code> <code>running</code> <code>container_pressure_cpu_waiting_seconds_total</code> system <code>container_cpu_system_seconds_total</code> <code>running</code> <code>container_pressure_cpu_waiting_seconds_total</code> iowait - <code>iowait</code> <code>container_pressure_io_waiting_seconds_total</code> throttled <code>container_cpu_cfs_throttled_seconds_total</code> <code>running</code>* <code>container_pressure_cpu_stalled_seconds_total</code> steal - - <code>container_pressure_cpu_waiting_seconds_total</code> irq / soft - - - idle - <code>sleeping</code> - <p>Throttled \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b \u0444\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 <code>running</code> (\u0433\u043e\u0442\u043e\u0432\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c), \u043d\u043e kernel \u043d\u0435 \u0434\u0430\u0451\u0442 \u0438\u043c CPU \u0438\u0437-\u0437\u0430 \u0438\u0441\u0447\u0435\u0440\u043f\u0430\u043d\u0438\u044f \u043a\u0432\u043e\u0442\u044b (CFS bandwidth control). \u042d\u0442\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043e\u043d\u0438 \u043e\u0436\u0438\u0434\u0430\u044e\u0442 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043e\u0442 cgroup \u043d\u0430\u0445\u043e\u0434\u044f\u0441\u044c \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 R. \u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0438\u0445 \u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043a\u0430\u043a Off-CPU.</p> <p>\u041c\u0435\u0442\u0440\u0438\u043a, \u043d\u0430 \u043c\u043e\u0439 \u0432\u0437\u0433\u043b\u044f\u0434, \u043c\u0430\u043b\u043e\u0432\u0430\u0442\u043e (\u043d\u043e \u043c\u043d\u0435 \u0440\u0435\u0434\u043a\u043e \u043a\u043e\u0433\u0434\u0430 \u0445\u0432\u0430\u0442\u0430\u0435\u0442). \u041c\u0435\u0442\u0440\u0438\u043a\u0438 PSI - \u0432\u043e\u0441\u0445\u0438\u0442\u0438\u0442\u0435\u043b\u044c\u043d\u044b, \u0442\u0438\u043f\u044b \u0440\u0430\u0431\u043e\u0442\u044b CPU \u0447\u0430\u0441\u0442\u043e \u043d\u0435\u0434\u043e\u043e\u0446\u0435\u043d\u0438\u0432\u0430\u044e\u0442\u0441\u044f, \u0430 \u043e\u043d\u0438 \u043f\u043e\u043b\u0435\u0437\u043d\u044b. \u0421\u043e\u0432\u0441\u0435\u043c \u043c\u0430\u043b\u043e \u043a\u0442\u043e \u0441\u043c\u043e\u0442\u0440\u0438\u0442 \u043d\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b \u0438 \u0438\u0445 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f (<code>running</code>/<code>blocked</code>), \u043f\u043e\u043b\u044c\u0437\u044b \u0432 \u043d\u0438\u0445 \u043d\u0435\u043c\u043d\u043e\u0433\u043e, \u043d\u043e \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0441\u0438\u043b\u044c\u043d\u043e \u043f\u043e\u043c\u043e\u0447\u044c \u0432 \u0441\u0435\u043f\u0430\u0440\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c, \u0435\u0441\u043b\u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e.</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#2-off-cpu","title":"2. Off-CPU","text":"<p>\u0417\u0434\u0435\u0441\u044c \u0442\u0440\u0435\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f, CPU \u0441\u0432\u043e\u0431\u043e\u0434\u0435\u043d.</p> <p>\u042f \u0441\u043e\u0431\u0440\u0430\u043b \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e \u0434\u043b\u044f Off-CPU \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0439 \u0438\u0441\u0445\u043e\u0434\u044f \u0438\u0437 \u0438\u0445 \u0441\u0432\u043e\u0439\u0441\u0442\u0432 \u0438 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a \u043e\u043d\u0438 \u0432\u044b\u0433\u043b\u044f\u0434\u044f\u0442 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435.</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#21-syscall-based","title":"2.1. Syscall-based (\u042f\u0432\u043d\u043e\u0435 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435)","text":"<p>\u041c\u044b \u0441\u0430\u043c\u0438 \u043f\u043e\u043f\u0440\u043e\u0441\u0438\u043b\u0438 \u044f\u0434\u0440\u043e \u043f\u043e\u0434\u043e\u0436\u0434\u0430\u0442\u044c (\u0441\u0435\u0442\u044c, \u0442\u0430\u0439\u043c\u0435\u0440, \u043b\u043e\u043a).</p> <ul> <li>\u041f\u0440\u0438\u043c\u0435\u0440\u044b:<code>futex()</code>, <code>epoll_wait()</code>.</li> <li>\u0421\u0443\u0442\u044c: \u042f\u0434\u0440\u043e \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0438\u0442 \u0442\u0440\u0435\u0434 \u0432 sleep(S \u0438\u043b\u0438 D), \u043f\u043e\u043c\u0435\u0449\u0430\u0435\u0442 \u0432 wait queue.</li> <li>\u041c\u0435\u0442\u0440\u0438\u043a\u0438: PSI \u0431\u044b\u0432\u0430\u0435\u0442, \u0435\u0441\u043b\u0438 \u0436\u0434\u0451\u043c \u043f\u0435\u0440\u0435\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0439 \u0440\u0435\u0441\u0443\u0440\u0441. WCHAN \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u0435\u0441\u0442\u044c \u0432\u0441\u0435\u0433\u0434\u0430 (\u044f\u0434\u0440\u043e \u0443\u0441\u044b\u043f\u0438\u043b\u043e \u0442\u0440\u0435\u0434 \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0435), \u043d\u043e \u0432 \u0442\u0438\u043f\u043e\u0432\u044b\u0445 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0445 (node_exporter/cAdvisor) \u0435\u0433\u043e \u043d\u0435\u0442 \u2014 \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0441\u043d\u0430 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430\u0439\u0434\u044f \u043d\u0430 \u0441\u0430\u043c\u0443 \u043d\u043e\u0434\u0443.</li> </ul>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#22-page-faults","title":"2.2. Page Faults (\u041d\u0435\u044f\u0432\u043d\u043e\u0435 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435)","text":"<p>\u041c\u044b \u043f\u0440\u043e\u0441\u0442\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u043b\u0438\u0441\u044c \u043a \u043f\u0430\u043c\u044f\u0442\u0438.</p> <ul> <li>\u041f\u0440\u0438\u043c\u0435\u0440\u044b: \u041f\u043e \u0441\u0443\u0442\u0438 page faults \u043d\u0435\u0438\u0437\u0431\u0435\u0436\u043d\u044b \u043f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 \u043f\u0430\u043c\u044f\u0442\u044c\u044e, \u043e\u043d \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0432\u0441\u0435\u0433\u0434\u0430 \u043a\u043e\u0433\u0434\u0430 \u043c\u044b \u043e\u0431\u0440\u0430\u0449\u0430\u0435\u043c\u0441\u044f \u043a \u0430\u0434\u0440\u0435\u0441\u0430\u043c, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0435\u0442 \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u0432 RAM.</li> <li>\u0421\u0443\u0442\u044c: MMU \u0442\u0440\u0438\u0433\u0433\u0435\u0440\u0438\u0442 \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u043d\u0438\u0435, \u044f\u0434\u0440\u043e \u043e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u043d\u0430\u0441 \u0438 \u043b\u0435\u0437\u0435\u0442 \u043d\u0430 \u0434\u0438\u0441\u043a/swap.</li> <li>\u041c\u0435\u0442\u0440\u0438\u043a\u0438: WCHAN (<code>do_page_fault</code>) \u0438 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c PSI Memory.</li> </ul> <p>\u0422\u0430\u0431\u043b\u0438\u0447\u043a\u0430 \u043d\u0438\u0436\u0435 \u0434\u043b\u044f \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0442\u043e\u0433\u043e \u043a\u0430\u043a\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e, \u0434\u0430\u0436\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0445 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0439 \u043c\u044b \u043d\u0435 \u0432\u0438\u0434\u0438\u043c \u0432 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0445, \u043d\u0435 \u0433\u043e\u0432\u043e\u0440\u044f \u0443\u0436\u0435 \u043f\u0440\u043e \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u0441\u0430\u043c\u043e\u0433\u043e \u0441\u043e\u0444\u0442\u0430.</p> \u0422\u0438\u043f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u041a\u0430\u043a \u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0442\u044c (WCHAN) Node Exporter (PSI) CAdvisor (PSI) \u0422\u0430\u0439\u043c\u0435\u0440 / \u0441\u043e\u043d <code>nanosleep</code>, <code>hrtimer_sleep</code>, <code>pause</code> - - \u041b\u043e\u043a\u0438 (app) <code>futex_wait_queue_me</code>, <code>pthread_cond_wait</code> - - \u0421\u043e\u0431\u044b\u0442\u0438\u044f / \u0441\u0435\u0442\u044c <code>ep_poll</code>, <code>poll_schedule_timeout</code> - - \u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 IO <code>io_schedule</code> <code>io_waiting</code> / <code>io_stalled</code> <code>io_waiting</code> / <code>io_stalled</code> Page Fault <code>do_page_fault</code>, <code>swap_readpage</code> <code>memory_stalled</code> <code>memory_stalled</code> <p>\u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e\u0439 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0438\u043b\u0438 \u043f\u0440\u043e\u0441\u0442\u043e\u0433\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u044b \u0441\u0440\u0430\u0437\u0443 \u043f\u043e\u043a\u0430\u0437\u0430\u043b, \u0447\u0442\u043e \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0438 \u0432 \u0440\u0430\u0431\u043e\u0442\u0435 \u0441\u043e\u0444\u0442\u0430. \u041d\u0438\u0436\u0435 \u044f \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u044e \u0432\u044b\u0436\u0430\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0438\u0437 \u0442\u043e\u0433\u043e \u043d\u0430\u0431\u043e\u0440\u0430 \u043c\u0435\u0442\u0440\u0438\u043a, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0447\u0430\u0449\u0435 \u0432\u0441\u0435\u0433\u043e \u0435\u0441\u0442\u044c.</p> <p>\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u0440\u043e \u0441\u0430\u043c \u043f\u043e\u0434\u0445\u043e\u0434, \u044f \u0435\u0433\u043e \u043d\u0430\u0437\u044b\u0432\u0430\u044e System Footprint. \u041e\u043d \u043e\u0441\u043d\u043e\u0432\u0430\u043d \u043d\u0430 \u0434\u043e\u043f\u0443\u0449\u0435\u043d\u0438\u0438, \u0447\u0442\u043e \u0432 90% \u043a\u0435\u0439\u0441\u043e\u0432 \u0443 \u043d\u0430\u0441 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f \u043b\u0438\u0431\u043e \u043a \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c <code>node_exporter</code>, \u043b\u0438\u0431\u043e \u043a \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 <code>cAdvisor</code> (\u0430 \u043c\u043e\u0436\u0435\u0442 \u0438 \u043a \u0442\u0435\u043c, \u0438 \u043a \u0434\u0440\u0443\u0433\u0438\u043c). \u041c\u0435\u0442\u0440\u0438\u043a\u0438 \u0434\u0430\u044e\u0442 \u043d\u0430\u043c \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u041e\u0421. \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0436\u0435 \u043e\u0431\u044b\u0447\u043d\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u043e \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c\u0438 \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u043e \u0438 \u043d\u0435\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043e\u043d\u043e \u0447\u0430\u0441\u0442\u043e \u043e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043d\u0430\u0441 \u0447\u0435\u0440\u043d\u044b\u043c \u044f\u0449\u0438\u043a\u043e\u043c (\u043d\u0443 \u0438\u043b\u0438 \u0441\u0435\u0440\u044b\u043c).</p> <p>\u041c\u0435\u0442\u0430\u0444\u043e\u0440\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u043f\u043e\u0434\u0445\u043e\u0434\u0430: \u043c\u044b \u0443\u0437\u043d\u0430\u0435\u043c \u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 Black Box \u0437\u0430 \u0441\u0447\u0435\u0442 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u043e\u043d \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d \u0432\u043d\u0443\u0442\u0440\u0438 Glass Box \u0438 \u043c\u044b \u0432\u0438\u0434\u0438\u043c, \u043a\u0430\u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439. \u041e\u0442\u0441\u044e\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043c\u043d\u043e\u0433\u043e \u0432\u044b\u0432\u043e\u0434\u043e\u0432 (\u0434\u0430\u0436\u0435 \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0445) \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043e\u0444\u0442\u0430.</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#_1","title":"\u0428\u043a\u0430\u043b\u0430 \u00ab\u0434\u043e\u0440\u043e\u0433\u043e\u0432\u0438\u0437\u043d\u044b\u00bb \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 (\u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043a \u043c\u0435\u0442\u043e\u0434\u0443)","text":"<p>\u0411\u0435\u0440\u0451\u043c \u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u0438\u043a\u043b\u0430\u0434\u043d\u0443\u044e \u0448\u043a\u0430\u043b\u0443, \u0447\u0442\u043e\u0431\u044b \u043a\u0430\u043b\u0438\u0431\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f:</p> <ul> <li>\u0414\u0435\u0448\u0435\u0432\u043e - \u043d\u0430\u043d\u043e\u0441\u0435\u043a\u0443\u043d\u0434\u044b: \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u044b/\u043a\u044d\u0448 L1/L2.</li> <li>\u0423\u043c\u0435\u0440\u0435\u043d\u043d\u043e - \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u043a\u0443\u043d\u0434\u044b: syscalls, context switch, \u0434\u043e\u0441\u0442\u0443\u043f \u043a RAM, NVMe I/O (~30-40 \u00b5s). \u041f\u0440\u0438 \u043c\u0438\u043b\u043b\u0438\u043e\u043d\u0430\u0445 \u0432 \u0441\u0435\u043a\u0443\u043d\u0434\u0443 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0437\u0430\u043c\u0435\u0442\u043d\u043e.</li> <li>\u0414\u043e\u0440\u043e\u0433\u043e - \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u044b: \u0441\u0435\u0442\u044c \u0432\u043d\u0443\u0442\u0440\u0438 DC, \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0434\u0438\u0441\u043a\u0430, HDD sequential.</li> <li>\u041e\u0447\u0435\u043d\u044c \u0434\u043e\u0440\u043e\u0433\u043e - \u0434\u0435\u0441\u044f\u0442\u043a\u0438 \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434 \u0438 \u0432\u044b\u0448\u0435: HDD random, swap/major faults, RTO/\u043c\u043d\u043e\u0433\u043e\u043a\u0440\u0430\u0442\u043d\u044b\u0435 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0442\u044b, \u0434\u043b\u0438\u043d\u043d\u044b\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0434\u0438\u0441\u043a\u0430.</li> </ul> <p>\u0414\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u044b \u0437\u0430\u0432\u0438\u0441\u044f\u0442 \u043e\u0442 \u0436\u0435\u043b\u0435\u0437\u0430 \u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u044d\u0442\u043e \u043e\u0440\u0438\u0435\u043d\u0442\u0438\u0440 \u0431\u0435\u0437 \u0436\u0451\u0441\u0442\u043a\u0438\u0445 \u043f\u043e\u0440\u043e\u0433\u043e\u0432.</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#system-footprint-method","title":"System Footprint Method","text":"<p>System Footprint Method - \u044d\u0442\u043e \u043c\u0435\u0442\u043e\u0434\u0438\u043a\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u043e\u0433\u043e \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438, \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u043d\u0430 USE-\u043c\u0435\u0442\u043e\u0434\u0435 Brendan Gregg \u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u044f\u044e\u0449\u0430\u044f \u0435\u0433\u043e \u0432\u0437\u0433\u043b\u044f\u0434\u043e\u043c \u0447\u0435\u0440\u0435\u0437 \u043f\u0440\u0438\u0437\u043c\u0443 \u00ab\u0441\u043b\u0435\u0434\u043e\u0432\u00bb \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u043c \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c. \u0418\u0434\u0435\u044f forensic-\u0430\u043d\u0430\u043b\u0438\u0437\u0430: \u0432\u044b\u044f\u0441\u043d\u0438\u0442\u044c, \u043a\u0443\u0434\u0430 \u0443\u0445\u043e\u0434\u0438\u0442 \u0432\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u044b CPU \u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439, \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0438\u0432\u0430\u044f \u043f\u0440\u0438\u0437\u043d\u0430\u043a\u0438 (\u043e\u0442\u043f\u0435\u0447\u0430\u0442\u043a\u0438) \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u043b\u0438 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0443\u0440\u043e\u0432\u043d\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b. \u041c\u044b \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432, \u0440\u0430\u0437\u0431\u0438\u0432\u043a\u0443 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 CPU, \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 Pressure Stall Information (PSI) \u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043f\u043e\u0434\u0441\u0438\u0441\u0442\u0435\u043c\u044b (CPU, \u0434\u0438\u0441\u043a, \u0441\u0435\u0442\u044c, \u043f\u0430\u043c\u044f\u0442\u044c), \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0437\u043a\u043e\u0435 \u043c\u0435\u0441\u0442\u043e. \u0415\u0441\u043b\u0438 \u0432 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043f\u043e\u0434\u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0435\u0441\u0442\u044c \u0430\u043d\u043e\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 - \u0437\u043d\u0430\u0447\u0438\u0442, \u0442\u0430\u043c \u00ab\u0441\u043b\u0435\u0434\u044b\u00bb \u0437\u0430\u0434\u0435\u0440\u0436\u0435\u043a, \u0438 \u043c\u044b \u0438\u0441\u0441\u043b\u0435\u0434\u0443\u0435\u043c \u044d\u0442\u0443 \u043e\u0431\u043b\u0430\u0441\u0442\u044c. \u0415\u0441\u043b\u0438 \u0436\u0435 \u043d\u0430 \u0433\u0440\u0430\u0444\u0438\u043a\u0430\u0445 \u043d\u0435\u0442 \u043f\u0440\u0438\u0437\u043d\u0430\u043a\u043e\u0432 \u043f\u0440\u043e\u0431\u043b\u0435\u043c (\u043d\u0435\u0442 \u043e\u0442\u043f\u0435\u0447\u0430\u0442\u043a\u043e\u0432), \u0442\u043e \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u043c, \u0447\u0442\u043e \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043f\u0440\u043e\u0441\u0442\u0430\u0438\u0432\u0430\u0435\u0442 \u043b\u0438\u0431\u043e \u0436\u0434\u0435\u0442 \u0432\u043d\u0435\u0448\u043d\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b (\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438, \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u0432\u044b\u0437\u043e\u0432\u044b), \u0442.\u0435. \u043f\u0440\u0438\u0447\u0438\u043d\u0430 \u0432\u043d\u0435 CPU/\u0434\u0438\u0441\u043a\u0430/\u043f\u0430\u043c\u044f\u0442\u0438.</p> <p>\u0414\u043b\u044f \u044d\u0442\u043e\u0439 \u043c\u0435\u0442\u043e\u0434\u0438\u043a\u0438 \u044f \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u043b \u0434\u0430\u0448\u0431\u043e\u0440\u0434 \u0432 Grafana, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u0432\u0441\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043d\u0438\u0436\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438. \u041d\u043e \u0441\u0430\u043c \u043c\u0435\u0442\u043e\u0434 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u0435\u043d \u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c \u0441 \u043b\u044e\u0431\u044b\u043c\u0438 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u0430\u043c\u0438 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430.</p> <p>\u041d\u0438\u0436\u0435 - \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0447\u0442\u0435\u043d\u0438\u044e \u043c\u0435\u0442\u0440\u0438\u043a.</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#0-process-states-running-vs-blocked","title":"0. Process States: Running vs Blocked","text":"<p>\u0412\u043d\u0430\u0447\u0430\u043b\u0435, \u0432\u0434\u043e\u0445\u043d\u043e\u0432\u043b\u044f\u044f\u0441\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u043e\u0439 \u0432\u044b\u0448\u0435, \u0433\u0434\u0435 \u0441\u0432\u0435\u0440\u0445\u0443 \u0443 \u043d\u0430\u0441 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u0430 \u043f\u043e\u0442\u043e\u043a\u0438 \u0438\u0434\u0443\u0442 \u0432\u043d\u0438\u0437 \u0432 kernel, \u043e\u0447\u0435\u043d\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u043e \u0433\u043b\u044f\u043d\u0443\u0442\u044c \u043d\u0430 \u0442\u0440\u0435\u0434\u044b: \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0435\u0441\u0442\u044c \u043f\u043e \u0434\u0432\u0443\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\u043c - Running (R) \u0438 Blocked (D). \u0418\u0437\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u0439\u043c\u0438\u0442\u0435 \u043f\u043e\u0440\u044f\u0434\u043e\u043a, \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0438\u043c\u0435\u0435\u0442\u0435 \u0434\u0435\u043b\u043e: \u044d\u0442\u043e \u043d\u0430\u0448\u0438 \u0440\u0430\u0431\u043e\u0442\u044f\u0433\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0442\u044c \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041c\u0435\u0442\u0440\u0438\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e \u0434\u0432\u0443\u0445 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\u0445:</p> <ul> <li>Running (R) - \u0435\u0441\u043b\u0438 \u0447\u0438\u0441\u043b\u043e \u0442\u0440\u0435\u0434\u043e\u0432 \u041e\u0421 \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 R \u0437\u0430\u043c\u0435\u0442\u043d\u043e \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u044f\u0434\u0435\u0440 CPU, \u0437\u043d\u0430\u0447\u0438\u0442 \u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442\u0441\u044f \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u043d\u0430 CPU (\u0442\u0440\u0435\u0434\u044b \u0436\u0434\u0443\u0442, \u043a\u043e\u0433\u0434\u0430 \u043e\u0441\u0432\u043e\u0431\u043e\u0434\u0438\u0442\u0441\u044f \u044f\u0434\u0440\u043e). \u042d\u0442\u043e \u043f\u0440\u0438\u0437\u043d\u0430\u043a \u043f\u0435\u0440\u0435\u0433\u0440\u0443\u0437\u043a\u0438 CPU: \u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0437\u0430\u0434\u0430\u0447 \u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0439 \u043c\u043e\u0449\u043d\u043e\u0441\u0442\u0438. \u0414\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u0440\u0430\u043d\u0442\u0430\u0439\u043c \u043f\u0440\u044f\u0447\u0435\u0442 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u0441\u0435\u0431\u044f (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u0435\u0431-\u043f\u0443\u043b \u0432 JVM), \u043f\u043e R-state \u0432\u0438\u0434\u043d\u043e, \u0447\u0442\u043e \u0442\u044f\u0436\u0451\u043b\u044b\u0435 \u043f\u043e\u0442\u043e\u043a\u0438 \u043d\u0435 \u0443\u0441\u043f\u0435\u0432\u0430\u044e\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u0432\u0430\u043d\u0442. \u0412 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0445 \u043d\u043e\u0434\u044b \u044d\u0442\u043e \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u0438\u0434\u043d\u043e \u0447\u0435\u0440\u0435\u0437 <code>node_procs_running</code> (\u0441\u0447\u0451\u0442\u0447\u0438\u043a \u0442\u0440\u0435\u0434\u043e\u0432 \u041e\u0421, \u0432\u043a\u043b\u044e\u0447\u0430\u044f kernel threads).</li> <li>Blocked (D) - \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u0442\u0440\u0435\u0434\u044b \u041e\u0421 \u0432 D-\u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 (\u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u0441\u043a\u0430\u0447\u043a\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439), \u0437\u043d\u0430\u0447\u0438\u0442 \u043f\u043e\u0442\u043e\u043a\u0438 \u0437\u0430\u0441\u0442\u0440\u0435\u0432\u0430\u044e\u0442 \u0432 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0432\u0432\u043e\u0434\u0430-\u0432\u044b\u0432\u043e\u0434\u0430. \u041a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 D-\u0442\u0440\u0435\u0434 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442, \u0447\u0442\u043e \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0436\u0434\u0451\u0442 \u0434\u0438\u0441\u043a\u043e\u0432\u0443\u044e \u043f\u043e\u0434\u0441\u0438\u0441\u0442\u0435\u043c\u0443, \u0438 \u043f\u043e\u043b\u0435\u0437\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u043f\u0440\u043e\u0441\u0442\u0430\u0438\u0432\u0430\u0435\u0442 \u0432 \u044d\u0442\u043e \u0432\u0440\u0435\u043c\u044f. \u0420\u0435\u0437\u043a\u0438\u0435 \u0432\u0441\u043f\u043b\u0435\u0441\u043a\u0438 D-state \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0430\u044e\u0442\u0441\u044f \u0440\u043e\u0441\u0442\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438 \u0434\u0435\u0433\u0440\u0430\u0434\u0430\u0446\u0438\u0435\u0439 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438. \u0422\u0430\u043a \u0447\u0442\u043e \u0432 \u0446\u0435\u043b\u043e\u043c \u043c\u043d\u043e\u0433\u043e D - \u044d\u0442\u043e \u0436\u0434\u0443\u0449\u0438\u0435 \u0447\u0435\u0433\u043e-\u0442\u043e \u0430\u043f\u043f\u0430\u0440\u0430\u0442\u043d\u043e\u0433\u043e, \u0447\u0430\u0449\u0435 \u0432\u0441\u0435\u0433\u043e \u0434\u0438\u0441\u043a\u0430. \u0422\u0440\u0435\u0434\u044b \u0432 D-\u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 \u043d\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u044e\u0442 CPU \u0438 \u043d\u0435 \u0432\u0438\u0434\u043d\u044b \u0432 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 CPU. \u0412 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0445 \u043d\u043e\u0434\u044b \u044d\u0442\u043e \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u0438\u0434\u043d\u043e \u0447\u0435\u0440\u0435\u0437 <code>node_procs_blocked</code> (\u0442\u043e\u0436\u0435 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 kernel threads).</li> </ul> <p>\u0412\u0430\u0436\u043d\u043e: \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043e\u0431\u044b\u0447\u043d\u043e \u0434\u0430\u044e\u0442 \u0442\u043e\u043b\u044c\u043a\u043e R \u0438 D (node_exporter, cAdvisor). \u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f S/Z \u0438 \u0438\u0445 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u043b\u0438\u0431\u043e \u043d\u0435 \u0432\u0438\u0434\u043d\u044b, \u043b\u0438\u0431\u043e \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u043f\u043e\u043f\u0430\u0434\u0430\u044e\u0442 \u0432 \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0438, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043a\u0430\u0440\u0442\u0438\u043d\u0430 \u043d\u0435\u043f\u043e\u043b\u043d\u0430\u044f - \u044d\u0442\u043e \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u043c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435.</p> <p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u0441\u043e\u043e\u0442\u043d\u0435\u0441\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u044d\u0442\u0438\u0445 \u0442\u0440\u0435\u0434\u043e\u0432 \u0441 \u0442\u0435\u043c, \u043a\u0430\u043a \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u043c\u043d\u0435\u043d\u0438\u044e \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432\u0430\u0448\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0438 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0442\u0440\u0435\u0434\u043e\u0432 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c (\u043a\u043e\u043d\u0435\u0447\u043d\u043e \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u0435\u0441\u043b\u0438 \u043d\u0430 \u0432\u0430\u0448\u0435\u0439 \u043d\u043e\u0434\u0435 \u043d\u0435 \u0441\u043e\u0442\u043d\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439). \u0415\u0441\u043b\u0438 \u0442\u0440\u0435\u0434\u043e\u0432 \u0441\u0438\u043b\u044c\u043d\u043e \u0431\u043e\u043b\u044c\u0448\u0435 \u0447\u0435\u043c \u0432\u044b \u043e\u0436\u0438\u0434\u0430\u043b\u0438, \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e \u0432\u0430\u0448 \u0440\u0430\u043d\u0442\u0430\u0439\u043c \u0432\u0430\u0441 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e\u0431\u043c\u0430\u043d\u044b\u0432\u0430\u0435\u0442 \u0438\u043b\u0438 \u0435\u0441\u0442\u044c \u043a\u043e\u0441\u044f\u043a \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445.</p> <p>\u0414\u0430\u043b\u0435\u0435 \u043f\u043e\u044d\u0442\u0430\u043f\u043d\u043e: \u0441\u043d\u0430\u0447\u0430\u043b\u0430 PSI (\u0435\u0441\u0442\u044c \u043b\u0438 \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435?), \u0437\u0430\u0442\u0435\u043c \u0431\u043b\u043e\u043a\u0438 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0440\u0435\u0441\u0443\u0440\u0441\u0443 - CPU, Disk, Network, Memory.</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#1-psi-overview","title":"1. PSI Overview","text":"<p>\u0421\u0430\u043c\u043e\u0435 \u043f\u0440\u043e\u0441\u0442\u043e\u0435 \u0438 \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0435 \u043d\u0430 \u0447\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435\u0433\u0434\u0430 (\u043a\u0440\u043e\u043c\u0435 \u0441\u043b\u0443\u0447\u0430\u0435\u0432, \u043a\u043e\u0433\u0434\u0430 \u044d\u0442\u0430 \u043c\u0435\u0442\u0440\u0438\u043a\u0430 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430) - PSI. \u041c\u0435\u0442\u0440\u0438\u043a\u0430 \u0435\u0441\u0442\u044c \u0443 \u0445\u043e\u0441\u0442\u0430 \u0438 \u0443 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432 \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u0443\u0431\u0430 \u0438 \u0432\u043d\u0435 \u043a\u0443\u0431\u0430. </p> <p>Pressure Stall Information \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0434\u043e\u043b\u044e \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u043a\u043e\u0433\u0434\u0430 \u0437\u0430\u0434\u0430\u0447\u0438 \u0431\u044b\u043b\u0438 \u0432\u044b\u043d\u0443\u0436\u0434\u0435\u043d\u043d\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0438\u0437\u2011\u0437\u0430 \u043d\u0435\u0445\u0432\u0430\u0442\u043a\u0438 CPU, IO \u0438\u043b\u0438 \u043f\u0430\u043c\u044f\u0442\u0438. \u042d\u0442\u043e \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430, \u0430 \u043f\u0440\u043e\u0446\u0435\u043d\u0442 \u00ab\u043f\u043e\u0442\u0435\u0440\u0438\u00bb \u0432\u0440\u0435\u043c\u0435\u043d\u0438. <code>some</code> \u0437\u043d\u0430\u0447\u0438\u0442, \u0447\u0442\u043e \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u043f\u043e\u0442\u043e\u043a \u0431\u044b\u043b \u0437\u0430\u0434\u0435\u0440\u0436\u0430\u043d; <code>full</code> - \u0432 \u044d\u0442\u043e\u0442 \u043c\u043e\u043c\u0435\u043d\u0442 \u0437\u0430\u0434\u0435\u0440\u0436\u0430\u043d\u044b \u0431\u044b\u043b\u0438 \u0432\u0441\u0435 runnable \u0437\u0430\u0434\u0430\u0447\u0438 (\u043d\u0430 \u0445\u043e\u0441\u0442\u0435 cpu.full \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 0, \u0432\u043d\u0443\u0442\u0440\u0438 cgroup \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u0443\u043f\u043e\u0440\u0435 \u0432 \u043a\u0432\u043e\u0442\u044b CFS). \u0412\u0430\u0436\u043d\u044b \u0432\u0435\u043b\u0438\u0447\u0438\u043d\u0430 \u0438 \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u0430 \u043d\u0435 \u0441\u0430\u043c \u0444\u0430\u043a\u0442 \u00ab&gt; 0\u00bb. Load Average \u043f\u043e\u043b\u0435\u0437\u0435\u043d \u043a\u0430\u043a \u0442\u0440\u0435\u043d\u0434, \u043d\u043e \u0441\u043c\u0435\u0448\u0438\u0432\u0430\u0435\u0442 runnable \u0438 D-state \u0438 \u043d\u0435 \u043d\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u0442 \u043d\u0430 \u044f\u0434\u0440\u0430; PSI \u0442\u043e\u0447\u043d\u0435\u0435 \u043e\u0442\u0440\u0430\u0436\u0430\u0435\u0442 \u0438\u043c\u0435\u043d\u043d\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f.</p> <p>\u041a\u0430\u043a \u0447\u0438\u0442\u0430\u0442\u044c \u0438 \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c:</p> <ul> <li>PSI CPU.some - \u0441\u0438\u0433\u043d\u0430\u043b \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0446\u0438\u0438 \u0437\u0430 \u044f\u0434\u0440\u0430. \u0414\u0430\u043b\u044c\u0448\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c: \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u043b\u0438 <code>user/system</code>, \u043d\u0435 \u0441\u043a\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043b\u0438 \u043e\u0434\u043d\u043e\u043f\u043e\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u0438\u043b\u0438 busy-wait (PSI \u043d\u0438\u0437\u043a\u0438\u0439, <code>user</code> \u0432\u044b\u0441\u043e\u043a\u0438\u0439).</li> <li>PSI IO.some - \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0438 \u043d\u0430 \u0434\u0438\u0441\u043a\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u043c util/latency/queue \u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e D-state. \u0420\u0435\u0430\u043a\u0446\u0438\u044f \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044f \u0438 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u0430 I/O.</li> <li>PSI Memory.some - \u0434\u043e\u043b\u044f \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u043a\u043e\u0433\u0434\u0430 \u0437\u0430\u0434\u0430\u0447\u0438 \u043d\u0435 \u0441\u043c\u043e\u0433\u043b\u0438 \u0441\u0440\u0430\u0437\u0443 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0430\u043c\u044f\u0442\u044c \u0438 \u0436\u0434\u0430\u043b\u0438, \u043f\u043e\u043a\u0430 \u044f\u0434\u0440\u043e \u043e\u0441\u0432\u043e\u0431\u043e\u0434\u0438\u0442 RAM, \u0432\u044b\u0442\u0435\u0441\u043d\u0438\u0442 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b (\u0438\u0437 page cache \u0438\u043b\u0438 \u0432 swap) \u0438/\u0438\u043b\u0438 \u0434\u043e\u0447\u0438\u0442\u0430\u0435\u0442 \u0438\u0445 \u0441 \u0434\u0438\u0441\u043a\u0430 \u043e\u0431\u0440\u0430\u0442\u043d\u043e.</li> <li>\u0412\u0441\u0435 PSI \u043e\u043a\u043e\u043b\u043e \u043d\u0443\u043b\u044f, \u0430 \u0441\u0435\u0440\u0432\u0438\u0441 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u0439 - \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432 \u0441\u0435\u0442\u0438 \u0438\u043b\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f (\u0432\u043d\u0435\u0448\u043d\u0438\u0435 API, \u043b\u043e\u043a\u0438). \u0422\u043e\u0433\u0434\u0430 \u043e\u043f\u0438\u0440\u0430\u0435\u043c\u0441\u044f \u043d\u0430 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f \u0438\u043b\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0438.</li> </ul> <p>\u0413\u0434\u0435 \u0431\u044b \u043d\u0438 \u0441\u043e\u0431\u0438\u0440\u0430\u043b\u0438\u0441\u044c \u043c\u0435\u0442\u0440\u0438\u043a\u0438, \u043b\u043e\u0433\u0438\u043a\u0430 \u043e\u0434\u043d\u0430: \u0435\u0441\u043b\u0438 PSI \u0435\u0441\u0442\u044c - \u0432\u044b\u0431\u0438\u0440\u0430\u0435\u043c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u043f\u043e\u0434\u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u0434\u043b\u044f \u0440\u0430\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f; \u0435\u0441\u043b\u0438 PSI \u043d\u0435\u0442 - \u0438\u0449\u0435\u043c \u0441\u043b\u0435\u0434\u044b \u0432\u043d\u0435 \u044f\u0434\u0440\u0430.</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#system-footprint","title":"\u041a\u0430\u043a \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c System Footprint \u0441\u0432\u0435\u0440\u0445\u0443 \u0432\u043d\u0438\u0437","text":"<p>\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u043f\u0440\u043e\u0441\u0442\u0430: \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0435\u0441\u0442\u044c \u043b\u0438 \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435 (PSI), \u0434\u0430\u043b\u0435\u0435 \u043f\u043e \u0440\u0435\u0441\u0443\u0440\u0441\u0430\u043c - CPU, \u0434\u0438\u0441\u043a, \u0441\u0435\u0442\u044c, \u043f\u0430\u043c\u044f\u0442\u044c. \u0412 \u043a\u0430\u0436\u0434\u043e\u0439 \u0433\u0440\u0443\u043f\u043f\u0435 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u043c \u043d\u0430 \u0441\u0432\u043e\u0439 \u0432\u043e\u043f\u0440\u043e\u0441 \u0438 \u0440\u0435\u0448\u0430\u0435\u043c, \u043a\u043e\u043f\u0430\u0442\u044c \u0433\u043b\u0443\u0431\u0436\u0435 \u0438\u043b\u0438 \u0438\u0434\u0442\u0438 \u0434\u0430\u043b\u044c\u0448\u0435.</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#2-cpu","title":"2. CPU: \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435, \u0440\u0430\u0441\u0445\u043e\u0434 \u0438 \u0431\u0430\u043b\u0430\u043d\u0441","text":"<p>\u042d\u0442\u043e \u043f\u0440\u043e On-CPU \u0447\u0430\u0441\u0442\u044c (user/system/softirq/steal), \u0432 \u0441\u0432\u044f\u0437\u043a\u0435 \u0441 PSI CPU \u0438 R-state \u0438\u0437 \u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0442\u044c\u0438.</p> <ul> <li>\u041a\u0443\u0434\u0430 \u0443\u0445\u043e\u0434\u0438\u0442 \u0431\u043e\u043b\u044c\u0448\u0435 CPU? - \u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0440\u0430\u0437\u043b\u043e\u0436\u0435\u043d\u0438\u0435 user/system/softirq/steal. \u0412\u044b\u0441\u043e\u043a\u0438\u0439 <code>system</code> \u0433\u043e\u0432\u043e\u0440\u0438\u0442 \u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0432 \u044f\u0434\u0440\u0435 (syscalls, \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u044b). \u0411\u043e\u043b\u044c\u0448\u043e\u0439 <code>softirq</code> - \u044f\u0434\u0440\u043e \u0437\u0430\u043d\u044f\u0442\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0441\u0435\u0442\u0438/\u0434\u0438\u0441\u043a\u0430 \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 software interrupts (\u043d\u0435 \u0430\u043f\u043f\u0430\u0440\u0430\u0442\u043d\u044b\u0435, \u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0432 \u044f\u0434\u0440\u0435). <code>steal</code> - \u0433\u0438\u043f\u0435\u0440\u0432\u0438\u0437\u043e\u0440 \u0437\u0430\u0431\u0438\u0440\u0430\u0435\u0442 \u0432\u0440\u0435\u043c\u044f \u0443 \u0412\u041c. \u0420\u0435\u0430\u043a\u0446\u0438\u044f: \u0440\u0430\u0437\u043d\u043e\u0441\u0438\u0442\u044c IRQ, \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0442\u044c \u0442\u044f\u0436\u0435\u043b\u044b\u0435 \u043f\u043e\u0442\u043e\u043a\u0438, \u043f\u0440\u043e\u0444\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0434/GC.</li> <li>\u0415\u0441\u0442\u044c \u043b\u0438 \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0446\u0438\u044f \u0437\u0430 CPU? - \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u043e \u0447\u0438\u0442\u0430\u0435\u043c PSI CPU \u0438 \u0447\u0430\u0441\u0442\u043e\u0442\u0443 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439. Node Exporter \u0434\u0430\u0435\u0442 \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u044b\u0435 context switches (<code>node_context_switches_total</code>), \u0431\u0435\u0437 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0430 voluntary/involuntary; \u0432 cAdvisor \u043f\u043e\u0434\u043e\u0431\u043d\u044b\u0445 \u043c\u0435\u0442\u0440\u0438\u043a \u043e\u0431\u044b\u0447\u043d\u043e \u043d\u0435\u0442. \u0421\u0430\u043c \u043f\u043e \u0441\u0435\u0431\u0435 \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u0441\u0447\u0435\u0442\u0447\u0438\u043a (\u0438\u043b\u0438 \u0440\u043e\u0441\u0442) \u0431\u0435\u0437 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0430 \u044f\u0434\u0440\u0430 \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c, \u043d\u043e \u0432 \u0441\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u0438 \u0441 \u043f\u0430\u0434\u0435\u043d\u0438\u0435\u043c \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u043c\u0435\u043a\u0430\u0442\u044c \u043d\u0430 \u0438\u0437\u0431\u044b\u0442\u043e\u043a \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u0438\u043b\u0438 lock contention. PSI \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u043f\u0440\u0438 \u043d\u0435\u0432\u044b\u0441\u043e\u043a\u0438\u0445 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f\u0445 - \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u043a\u0432\u043e\u0442\u044b cgroup \u0438\u043b\u0438 \u043e\u0434\u043d\u043e\u043f\u043e\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c.</li> <li>\u0415\u0441\u0442\u044c \u043b\u0438 \u043d\u0435\u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u043f\u043e \u044f\u0434\u0440\u0430\u043c? - \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u043e \u044f\u0434\u0440\u0430\u043c \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0433\u043e\u0440\u044f\u0447\u0438\u0435 \u044f\u0434\u0440\u0430. \u041e\u0434\u0438\u043d CPU \u0437\u0430\u0431\u0438\u0442, \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b - \u0433\u043e\u0440\u044f\u0447\u0438\u0439 \u043f\u043e\u0442\u043e\u043a \u0438\u043b\u0438 IRQ \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u044b \u043a \u043e\u0434\u043d\u043e\u043c\u0443 \u044f\u0434\u0440\u0443. \u041d\u0430 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u043a\u0430\u0445 \u0438 \u0431\u0435\u0437 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 RSS/irqbalance \u044d\u0442\u043e \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u0447\u0430\u0441\u0442\u043e: \u0432\u0435\u0441\u044c \u0441\u0435\u0442\u0435\u0432\u043e\u0439/\u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0439 \u0442\u0440\u0430\u0444\u0438\u043a \u043c\u043e\u0436\u0435\u0442 \u00ab\u043f\u0440\u0438\u043b\u0438\u043f\u043d\u0443\u0442\u044c\u00bb \u043a \u043e\u0434\u043d\u043e\u043c\u0443 CPU. \u041b\u0435\u0447\u0438\u0442\u0441\u044f \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435\u043c IRQ/RPS \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c \u0432\u043e\u0440\u043a\u0435\u0440\u043e\u0432 (\u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u043c\u0430).</li> </ul> <p>\u041f\u0440\u043e load average: \u044d\u0442\u043e \u0443\u0441\u0440\u0435\u0434\u043d\u0435\u043d\u0438\u0435 runnable + D-state \u0437\u0430 1/5/15 \u043c\u0438\u043d\u0443\u0442, \u0431\u0435\u0437 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0430 \u044f\u0434\u0440\u0430, \u0438 \u043e\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u044e\u0449\u0438\u0435 (D) \u0437\u0430\u0434\u0430\u0447\u0438. \u041d\u0430 \u043c\u043d\u043e\u0433\u043e\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u043d\u044b\u0445 \u0441\u0438\u0441\u0442\u0435\u043c\u0430\u0445 LA \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432\u044b\u0441\u043e\u043a\u0438\u043c \u043f\u0440\u0438 \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0438\u043b\u0438 \u043d\u0438\u0437\u043a\u0438\u043c \u043f\u0440\u0438 \u0433\u043e\u0440\u044f\u0447\u0435\u043c \u043e\u0434\u043d\u043e\u043c \u044f\u0434\u0440\u0435. \u0412 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f\u0445 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, man proc(5), \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 LWN \u043e LA) \u043e\u0442\u043c\u0435\u0447\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e LA - \u0441\u0438\u043c\u043f\u0442\u043e\u043c, \u0430 \u043d\u0435 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u043f\u0440\u0430\u0432\u0434\u044b, \u0435\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u043a\u0430\u043a \u0442\u0440\u0435\u043d\u0434 \u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u043c PSI, R-state \u0438 \u043f\u0435\u0440\u2011CPU \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439.</p> <p>\u0415\u0441\u043b\u0438 \u043f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e CPU \u043d\u0435 \u0432\u0438\u0434\u043d\u043e \u0438\u043b\u0438 \u043e\u043d\u043e \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u043c\u043e, \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u043a \u0434\u0440\u0443\u0433\u0438\u043c \u0440\u0435\u0441\u0443\u0440\u0441\u0430\u043c.</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#3-disk","title":"3. Disk: \u043b\u0430\u0442\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u0438","text":"<p>\u042d\u0442\u043e Off-CPU \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0438\u0437 \u043d\u0430\u0448\u0435\u0439 \u0441\u0445\u0435\u043c\u044b: \u0440\u043e\u0441\u0442 PSI IO \u0438 D-state \u0433\u043e\u0432\u043e\u0440\u0438\u0442, \u0447\u0442\u043e \u0442\u0440\u0435\u0434\u044b \u0443\u0448\u043b\u0438 \u0436\u0434\u0430\u0442\u044c \u0434\u0438\u0441\u043a.</p> <ul> <li>\u0420\u0430\u0441\u0442\u0451\u0442 \u043b\u0438 \u043b\u0430\u0442\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c I/O? - \u0441\u0430\u043c\u044b\u0439 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0438\u0433\u043d\u0430\u043b \u043f\u043e \u0434\u0438\u0441\u043a\u0443: \u0441\u0440\u0435\u0434\u043d\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u043e\u0434\u043d\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 (await): \u044d\u0442\u043e \u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u044c, \u0438 \u0432\u0440\u0435\u043c\u044f \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e\u043c. \u0412 node_exporter \u044d\u0442\u043e: <code>rate(node_disk_read_time_seconds_total) / rate(node_disk_reads_completed_total)</code> (\u0438 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0434\u043b\u044f write).</li> <li>\u0415\u0441\u043b\u0438 latency \u0440\u0430\u0441\u0442\u0451\u0442 - \u043f\u043e\u0447\u0435\u043c\u0443? - \u0434\u0430\u043b\u044c\u0448\u0435 \u0434\u043e\u0431\u0438\u0432\u0430\u0435\u043c \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0434\u0432\u0443\u043c\u044f \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0441\u0438\u0433\u043d\u0430\u043b\u0430\u043c\u0438:</li> <li>Queue depth - <code>rate(node_disk_io_time_weighted_seconds_total)</code>. \u0415\u0441\u043b\u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u0440\u0430\u0441\u0442\u0451\u0442, \u0437\u043d\u0430\u0447\u0438\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430\u043a\u0430\u043f\u043b\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0431\u044b\u0441\u0442\u0440\u0435\u0435, \u0447\u0435\u043c \u0434\u0438\u0441\u043a \u0443\u0441\u043f\u0435\u0432\u0430\u0435\u0442 \u0438\u0445 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u0442\u044c (\u0437\u0430\u043a\u043e\u043d \u041b\u0438\u0442\u0442\u043b\u0430: Queue \u2248 IOPS \u00d7 Latency).</li> <li>Utilization (\u0437\u0430\u043d\u044f\u0442\u043e\u0441\u0442\u044c) - <code>rate(node_disk_io_time_seconds_total)</code>. \u0412\u044b\u0441\u043e\u043a\u0438\u0439 util \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u201c\u0434\u0438\u0441\u043a \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e \u0437\u0430\u043d\u044f\u0442\u201d, \u043d\u043e \u0441\u0430\u043c \u043f\u043e \u0441\u0435\u0431\u0435 \u043d\u0435 \u0434\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0443\u0437\u043a\u043e\u0435 \u043c\u0435\u0441\u0442\u043e (\u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u043d\u0430 SSD/NVMe) - \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u043c \u043f\u043e latency/queue.</li> <li>\u0413\u0434\u0435 \u0437\u0434\u0435\u0441\u044c \u043c\u0435\u0441\u0442\u043e iowait? - iowait \u0432 CPU \u0440\u044f\u0434\u0443 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e CPU \u043f\u0440\u043e\u0441\u0442\u0430\u0438\u0432\u0430\u0435\u0442, \u043f\u043e\u043a\u0430 \u0436\u0434\u0451\u0442 \u0434\u0438\u0441\u043a; \u043e\u043d\u043e \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c \u0441 \u0440\u043e\u0441\u0442\u043e\u043c util/latency/PSI IO. User/system \u0438 iowait \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0432\u0437\u0430\u0438\u043c\u043e\u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u044f\u0434\u0440\u0435, \u043d\u043e \u044d\u0444\u0444\u0435\u043a\u0442 \u0434\u043b\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441\u0443\u043c\u043c\u0438\u0440\u0443\u0435\u0442\u0441\u044f - \u0436\u0434\u0451\u043c \u0434\u0438\u0441\u043a \u0438 \u043d\u0435 \u0434\u0435\u043b\u0430\u0435\u043c \u043f\u043e\u043b\u0435\u0437\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443.</li> <li>\u041b\u043e\u0432\u0443\u0448\u043a\u0430 \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0430\u0446\u0438\u0438 iowait (\u0434\u0435\u0442\u0430\u043b\u0438) - iowait \u044d\u0442\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 CPU (idle), \u0430 \u043d\u0435 \u0442\u0440\u0435\u0434\u0430. \u0422\u0440\u0435\u0434 \u0432\u044b\u0437\u0432\u0430\u043b <code>read()</code> \u2192 \u0443\u0448\u0451\u043b \u0432 D-state off-CPU \u2192 \u044f\u0434\u0440\u043e \u043e\u0441\u0432\u043e\u0431\u043e\u0434\u0438\u043b\u043e\u0441\u044c. \u041a\u043e\u0433\u0434\u0430 \u044f\u0434\u0440\u043e idle \u0438 \u0435\u0441\u0442\u044c pending I/O, \u043e\u043d\u043e \u043f\u043e\u043c\u0435\u0447\u0430\u0435\u0442 \u044d\u0442\u043e \u043a\u0430\u043a iowait. \u0415\u0441\u043b\u0438 \u043f\u0440\u0438\u0434\u0451\u0442 \u0440\u0430\u0431\u043e\u0442\u0430, \u044f\u0434\u0440\u043e \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u0441\u044f \u043d\u0430 \u043d\u0435\u0451, iowait \u0438\u0441\u0447\u0435\u0437\u043d\u0435\u0442 \u0441 \u0433\u0440\u0430\u0444\u0438\u043a\u0430, \u043d\u043e \u0442\u0440\u0435\u0434 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442 \u0436\u0434\u0430\u0442\u044c \u0434\u0438\u0441\u043a \u0432 D. \u041d\u044e\u0430\u043d\u0441: iowait \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \"CPU \u043f\u0440\u043e\u0441\u0442\u0430\u0438\u0432\u0430\u043b \u043f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 I/O\", \u0430 \u043d\u0435 \"\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0436\u0434\u0451\u043c \u0434\u0438\u0441\u043a\". \u0421\u0430\u043c\u043e \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0442\u0440\u0435\u043a\u0430\u0435\u0442\u0441\u044f \u0432 <code>procs_blocked</code> \u0438 PSI IO. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u0440\u0438 100% util \u0434\u0438\u0441\u043a\u0430 \u0438 \u0437\u0430\u043d\u044f\u0442\u044b\u0445 CPU iowait \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c 0%, \u0445\u043e\u0442\u044f \u0442\u0440\u0435\u0434\u044b \u0436\u0434\u0443\u0442 \u0432 D. \u041b\u043e\u0432\u0443\u0448\u043a\u0430: \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u043d\u0438\u0437\u043a\u0438\u0439 iowait \u0438 \u0440\u0435\u0448\u0438\u0442\u044c, \u0447\u0442\u043e \u0434\u0438\u0441\u043a\u0430 \u043d\u0435\u0442 \u0432 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435, \u0445\u043e\u0442\u044f \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u0442\u0440\u0435\u0434\u044b \u0441\u0442\u043e\u044f\u0442 \u0432 D \u0438 \u0440\u0430\u0431\u043e\u0442\u0430 \u043d\u0435 \u0438\u0434\u0451\u0442 - CPU \u043f\u0440\u043e\u0441\u0442\u043e \u0437\u0430\u043d\u044f\u0442 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0437\u0430\u0434\u0430\u0447\u0430\u043c\u0438. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 util \u0434\u0438\u0441\u043a\u0430, D-state \u0438 PSI IO \u0432\u043c\u0435\u0441\u0442\u0435, \u0430 \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e iowait.</li> <li>Swap stall - \u043b\u044e\u0431\u043e\u0435 \u043f\u043e\u044f\u0432\u043b\u0435\u043d\u0438\u0435 swap I/O (page-in/page-out) \u043f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430 \u043f\u0430\u043c\u044f\u0442\u044c: \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0432\u044b\u043d\u0443\u0436\u0434\u0435\u043d\u043d\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u0434\u0438\u0441\u043a\u043e\u0432\u044b\u0439 I/O \u0440\u0430\u0434\u0438 \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0435\u043d\u0438\u044f RAM, \u0438 \u044d\u0442\u043e \u0443\u0445\u0443\u0434\u0448\u0430\u0435\u0442 latency \u043f\u043e \u0434\u0438\u0441\u043a\u0443 \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u201c\u0434\u0438\u0441\u043a \u043a\u0430\u043a \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e\u201d \u0431\u044b\u043b \u0431\u044b \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u044b\u043c.</li> <li>\u041e\u0448\u0438\u0431\u043a\u0438/\u043f\u043e\u0432\u0442\u043e\u0440\u044b - \u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043e\u0448\u0438\u0431\u043e\u043a/\u0440\u0435\u0442\u0440\u0430\u0435\u0432 \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0434\u0438\u0441\u043a\u0430/RAID/NVMe (\u0438\u043b\u0438 \u0445\u043e\u0442\u044f \u0431\u044b \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0432 dmesg/SMART), \u0438\u0445 \u0441\u0442\u043e\u0438\u0442 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e: \u043f\u043e\u0432\u0442\u043e\u0440\u044b \u0438 \u0434\u0435\u0433\u0440\u0430\u0434\u0430\u0446\u0438\u044f \u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044f \u043f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u0440\u043e\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0440\u043e\u0441\u0442\u043e\u043c latency. \u0412 node_exporter \u044f\u0432\u043d\u044b\u0445 error-\u0441\u0447\u0451\u0442\u0447\u0438\u043a\u043e\u0432 \u043f\u043e \u0434\u0438\u0441\u043a\u0443 \u043e\u0431\u044b\u0447\u043d\u043e \u043d\u0435\u0442 - \u0442\u043e\u0433\u0434\u0430 \u043e\u043f\u0438\u0440\u0430\u0435\u043c\u0441\u044f \u043d\u0430 SMART/dmesg/\u0432\u0435\u043d\u0434\u043e\u0440\u043d\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438.</li> </ul> <p>\u0420\u0435\u0430\u043a\u0446\u0438\u044f \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438: \u0443\u0441\u043a\u043e\u0440\u0438\u0442\u044c \u0434\u0438\u0441\u043a (NVMe, \u0431\u043e\u043b\u044c\u0448\u0435 IOPS), \u043c\u0435\u043d\u044f\u0442\u044c \u043f\u0430\u0442\u0442\u0435\u0440\u043d I/O (\u0431\u0430\u0442\u0447\u0438\u043d\u0433, \u0440\u0435\u0436\u0435 fsync), \u0443\u0431\u0438\u0440\u0430\u0442\u044c swap \u0437\u0430 \u0441\u0447\u0451\u0442 \u043f\u0430\u043c\u044f\u0442\u0438. \u0415\u0441\u043b\u0438 PSI IO \u0440\u043e\u0432\u043d\u044b\u0439 \u0438 util \u043d\u0438\u0437\u043a\u0438\u0439, \u0434\u0438\u0441\u043a \u0441 \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c\u044e \u043d\u0435 \u0433\u043b\u0430\u0432\u043d\u0430\u044f \u043f\u0440\u0438\u0447\u0438\u043d\u0430.</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#4-network","title":"4. Network: \u043f\u043e\u0442\u0435\u0440\u0438 \u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 (\u043c\u043e\u0439 \u0441\u0430\u043c\u044b\u0439 \u043b\u044e\u0431\u0438\u043c\u044b\u0439 \u0431\u043b\u043e\u043a)","text":"<p>\u0421\u0435\u0442\u0435\u0432\u044b\u0435 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f - \u044d\u0442\u043e Off-CPU: \u043a\u043e\u0433\u0434\u0430 \u0442\u0440\u0435\u0434 \u0436\u0434\u0451\u0442 \u0441\u043e\u043a\u0435\u0442/epoll, \u043e\u043d \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 S-state (WCHAN: <code>ep_poll</code> / <code>tcp_recvmsg</code>) \u0438 \u043d\u0435 \u043f\u043e\u043f\u0430\u0434\u0430\u0435\u0442 \u0432 PSI.</p> <ul> <li>\u0423\u0441\u043f\u0435\u0432\u0430\u0435\u043c \u043b\u0438 \u043c\u044b \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0442\u0440\u0430\u0444\u0438\u043a? - \u043e\u0442\u0432\u0435\u0442 \u0434\u0430\u044e\u0442 \u0434\u0440\u043e\u043f\u044b \u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u043d\u0430\u0448\u0435\u0439 \u043d\u043e\u0434\u044b:</li> <li>Drops / backlog - \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u043c \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0442\u0435\u0440\u044f\u0435\u043c \u043f\u0430\u043a\u0435\u0442\u044b:<ul> <li>\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 (NIC/\u0434\u0440\u0430\u0439\u0432\u0435\u0440/\u043e\u0447\u0435\u0440\u0435\u0434\u0438 RX/TX) - <code>node_network_receive_drop_total</code> / <code>node_network_transmit_drop_total</code> (\u0441\u0447\u0451\u0442\u0447\u0438\u043a\u0438 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443). \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0435 <code>eth*</code>, \u043d\u043e \u0438 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <code>veth*</code>/<code>cni*</code>/<code>tap*</code>): \u0431\u044b\u0432\u0430\u0435\u0442, \u0447\u0442\u043e \u043d\u0430 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u043c NIC \u0434\u0440\u043e\u043f\u043e\u0432 \u043d\u0435\u0442, \u0430 \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430/\u043f\u043e\u0434\u0430 \u043e\u043d\u0438 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c.</li> <li>\u0423\u0440\u043e\u0432\u0435\u043d\u044c softnet backlog (CPU \u043d\u0435 \u0443\u0441\u043f\u0435\u0432\u0430\u0435\u0442 \u043f\u0440\u043e\u0436\u0435\u0432\u0430\u0442\u044c \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u043f\u043e\u0442\u043e\u043a) - <code>node_softnet_dropped_total</code> \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 <code>node_softnet_processed_total</code>.</li> <li>\u0423\u0440\u043e\u0432\u0435\u043d\u044c TCP/socket receive path (\u043f\u0430\u043a\u0435\u0442 \u0434\u043e\u0448\u0451\u043b \u0434\u043e \u0441\u0442\u0435\u043a\u0430 TCP, \u043d\u043e \u0434\u0430\u043b\u044c\u0448\u0435 \u0443\u043f\u0451\u0440\u043b\u0438\u0441\u044c \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u0438/\u0431\u0443\u0444\u0435\u0440\u044b \u0441\u043e\u043a\u0435\u0442\u0430) - \u0437\u0434\u0435\u0441\u044c \u201c\u043b\u043e\u043a\u0430\u043b\u0438\u0437\u0443\u0435\u043c \u0433\u0434\u0435 \u0438\u043c\u0435\u043d\u043d\u043e \u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u0438\u043b\u043e\u0441\u044c\u201d \u0432\u043d\u0443\u0442\u0440\u0438 TCP \u043f\u0440\u0438\u0451\u043c\u043d\u043e\u0433\u043e \u043f\u0443\u0442\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e TcpExt\u2011\u0441\u0447\u0451\u0442\u0447\u0438\u043a\u043e\u0432: <code>node_netstat_TcpExt_ListenOverflows</code>/<code>node_netstat_TcpExt_ListenDrops</code> (\u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 listen/accept), <code>node_netstat_TcpExt_TCPRcvQDrop</code> (drop \u0432 rcv queue \u0438\u0437\u2011\u0437\u0430 \u043b\u0438\u043c\u0438\u0442\u043e\u0432 rcvbuf), <code>node_netstat_TcpExt_TCPOFOQueue</code> (\u043c\u0435\u0442\u0440\u0438\u043a\u0430 \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u0438\u044f out-of-order \u043e\u0447\u0435\u0440\u0435\u0434\u0438).</li> <li>\u041e\u0448\u0438\u0431\u043a\u0438 \u043f\u0440\u0438\u0451\u043c\u0430 - <code>node_netstat_Tcp_InErrs</code>: \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 TCP\u2011\u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432 \u044d\u0442\u0430 \u043d\u043e\u0434\u0430 \u043f\u0440\u0438\u043d\u044f\u043b\u0430 \u0441 \u043e\u0448\u0438\u0431\u043a\u043e\u0439 \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 TCP\u2011\u0441\u0442\u0435\u043a\u0430. \u041b\u044e\u0431\u043e\u0439 \u0440\u043e\u0441\u0442 - \u0441\u0438\u0433\u043d\u0430\u043b \u043f\u0440\u043e\u0431\u043b\u0435\u043c \u043d\u0430 \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u043c \u043f\u0443\u0442\u0438 (\u0431\u0438\u0442\u044b\u0435/\u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0435 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u044b, checksum/offload/\u0434\u0440\u0430\u0439\u0432\u0435\u0440/\u043f\u043e\u0440\u0442). \u0414\u0440\u043e\u043f\u044b \u043d\u0430 \u043f\u0440\u0438\u0451\u043c\u0435 \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0442 \u043f\u043e\u0442\u0435\u0440\u0438 \u043f\u0430\u043a\u0435\u0442\u043e\u0432; \u0434\u0430\u043b\u044c\u0448\u0435 \u043f\u043e \u0446\u0435\u043f\u043e\u0447\u043a\u0435 \u044d\u0442\u043e \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0441\u0441\u0438\u044f\u043c \u0443 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f \u0438 \u0440\u043e\u0441\u0442\u0443 latency \u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430/\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0447\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u0441\u043a\u0430\u0442\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u044b \u0438 \u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f \u0437\u0430\u0434\u0435\u0440\u0436\u0435\u043a \u0438\u043c\u0435\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0441\u0435\u0442\u0438.</li> </ul> </li> <li>\u0423\u0441\u043f\u0435\u0432\u0430\u0435\u0442 \u043b\u0438 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u0430\u044f \u0441\u0442\u043e\u0440\u043e\u043d\u0430 (\u0438\u043b\u0438 \u0441\u0435\u0442\u044c \u043c\u0435\u0436\u0434\u0443 \u043d\u0430\u043c\u0438) \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0442\u0440\u0430\u0444\u0438\u043a? - \u043e\u0442\u0432\u0435\u0442 \u0434\u0430\u044e\u0442 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0442\u044b:</li> <li>Retransmissions - \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u0430\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u043d\u044b\u0445 \u043f\u0430\u043a\u0435\u0442\u043e\u0432. \u041c\u0435\u0442\u0440\u0438\u043a\u0438: \u043d\u0430 \u043d\u043e\u0434\u0435 <code>node_netstat_Tcp_RetransSegs</code> (node_exporter), \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u0435 TCP \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0432 cAdvisor \u043f\u0440\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 advanced TCP stats, \u0432 \u043a\u0443\u0431\u0435 (\u0443\u0440\u0435\u0437\u0430\u043d\u043d\u044b\u0439 cAdvisor) TCP \u043c\u0435\u0442\u0440\u0438\u043a \u043d\u0435\u0442. \u041e\u0442\u0434\u0435\u043b\u044c\u043d\u043e \u0441\u043c\u043e\u0442\u0440\u0438\u043c SYN\u2011\u0440\u0435\u0442\u0440\u0430\u0438: <code>node_netstat_TcpExt_TCPSynRetrans</code> (\u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0442 SYN \u043d\u0430 \u044d\u0442\u0430\u043f\u0435 TCP handshake, \u0442\u0430\u0439\u043c\u0435\u0440\u043d\u044b\u0439; \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 connect latency \u0438 \u043e\u0448\u0438\u0431\u043a\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u043f\u0440\u0438 \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0445 \u043a\u043e\u043d\u043d\u0435\u043a\u0442\u0430\u0445).     \u0420\u0435\u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0442\u044b \u0434\u0435\u043b\u044f\u0442\u0441\u044f \u043d\u0430 \u0431\u044b\u0441\u0442\u0440\u044b\u0435 (fast retransmit: 3 dupACK \u2192 \u043f\u0435\u0440\u0435\u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0431\u0435\u0437 \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u0430) \u0438 \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u043d\u044b\u0435 (RTO/backoff: 200 \u2192 400 \u2192 800 \u2192 1600 \u2192 3200 \u043c\u0441 \u2026 \u0432\u043f\u043b\u043e\u0442\u044c \u0434\u043e \u0434\u0435\u0441\u044f\u0442\u043a\u043e\u0432 \u0441\u0435\u043a\u0443\u043d\u0434).     \u0412 node_exporter \u043c\u044b \u0443\u043f\u0438\u0440\u0430\u0435\u043c\u0441\u044f \u0432 \u0440\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0441\u0442\u0438: <code>node_netstat_Tcp_RetransSegs</code> \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u044b, \u0430 <code>node_netstat_TcpExt_TCPTimeouts</code> \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u0430 (RTO). \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0442\u043e\u0447\u043d\u0443\u044e \u0440\u0430\u0437\u0431\u0438\u0432\u043a\u0443 \u043f\u043e \u201cfast vs RTO\u201d \u0431\u0435\u0437 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0445 TcpExt\u2011\u043f\u043e\u043b\u0435\u0439 \u043c\u044b \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c, \u043d\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0447\u0435\u0441\u0442\u043d\u0443\u044e \u043e\u043f\u0442\u0438\u043c\u0438\u0441\u0442\u0438\u0447\u043d\u0443\u044e \u043e\u0446\u0435\u043d\u043a\u0443 \u043d\u0438\u0436\u043d\u0435\u0439 \u0433\u0440\u0430\u043d\u0438\u0446\u044b \u0442\u044f\u0436\u0451\u043b\u044b\u0445 \u043f\u043e\u0442\u0435\u0440\u044c.     \u0420\u0435\u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0442\u044b - \u044d\u0442\u043e \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u044f\u0432\u043b\u0435\u043d\u0438\u0435: \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0445 \u0432\u043e\u043e\u0431\u0449\u0435 \u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u043e\u0439, \u043e\u043d\u0438 \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u044e\u0442\u0441\u044f \u0438 \u0432 \u043c\u0438\u0440\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f (\u0432 \u0442.\u0447. \u0438\u0437\u2011\u0437\u0430 out-of-order \u043f\u0430\u043a\u0435\u0442\u043e\u0432, \u0441\u043c. RFC 4653); \u0434\u043b\u044f \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0438 \u0432\u0430\u0436\u043d\u043e \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u043e\u043b\u044e \u043a \u0442\u0440\u0430\u0444\u0438\u043a\u0443 \u0438 \u0434\u0438\u043d\u0430\u043c\u0438\u043a\u0443.     \u041f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0430\u043c \u044d\u0442\u043e \u0434\u0432\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438: (1) \u043f\u043e\u0442\u0435\u0440\u0438/\u043e\u0448\u0438\u0431\u043a\u0438 \u0432 \u0441\u0435\u0442\u0438 (\u043b\u0438\u043d\u043a/\u043f\u043e\u0440\u0442/\u043f\u0435\u0440\u0435\u0433\u0440\u0443\u0437), (2) \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u0430\u044f \u0441\u0442\u043e\u0440\u043e\u043d\u0430 \u043d\u0435 \u0443\u0441\u043f\u0435\u0432\u0430\u0435\u0442 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c/\u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c (\u043e\u0447\u0435\u0440\u0435\u0434\u0438, \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440/\u0411\u0414 \u0438 \u0432 \u0446\u0435\u043b\u043e\u043c \u0434\u0440\u043e\u043f\u044b).     \u0414\u043b\u044f \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u044f \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0430: \u0431\u044b\u043b \u0442\u0435\u0441\u0442 \u043d\u0430 Linux \u0441 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u043e\u043c CUBIC (\u0434\u0435\u0444\u043e\u043b\u0442\u043d\u044b\u0439 congestion control) \u043d\u0430 10G bulk-\u0442\u0440\u0430\u0444\u0438\u043a\u0435 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0445 \u043f\u043e\u0442\u0435\u0440\u044f\u0445: \u043f\u0440\u0438 loss 1% throughput \u0431\u044b\u043b ~2.36 \u0413\u0431\u0438\u0442/\u0441, \u043f\u0440\u0438 loss 5% ~0.512 \u0413\u0431\u0438\u0442/\u0441, \u043f\u0440\u0438 loss 10% ~0.028 \u0413\u0431\u0438\u0442/\u0441, \u043f\u0440\u0438 loss 15% ~0.002 \u0413\u0431\u0438\u0442/\u0441. \u0414\u043b\u044f \u0433\u0440\u0443\u0431\u043e\u0439 \u043e\u0446\u0435\u043d\u043a\u0438 \u0432\u043b\u0438\u044f\u043d\u0438\u044f \u043f\u043e\u0442\u0435\u0440\u044c \u0435\u0441\u0442\u044c \u0444\u043e\u0440\u043c\u0443\u043b\u0430 Mathis \u0438 \u043f\u043e \u043d\u0435\u0439 \u0431\u0443\u0434\u0435\u0442 \u0432\u0441\u0435 \u0435\u0449\u0435 \u0445\u0443\u0436\u0435 \u043f\u043e \u044d\u0444\u0444\u0435\u043a\u0442\u0443. \u0424\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0446\u0438\u0444\u0440\u044b \u0437\u0430\u0432\u0438\u0441\u044f\u0442 \u043e\u0442 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0430 congestion control \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0441\u0435\u0442\u0438 - \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0444\u043e\u0440\u043c\u0443\u043b\u0443 \u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u0437 \u0442\u0435\u0441\u0442\u0430 \u043a\u0430\u043a \u043e\u0440\u0438\u0435\u043d\u0442\u0438\u0440 \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043d\u044f\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u043b\u0430\u0432\u043d\u043e\u0441\u0442\u0438 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438. \u041c\u0435\u0442\u043e\u0434\u0438\u043a\u0430 \u0442\u0435\u0441\u0442\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0430 \u0442\u0443\u0442: TCP Congestion Control in Action.      \u0427\u0442\u043e\u0431\u044b \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0442\u044b \u0438 \u043e\u0446\u0435\u043d\u0438\u0442\u044c \u0438\u0445 \u0432\u043b\u0438\u044f\u043d\u0438\u0435, \u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u0440\u043e\u0446\u0435\u043d\u0442 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f \u0432 \u043e\u0431\u0449\u0435\u043c \u0442\u0440\u0430\u0444\u0438\u043a\u0435:<ul> <li>\u0434\u043e\u043b\u044f \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043e\u0432 \u0432 \u043e\u0431\u0449\u0435\u043c TCP\u2011\u0442\u0440\u0430\u0444\u0438\u043a\u0435: <code>rate(node_netstat_Tcp_RetransSegs) / rate(node_netstat_Tcp_OutSegs)</code></li> <li>RTO lower bound (\u043d\u0438\u0436\u043d\u044f\u044f \u0433\u0440\u0430\u043d\u0438\u0446\u0430 \u0442\u044f\u0436\u0451\u043b\u044b\u0445 \u043f\u043e\u0442\u0435\u0440\u044c): <code>rate(node_netstat_TcpExt_TCPTimeouts) / rate(node_netstat_Tcp_OutSegs)</code>. 1 RTO\u2011\u0442\u0430\u0439\u043c\u0430\u0443\u0442 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c 1 \u043f\u0435\u0440\u0435\u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u0433\u043c\u0435\u043d\u0442, \u0438 \u0447\u0430\u0449\u0435 \u0432\u0441\u0435\u0433\u043e \u044d\u0442\u043e \u0442\u0430\u043a.</li> <li>fast retransmits lower bound (\u043e\u043f\u0442\u0438\u043c\u0438\u0441\u0442\u0438\u0447\u043d\u0430\u044f \u043e\u0446\u0435\u043d\u043a\u0430): <code>(rate(node_netstat_Tcp_RetransSegs) - rate(node_netstat_TcpExt_TCPTimeouts)) / rate(node_netstat_Tcp_OutSegs)</code> \u0422\u043e\u0433\u0434\u0430 \u044d\u0442\u043e \u0434\u0430\u0435\u0442 \u0443\u0441\u043b\u043e\u0432\u043d\u044b\u0439 \u043f\u0440\u043e\u0446\u0435\u043d\u0442 \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0433\u043e/\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0442\u0440\u0430\u0444\u0438\u043a\u0430: <code>(rate(node_netstat_Tcp_OutSegs) - rate(node_netstat_Tcp_RetransSegs)) / rate(node_netstat_Tcp_OutSegs)</code> - \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0442\u044b \u0432\u044b\u0442\u0435\u0441\u043d\u044f\u044e\u0442 \u043f\u043e\u043b\u0435\u0437\u043d\u0443\u044e \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0443. \u0427\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u0434\u043e\u043b\u044f RTO \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0442\u043e\u0432 \u0442\u0435\u043c \u0445\u0443\u0436\u0435, \u0434\u0430\u0436\u0435 1% \u0438\u0445 \u044d\u0442\u043e \u0443\u0436\u0435 \u043e\u0447\u0435\u043d\u044c \u043c\u043d\u043e\u0433\u043e. \u0415\u0441\u043b\u0438 \u0438\u0445 \u043d\u0435\u0442, \u0442\u043e \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u043d\u0435\u0441\u0442\u0438 \u0443\u0449\u0435\u0440\u0431 \u0432\u0430\u0448\u0435\u043c\u0443 \u0442\u0440\u0430\u0444\u0438\u043a\u0443 \u0431\u044b\u0441\u0442\u0440\u044b\u0445 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0442\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043a\u0430 10-20%. \u0422\u0440\u0435\u0448\u0445\u043e\u043b\u0434\u044b \u0438\u0437 \u0442\u0435\u0441\u0442\u043e\u0432 \u0438 \u0441 \u0442\u043e \u0447\u0442\u043e \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u043b \u0432 \u043f\u0440\u043e\u0434\u0435, \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0438\u0435.</li> </ul> </li> <li>\u041d\u0435 \u0443\u043f\u0438\u0440\u0430\u0435\u043c\u0441\u044f \u043b\u0438 \u043c\u044b \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0441\u0435\u0442\u0438? - \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0441 \u043f\u0440\u043e\u0431\u043b\u0435\u043c, \u0447\u0430\u0441\u0442\u044c \u0438\u0437 \u043d\u0438\u0445 \u0441\u043f\u0440\u0430\u0432\u0435\u0434\u043b\u0438\u0432\u0430 \u0438 \u0434\u043b\u044f \u0434\u0438\u0441\u043a\u0430, \u043d\u043e \u043e\u0442\u043d\u0435\u0441 \u0441\u044e\u0434\u0430, \u0434\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0438:</li> <li>Conntrack / TIME_WAIT - Conntrack (Connection Tracking, <code>nf_conntrack</code>) \u044d\u0442\u043e \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0432 \u044f\u0434\u0440\u0435, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0435\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435 TCP/UDP \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0434\u043b\u044f NAT, firewall (iptables/nftables) \u0438 stateful \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438. \u041a\u0430\u0436\u0434\u043e\u0435 \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u044c; \u043f\u0440\u0438 \u043f\u0440\u0438\u0431\u043b\u0438\u0436\u0435\u043d\u0438\u0438 \u043a \u043b\u0438\u043c\u0438\u0442\u0443 (<code>node_nf_conntrack_entries</code> \u2192 <code>node_nf_conntrack_entries_limit</code>) \u043d\u043e\u0432\u044b\u0435 \u043a\u043e\u043d\u043d\u0435\u043a\u0442\u044b \u043e\u0442\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f - \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043a\u0430\u043a \"\u043f\u0438\u043d\u0433\u0438 \u0445\u043e\u0434\u044f\u0442, \u043d\u043e \u043d\u043e\u0432\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043a \u0411\u0414 \u0432\u0438\u0441\u044f\u0442\". TIME_WAIT - \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 TCP\u2011\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f (\u0436\u0438\u0432\u0451\u0442 ~60 \u0441\u0435\u043a\u0443\u043d\u0434 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e). \u041e\u043d\u043e \u043e\u0441\u0442\u0430\u0451\u0442\u0441\u044f \u0443 \u0441\u0442\u043e\u0440\u043e\u043d\u044b, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0437\u0430\u043a\u0440\u044b\u043b\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0432\u043e\u0439 (\u0447\u0430\u0441\u0442\u043e \u0441\u0435\u0440\u0432\u0435\u0440 \u0432 HTTP/1.1; \u0432 HTTP/2/gRPC \u044d\u0442\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043c\u044f\u0433\u0447\u0435 \u0438\u0437\u2011\u0437\u0430 \u043f\u0435\u0440\u0441\u0438\u0441\u0442\u0435\u043d\u0442\u043d\u044b\u0445 \u043a\u0430\u043d\u0430\u043b\u043e\u0432). \u0411\u043e\u043b\u044c\u0448\u043e\u0435 \u0447\u0438\u0441\u043b\u043e TIME_WAIT \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445 \u043f\u0440\u0438\u0431\u043b\u0438\u0436\u0430\u0435\u0442 \u0438\u0441\u0447\u0435\u0440\u043f\u0430\u043d\u0438\u0435 ephemeral \u043f\u043e\u0440\u0442\u043e\u0432 \u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f; \u043d\u0430 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0435 \u044d\u0442\u043e \u0443\u043f\u0438\u0440\u0430\u0435\u0442\u0441\u044f \u0432 <code>net.ipv4.ip_local_port_range</code> + \u0447\u0438\u0441\u043b\u043e \u0441\u043e\u043a\u0435\u0442\u043e\u0432 \u0432 TIME_WAIT.</li> <li>Backlog / somaxconn / SYN backlog - \u043b\u0438\u043c\u0438\u0442\u044b \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439. \u041a\u043e\u0433\u0434\u0430 \u043e\u043d\u0438 \u0443\u043f\u0438\u0440\u0430\u044e\u0442\u0441\u044f, \u044d\u0442\u043e \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043a\u0430\u043a \u201c\u043d\u043e\u0432\u044b\u0435 \u043a\u043e\u043d\u043d\u0435\u043a\u0442\u044b \u0442\u043e\u0440\u043c\u043e\u0437\u044f\u0442/\u043f\u0430\u0434\u0430\u044e\u0442\u201d, \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u0442\u0440\u0430\u0444\u0438\u043a/\u043f\u0438\u043d\u0433\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u044b\u043c\u0438. \u0412 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0445 \u044d\u0442\u043e \u043e\u0431\u044b\u0447\u043d\u043e \u043f\u0440\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f <code>node_netstat_TcpExt_ListenOverflows</code>/<code>node_netstat_TcpExt_ListenDrops</code> (listen/accept \u043e\u0447\u0435\u0440\u0435\u0434\u0438), \u0430 \u0434\u043b\u044f SYN\u2011\u0444\u0430\u0437\u044b - \u0440\u043e\u0441\u0442 <code>node_netstat_TcpExt_TCPSynRetrans</code> \u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432. \u041b\u0438\u043c\u0438\u0442\u044b \u0436\u0438\u0432\u0443\u0442 \u043d\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0443\u0440\u043e\u0432\u043d\u044f\u0445: backlog \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 (\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>listen()</code>), <code>net.core.somaxconn</code>, \u0438 <code>net.ipv4.tcp_max_syn_backlog</code>.</li> <li>File descriptors (FD) - \u043a\u0430\u0436\u0434\u043e\u0435 TCP\u2011\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435/\u0441\u043e\u043a\u0435\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u0442 FD. \u041f\u0440\u0438 \u0443\u043f\u043e\u0440\u0435 \u0432 FD \u043d\u043e\u0432\u044b\u0435 accept/connect \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0442 \u0444\u0435\u0439\u043b\u0438\u0442\u044c\u0441\u044f (\u0447\u0430\u0441\u0442\u043e \u044d\u0442\u043e \u0432\u0438\u0434\u043d\u043e \u0443\u0436\u0435 \u0432 \u043b\u043e\u0433\u0430\u0445 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043a\u0430\u043a \u201ctoo many open files\u201d). \u041d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043d\u043e\u0434\u044b \u043c\u043e\u0436\u043d\u043e \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0439 \u043f\u0443\u043b: <code>node_filefd_allocated</code> \u0438 <code>node_filefd_maximum</code>; \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e \u0435\u0441\u0442\u044c \u043b\u0438\u043c\u0438\u0442\u044b \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 (ulimit/systemd LimitNOFILE) \u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b (<code>fs.file-max</code>/<code>fs.nr_open</code>).</li> <li>Inodes - inode\u2019\u044b \u043d\u0430 \u0424\u0421 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u044e\u0442 \u0447\u0438\u0441\u043b\u043e \u0444\u0430\u0439\u043b\u043e\u0432/\u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0439. \u041f\u0440\u0438 \u0438\u0441\u0447\u0435\u0440\u043f\u0430\u043d\u0438\u0438 inodes \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432/\u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0439 (\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, Unix domain sockets \u0441 \u043f\u0443\u0442\u0451\u043c \u0432 \u0424\u0421) \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u043b\u043e\u043c\u0430\u0442\u044c\u0441\u044f \u0434\u0430\u0436\u0435 \u043f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u0430. \u041d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043d\u043e\u0434\u044b \u044d\u0442\u043e \u0432\u0438\u0434\u043d\u043e \u043f\u043e <code>node_filesystem_files_free</code> / <code>node_filesystem_files</code>.</li> </ul> <p>\u041f\u0440\u0438 \u0440\u043e\u0441\u0442\u0435 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043e\u0432 \u0438 \u0434\u0440\u043e\u043f\u043e\u0432 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0441\u0435\u0442\u044c/\u0441\u0442\u0435\u043a (\u043f\u043e\u0442\u0435\u0440\u0438, \u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439), \u0437\u0430\u0442\u0435\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435. \u041f\u0440\u0438 \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u044b\u0445 drops/retrans \u0438 \u043f\u0443\u0441\u0442\u043e\u043c PSI \u0438\u0449\u0435\u043c \u0432\u043d\u0435\u0448\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 (API/\u0411\u0414), \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0442\u0432\u0435\u0447\u0430\u044e\u0442 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e. Drops/retrans - \u0441\u0438\u0433\u043d\u0430\u043b\u044b \u043f\u043e\u0442\u0435\u0440\u044c/overflow (\u0438\u0445 \u0432\u0438\u0434\u043d\u043e \u0440\u0430\u043d\u044c\u0448\u0435, \u0447\u0435\u043c \u201c\u0443\u043f\u0451\u0440\u043b\u0438\u0441\u044c \u0432 throughput\u201d). \u0414\u043b\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u044b \u201c\u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e \u0431\u0435\u0437 \u044f\u0432\u043d\u044b\u0445 \u043f\u043e\u0442\u0435\u0440\u044c\u201d \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u044b/\u043e\u0447\u0435\u0440\u0435\u0434\u0438 TCP: <code>node_netstat_TcpExt_TCPTimeouts</code> (RTO) \u0438 \u0441\u0447\u0451\u0442\u0447\u0438\u043a\u0438 \u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439 (rcv/OFO/listen). RTT \u043a\u0430\u043a \u0432\u0435\u043b\u0438\u0447\u0438\u043d\u0430 \u043d\u0435 \u0436\u0438\u0432\u0451\u0442 \u0432 \u044d\u0442\u0438\u0445 \u0441\u0447\u0451\u0442\u0447\u0438\u043a\u0430\u0445 - \u044d\u0442\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u0441\u043e\u043a\u0435\u0442\u043e\u0432; \u0435\u0433\u043e \u0441\u043c\u043e\u0442\u0440\u044f\u0442 \u0447\u0435\u0440\u0435\u0437 <code>ss -ti</code> (tcp_info: <code>rtt</code>, <code>rto</code>, <code>retrans</code>) \u0438\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f/\u043f\u0440\u043e\u043a\u0441\u0438.</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#5-memory-fault","title":"5. Memory: \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 fault'\u044b","text":"<p>\u041d\u0430\u0447\u0438\u043d\u0430\u0435\u043c \u0441 \u043e\u0441\u0442\u0440\u044b\u0445 \u043f\u0440\u043e\u0431\u043b\u0435\u043c. * \u0415\u0441\u0442\u044c \u043b\u0438 OOM? - \u043d\u0430 \u043d\u043e\u0434\u0435 \u0441\u043c\u043e\u0442\u0440\u0438\u043c <code>node_vmstat_oom_kill</code>. \u041d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 OOM\u2011\u0441\u043e\u0431\u044b\u0442\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0432 cAdvisor \u043f\u043e <code>container_oom_events_total</code>. \u0415\u0441\u043b\u0438 OOM \u0435\u0441\u0442\u044c, \u0434\u0430\u043b\u044c\u0448\u0435 \u044d\u0442\u043e \u0443\u0436\u0435 \u043d\u0435 \u201c\u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043e\u0442\u043f\u0435\u0447\u0430\u0442\u043a\u0430\u043c\u201d, \u0430 \u0440\u0430\u0437\u0431\u043e\u0440 \u043b\u0438\u043c\u0438\u0442\u043e\u0432/requests \u0438 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u043e \u043f\u0430\u043c\u044f\u0442\u0438. * \u0423\u043f\u0438\u0440\u0430\u0435\u043c\u0441\u044f \u043b\u0438 \u0432 memory limit \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430? - \u0432 cgroup v1 cAdvisor \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u0442 <code>container_memory_failcnt</code> (\u0438\u0437 <code>memory.failcnt</code>): \u044d\u0442\u043e \u0447\u0438\u0441\u043b\u043e \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0445 \u0430\u043b\u043b\u043e\u043a\u0430\u0446\u0438\u0439 \u0438\u0437-\u0437\u0430 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043b\u0438\u043c\u0438\u0442\u0430 \u043f\u0430\u043c\u044f\u0442\u0438. \u0420\u043e\u0441\u0442 failcnt \u0431\u0435\u0437 OOM kill \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0443 \u0432\u043f\u0440\u0438\u0442\u044b\u043a \u043a \u043b\u0438\u043c\u0438\u0442\u0443 \u0441 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u043c reclaim. \u0414\u043b\u044f \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430 \u043b\u0438\u043c\u0438\u0442\u0430 \u0440\u044f\u0434\u043e\u043c \u0441\u043c\u043e\u0442\u0440\u0438\u043c <code>container_memory_usage_bytes</code> \u0438 <code>container_spec_memory_limit_bytes</code>. \u0417\u0434\u0435\u0441\u044c \u0436\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c container awareness (\u0432\u0438\u0434\u0438\u0442 \u043b\u0438 \u0440\u0430\u043d\u0442\u0430\u0439\u043c cgroup \u043b\u0438\u043c\u0438\u0442\u044b) \u0438 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0434\u0435\u0442\u0435\u043a\u0442\u0430 \u043b\u0438\u043c\u0438\u0442\u043e\u0432 \u043f\u0430\u043c\u044f\u0442\u0438 (\u0441\u043c. Ideal application deployment, \u0431\u043b\u043e\u043a 4). * \u0415\u0441\u0442\u044c \u043b\u0438 \u0437\u0430\u043f\u0430\u0441 \u043f\u0430\u043c\u044f\u0442\u0438 \u201c\u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441\u201d? - \u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0434\u043e\u043b\u044e <code>node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes</code> \u0438 \u0435\u0451 \u0434\u0438\u043d\u0430\u043c\u0438\u043a\u0443: \u0440\u0435\u0437\u043a\u0438\u0435 \u043f\u0440\u043e\u0441\u0430\u0434\u043a\u0438 \u0447\u0430\u0441\u0442\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 \u0441 \u0434\u0435\u0433\u0440\u0430\u0434\u0430\u0446\u0438\u0435\u0439 latency. \u041e\u0442\u0434\u0435\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0447\u0442\u043e \u043d\u0435 \u0443\u043f\u0451\u0440\u043b\u0438\u0441\u044c \u0432 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0442\u0440\u0435\u0448\u0445\u043e\u043b\u0434 \u0432\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u043e - \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u0437-\u0437\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u043b\u0438\u043c\u0438\u0442\u043e\u0432 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 cgroup limits/requests). * \u0415\u0441\u0442\u044c \u043b\u0438 swap \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043b\u0438 \u043e\u043d? - \u044d\u0442\u043e \u0434\u0432\u0430 \u0440\u0430\u0437\u043d\u044b\u0445 \u0432\u043e\u043f\u0440\u043e\u0441\u0430:   * swap \u0432\u043a\u043b\u044e\u0447\u0451\u043d: <code>node_memory_SwapTotal_bytes &gt; 0</code> - \u043d\u0430 \u043c\u0430\u0448\u0438\u043d\u0435 \u0432\u043e\u043e\u0431\u0449\u0435 \u0435\u0441\u0442\u044c swap (\u044d\u0442\u043e \u0435\u0449\u0451 \u043d\u0435 \u201c\u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430\u201d, \u0438 \u043e\u043d \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c, \u043d\u043e \u043f\u043e\u0432\u043e\u0434 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043d\u0430\u0441\u0442\u043e\u0440\u043e\u0436\u0438\u0442\u044c\u0441\u044f \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438).   * swap \u0437\u0430\u043d\u044f\u0442: <code>node_memory_SwapTotal_bytes - node_memory_SwapFree_bytes</code> (\u043f\u043b\u044e\u0441 <code>node_memory_SwapCached_bytes</code>) - \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u0430\u043d\u043d\u044b\u0445 \u0443\u0436\u0435 \u0432\u044b\u0442\u0435\u0441\u043d\u0435\u043d\u043e \u0438\u0437 RAM \u0432 swap. \u0421\u0430\u043c \u0444\u0430\u043a\u0442 \u201cswap \u0437\u0430\u043d\u044f\u0442\u201d \u043d\u0435 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0434\u0438\u0441\u043a \u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441 \u043d\u0430\u0433\u0440\u0443\u0436\u0435\u043d, \u043d\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0440\u0438\u0441\u043a: \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0438 \u043a \u044d\u0442\u0438\u043c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u043c \u043f\u0440\u0438\u0434\u0451\u0442\u0441\u044f \u0434\u0435\u043b\u0430\u0442\u044c page\u2011in \u0441 \u0434\u0438\u0441\u043a\u0430 \u0438 \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u0435\u0435 \u0447\u0435\u043c \u0438\u0437 RAM.   * swap \u0440\u0435\u0430\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f: <code>node_vmstat_pswpin</code> / <code>node_vmstat_pswpout</code> (\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 rate()) - \u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0440\u0435\u0430\u043b\u044c\u043d\u043e \u0445\u043e\u0434\u044f\u0442 \u043c\u0435\u0436\u0434\u0443 RAM \u0438 swap. \u042d\u0442\u043e \u043a\u0430\u043a \u0440\u0430\u0437 \u043c\u0435\u0441\u0442\u043e, \u0433\u0434\u0435 \u0434\u0438\u0441\u043a \u0430\u0444\u0444\u0435\u043a\u0442\u0438\u0442 \u043b\u0430\u0442\u0435\u043d\u0441\u0438: swap\u2011in \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 page\u2011in \u0441 \u0434\u0438\u0441\u043a\u0430 \u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0443 \u0442\u0440\u0435\u0434\u043e\u0432 \u043d\u0430 \u043f\u0443\u0442\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043f\u0430\u043c\u044f\u0442\u0438. * \u0415\u0441\u0442\u044c \u043b\u0438 \u0447\u0442\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u0441 \u0434\u0438\u0441\u043a\u0430 \u0438\u0437-\u0437\u0430 major faults? - <code>node_vmstat_pgmajfault</code>: \u0440\u043e\u0441\u0442 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0447\u0430\u0441\u0442\u044c page faults \u0441\u0442\u0430\u043b\u0430 \u201cmajor\u201d, \u0442\u043e \u0435\u0441\u0442\u044c \u044f\u0434\u0440\u0443 \u043f\u0440\u0438\u0448\u043b\u043e\u0441\u044c \u0447\u0438\u0442\u0430\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0441 \u0434\u0438\u0441\u043a\u0430, \u043f\u0440\u0435\u0436\u0434\u0435 \u0447\u0435\u043c \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435. \u0414\u0438\u0441\u043a \u0442\u0443\u0442 \u0431\u044b\u0432\u0430\u0435\u0442 \u0434\u0432\u0443\u0445 \u0442\u0438\u043f\u043e\u0432: (1) swap (swap\u2011in), (2) file-backed \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b (page cache miss / mmap). <code>node_vmstat_pswpin</code>/<code>node_vmstat_pswpout</code> - \u044d\u0442\u043e \u0441\u0447\u0451\u0442\u0447\u0438\u043a\u0438 \u0441\u0442\u0440\u0430\u043d\u0438\u0446, \u0440\u0435\u0430\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0448\u0435\u0434\u0448\u0438\u0445 \u0447\u0435\u0440\u0435\u0437 swap: \u0435\u0441\u043b\u0438 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 <code>pgmajfault</code> \u0440\u0430\u0441\u0442\u0451\u0442 <code>pswpin</code>, \u0437\u043d\u0430\u0447\u0438\u0442 major faults \u0438\u0434\u0443\u0442 \u0447\u0435\u0440\u0435\u0437 swap; \u0435\u0441\u043b\u0438 <code>pgmajfault</code> \u0440\u0430\u0441\u0442\u0451\u0442, \u0430 <code>pswpin/pswpout</code> \u043d\u0435\u0442 - \u044d\u0442\u043e \u0447\u0430\u0449\u0435 \u0447\u0442\u0435\u043d\u0438\u0435 file-backed \u0441\u0442\u0440\u0430\u043d\u0438\u0446. * Minor faults: \u0432\u0430\u0436\u043d\u044b \u043b\u0438 \u043e\u043d\u0438? - \u0441\u0430\u043c\u0438 \u043f\u043e \u0441\u0435\u0431\u0435 minor faults \u044d\u0442\u043e \u043d\u043e\u0440\u043c\u0430 (\u043f\u0435\u0440\u0432\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u043c, COW \u0438 \u0442.\u043f.). \u0418\u0445 \u0438\u043c\u0435\u0435\u0442 \u0441\u043c\u044b\u0441\u043b \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c, \u043a\u043e\u0433\u0434\u0430 \u043e\u043d\u0438 \u0440\u0430\u0441\u0442\u0443\u0442 \u043d\u0430 \u043f\u043e\u0440\u044f\u0434\u043a\u0438 \u0438 \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0442 \u043f\u0440\u0435\u0432\u0440\u0430\u0449\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u043c\u0435\u0442\u043d\u044b\u0435 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0435 \u043f\u043e CPU/latency; \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043d\u043e\u0434\u044b \u0433\u0440\u0443\u0431\u043e \u043e\u0446\u0435\u043d\u0438\u0432\u0430\u044e\u0442 \u043a\u0430\u043a <code>node_vmstat_pgfault - node_vmstat_pgmajfault</code>, \u043d\u043e \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u0443\u044e\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0435\u0451 \u0434\u0438\u043d\u0430\u043c\u0438\u043a\u0438.</p> <p>\u0414\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0437\u0430\u0432\u0438\u0441\u044f\u0442 \u043e\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438: \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0430\u043c\u044f\u0442\u044c, \u0441\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043b\u0438\u043c\u0438\u0442\u044b/requests, \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u043a\u0435\u0448\u0438/heap, \u0432\u044b\u0441\u0442\u0430\u0432\u0438\u0442\u044c GOMEMLIMIT/ActiveProcessorCount \u0438 \u0442.\u043f. \u0412 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430\u0445 \u0432\u0430\u0436\u043d\u043e \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c working set \u043e\u0442 page cache (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <code>container_memory_working_set_bytes</code> vs usage).</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#6","title":"6. \u0415\u0441\u043b\u0438 \u043e\u0442\u043f\u0435\u0447\u0430\u0442\u043a\u043e\u0432 \u043d\u0435\u0442","text":"<p>PSI \u2248 0, \u0434\u0438\u0441\u043a/\u0441\u0435\u0442\u044c/\u043f\u0430\u043c\u044f\u0442\u044c \u0441\u043f\u043e\u043a\u043e\u0439\u043d\u044b, \u043d\u043e \u0441\u0435\u0440\u0432\u0438\u0441 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u0439? \u0417\u043d\u0430\u0447\u0438\u0442, \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043b\u0435\u0436\u0438\u0442 \u0432\u044b\u0448\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u041e\u0421:</p> <ul> <li>\u0432\u043d\u0435\u0448\u043d\u044f\u044f \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c (\u0411\u0414, API) - \u0438\u0449\u0435\u043c \u043f\u043e \u0442\u0440\u0435\u0439\u0441\u0438\u043d\u0433\u0443 \u0438 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f;</li> <li>lock contention \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 - \u0441\u043c. <code>futex_wait</code> \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0430\u0445 off-CPU;</li> <li>\u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0437\u043c - \u043e\u0434\u043d\u043e\u043f\u043e\u0442\u043e\u0447\u043d\u044b\u0439 hot path, \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u043f\u0443\u043b, \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 backpressure.</li> </ul> <p>\u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u043a \u043f\u0440\u043e\u0444\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e \u043a\u043e\u0434\u0430 (on-CPU \u0438 off-CPU \u043f\u0440\u043e\u0444\u0430\u0439\u043b\u0435\u0440\u044b, \u0442\u0440\u0435\u0439\u0441\u0438\u043d\u0433).</p>","tags":["performance","linux","observability"]},{"location":"ru/application-footprint.html#_2","title":"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0434\u0430\u043b\u044c\u0448\u0435","text":"<p>System Footprint Method \u0434\u0430\u0451\u0442 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435, \u043d\u043e \u043d\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u0435. \u0414\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0437\u0430\u0432\u0438\u0441\u044f\u0442 \u043e\u0442 \u0442\u043e\u0433\u043e, \u0433\u0434\u0435 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430:</p> <p>\u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0432 \u0441\u043e\u0444\u0442\u0435 (\u0432\u044b\u0441\u043e\u043a\u0438\u0439 user time \u0431\u0435\u0437 PSI, lock contention, \u0432\u043d\u0435\u0448\u043d\u0438\u0435 API): * \u041f\u0440\u043e\u0444\u0438\u043b\u0438\u0440\u0443\u0435\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435: on-CPU (perf, pprof), off-CPU (offcputime), \u0442\u0440\u0435\u0439\u0441\u0438\u043d\u0433 (OpenTelemetry, Jaeger). * \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0435\u043c \u043a\u043e\u0434, \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u044b, \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0437\u043c.</p> <p>\u0415\u0441\u043b\u0438 \u043c\u0435\u0442\u0440\u0438\u043a \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 (\u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443, \u043d\u043e \u0434\u0435\u0442\u0430\u043b\u0438 \u0441\u043a\u0440\u044b\u0442\u044b): * \u0418\u0434\u0451\u043c \u043d\u0430 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0445\u043e\u0441\u0442\u0430: \u0441\u043c\u043e\u0442\u0440\u0438\u043c node_exporter \u043c\u0435\u0442\u0440\u0438\u043a\u0438 \u043d\u043e\u0434\u044b, \u0433\u0434\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440. * \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c, \u043d\u0435 \u0448\u0430\u0440\u0438\u0442\u0441\u044f \u043b\u0438 \u0443\u0437\u043a\u043e\u0435 \u043c\u0435\u0441\u0442\u043e (CPU, \u0434\u0438\u0441\u043a, \u0441\u0435\u0442\u044c) \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0441\u0435\u0434\u044f\u043c\u0438. * \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b: <code>perf</code>, <code>bpftrace</code>, <code>iotop</code>, <code>tcpdump</code>.</p> <p>\u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0432 \u0440\u0435\u0441\u0443\u0440\u0441\u0430\u0445 \u0445\u043e\u0441\u0442\u0430 (PSI \u0432\u044b\u0441\u043e\u043a\u0438\u0439, util 100%, latency \u0440\u0430\u0441\u0442\u0451\u0442): * \u0422\u044e\u043d\u0438\u043c \u0441\u0438\u0441\u0442\u0435\u043c\u0443: scheduler (CFS/nice), I/O scheduler (mq-deadline/kyber), \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b (RSS/RPS, ring buffers), \u043f\u0430\u043c\u044f\u0442\u044c (vm.swappiness, THP). * \u041d\u0430\u043a\u0438\u0434\u044b\u0432\u0430\u0435\u043c \u0440\u0435\u0441\u0443\u0440\u0441\u044b: \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c CPU/RAM, \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u043d\u0430 \u0431\u043e\u043b\u0435\u0435 \u0431\u044b\u0441\u0442\u0440\u044b\u0435 \u0434\u0438\u0441\u043a\u0438 (NVMe), \u0443\u043b\u0443\u0447\u0448\u0430\u0435\u043c \u0441\u0435\u0442\u044c (10G \u2192 25G, \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u043c RTT). * \u041f\u0435\u0440\u0435\u043d\u043e\u0441\u0438\u043c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443: \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0435 \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u043f\u0435\u0440\u0435\u043d\u043e\u0441 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432 \u043d\u0430 \u0434\u0440\u0443\u0433\u0438\u0435 \u043d\u043e\u0434\u044b.</p> <p>System Footprint Method - \u044d\u0442\u043e \u0447\u0435\u043a-\u043b\u0438\u0441\u0442 \u0434\u043b\u044f \u0431\u044b\u0441\u0442\u0440\u043e\u0439 \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0438, \u0430 \u043d\u0435 \u0437\u0430\u043c\u0435\u043d\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0430\u043c. \u041e\u043d \u043f\u043e\u043a\u0430\u0436\u0435\u0442, \u0441 \u0447\u0435\u0433\u043e \u043d\u0430\u0447\u0430\u0442\u044c \u043a\u043e\u043f\u0430\u0442\u044c.</p> <p>\u0412 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0439 \u0441\u0435\u0440\u0438\u0438 \u2014 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u043b\u0438\u0441\u044c \u0441 \u0442\u0435\u043c, \u043a\u0430\u043a \u0434\u0435\u043f\u043b\u043e\u0438\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0431\u0435\u0437 \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433\u0430.</p> <p>\u0414\u0430\u043b\u044c\u0448\u0435 \u044f \u0431\u0443\u0434\u0443 \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u0440\u043e \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0437\u043c \u0438 \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 CPU.</p>","tags":["performance","linux","observability"]},{"location":"ru/blog.html","title":"\u0411\u043b\u043e\u0433","text":"<p>\u0420\u0443\u0441\u0441\u043a\u0438\u0435 \u043b\u043e\u043d\u0433\u0440\u0438\u0434\u044b \u043e \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438, \u043d\u0430\u0431\u043b\u044e\u0434\u0430\u0435\u043c\u043e\u0441\u0442\u0438 \u0438 \u043d\u0430\u0434\u0435\u0436\u043d\u043e\u0441\u0442\u0438.</p> \u0411\u043b\u043e\u043a 1 \u00b7 3 \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f Function: the atomic unit of code <p>The First Nine Guide, \u0431\u043b\u043e\u043a 1: \u0430\u0442\u043e\u043c \u043a\u043e\u0434\u0430, \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u044b</p> first-nineseriesperformancefunctions \u0427\u0438\u0442\u0430\u0442\u044c -&gt; \u0411\u043b\u043e\u043a 2 \u00b7 4 \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f Runtime models: \u043a\u0430\u043a \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0442\u044b\u0441\u044f\u0447\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e <p>The First Nine Guide, \u0431\u043b\u043e\u043a 2: \u043c\u043e\u0434\u0435\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0438 \u0438\u0445 \u043a\u043e\u043c\u043f\u0440\u043e\u043c\u0438\u0441\u0441\u044b</p> first-nineseriesruntimeconcurrency \u0427\u0438\u0442\u0430\u0442\u044c -&gt; \u0411\u043b\u043e\u043a 3 \u00b7 4 \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f Typical web-application inner architecture <p>The First Nine Guide, \u0431\u043b\u043e\u043a 3: \u0441\u043b\u043e\u0438 \u0432\u0435\u0431-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0438 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430</p> first-nineseriesarchitecturehttp \u0427\u0438\u0442\u0430\u0442\u044c -&gt; \u0411\u043b\u043e\u043a 4 \u00b7 5 \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f Ideal application deployment <p>The First Nine Guide, \u0431\u043b\u043e\u043a 4: \u043a\u0430\u043a \u0434\u0435\u043f\u043b\u043e\u0438\u0442\u044c \u0431\u0435\u0437 \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433\u0430 \u0438 \u0441\u044e\u0440\u043f\u0440\u0438\u0437\u043e\u0432</p> first-nineseriesdeploymentcontainers \u0427\u0438\u0442\u0430\u0442\u044c -&gt; \u0411\u043b\u043e\u043a 5 \u00b7 20+ \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f Application footprint in operating system <p>System Footprint: \u043a\u0430\u043a \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b OS \u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u043e \u0441\u043b\u0435\u0434\u0430\u043c \u0432 \u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0445</p> performancelinuxobservability \u0427\u0438\u0442\u0430\u0442\u044c -&gt; 1 \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f \u041e\u0431\u043e \u043c\u043d\u0435 \u0427\u0438\u0442\u0430\u0442\u044c -&gt; 1 \u043c\u0438\u043d \u0447\u0442\u0435\u043d\u0438\u044f \u0414\u0430\u0448\u0431\u043e\u0440\u0434\u044b \u0427\u0438\u0442\u0430\u0442\u044c -&gt;"},{"location":"ru/dashboards.html","title":"\u0414\u0430\u0448\u0431\u043e\u0440\u0434\u044b","text":"<ul> <li>System Footprint (SFP) \u2014 Grafana JSON: system-footprint.json</li> </ul>"},{"location":"ru/function-atomic-unit.html","title":"Function: the atomic unit of code","text":"<p>The First Nine Guide. \u0411\u043b\u043e\u043a 1</p> <p></p> <p>\u0424\u0443\u043d\u043a\u0446\u0438\u0438 - \u0432\u0430\u0436\u043d\u0430\u044f \u0448\u0442\u0443\u043a\u0430 \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041a\u043e\u0433\u0434\u0430 \u0432 \u0441\u0435\u0440\u0432\u0438\u0441 \u043f\u0440\u0438\u0445\u043e\u0434\u044f\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u044b, \u043e\u043d\u0438 \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0442 \u043f\u043e\u0434 \u0441\u043e\u0431\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438. \u041a\u0430\u043a\u0438\u0435-\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e, \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u0431\u044b\u0441\u0442\u0440\u043e. \u0427\u0442\u043e\u0431\u044b \u043b\u0443\u0447\u0448\u0435 \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c \u0432 \u0447\u0435\u043c \u0438\u0445 \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u0438 \u043a\u0430\u043a\u0438\u0435 \u043e\u043d\u0438 \u0432\u043e\u043e\u0431\u0449\u0435 \u0431\u044b\u0432\u0430\u044e\u0442, \u044f \u043a\u043b\u0430\u0441\u0441\u0438\u0444\u0438\u0446\u0438\u0440\u0443\u044e \u0438\u0445 \u043f\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u043f\u0440\u0438\u0437\u043d\u0430\u043a\u0430\u043c:</p> <ol> <li>\u041f\u043e \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0430 \u0432\u043d\u0443\u0442\u0440\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</li> <li>\u041f\u043e \u0442\u0438\u043f\u0443 \u0440\u0435\u0441\u0443\u0440\u0441\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044f.</li> <li>\u041f\u043e \u043f\u043e\u0442\u043e\u043a\u043e\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438.</li> </ol> <p>\u041f\u043e\u0433\u043d\u0430\u043b\u0438 \u043f\u043e \u043f\u043e\u0440\u044f\u0434\u043a\u0443.</p>","tags":["first-nine","series","performance","functions"]},{"location":"ru/function-atomic-unit.html#_1","title":"\u0410\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c","text":"<p>\u0424\u0443\u043d\u043a\u0446\u0438\u044f - \u044d\u0442\u043e \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u043a\u0438\u0440\u043f\u0438\u0447 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438. \u041f\u0435\u0440\u0432\u0430\u044f \u0438 \u0441\u0430\u043c\u0430\u044f \u0433\u0440\u0443\u0431\u0430\u044f \u043e\u0446\u0435\u043d\u043a\u0430 \u0435\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f - \u044d\u0442\u043e Big-O (O-\u0431\u043e\u043b\u044c\u0448\u043e\u0435).</p> <p>\u041f\u0435\u0440\u0435\u0434 \u0442\u0435\u043c \u043a\u0430\u043a \u0432\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u0437\u0430\u043a\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0433\u043b\u0430\u0437\u0430, \u0441\u043a\u0430\u0436\u0443: \u043d\u0435 \u0431\u0443\u0434\u0443 \u043c\u0443\u0447\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u043e\u0439, \u0442\u0443\u0442 \u0432\u0441\u0435 \u043f\u0440\u0435\u0434\u0435\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0441\u0442\u043e. \u0427\u0442\u043e\u0431\u044b \u043d\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u0442\u044c\u0441\u044f \u043f\u0440\u0438 \u0430\u043d\u0430\u043b\u0438\u0437\u0435 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043a\u043e\u0434\u0430, \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e:</p> <ul> <li>\u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c O(1) \u043e\u0442 O(n^2)</li> <li>\u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c, \u0447\u0442\u043e O(n log n) - \u0433\u0440\u0430\u043d\u0438\u0446\u0430, \u0437\u0430 \u043d\u0435\u0439 \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0435\u0447\u043d\u0430\u044f \u0431\u043e\u043b\u044c</li> <li>\u0437\u0430\u043c\u0435\u0447\u0430\u0442\u044c, \u043a\u043e\u0433\u0434\u0430 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c \u0432\u043d\u0435\u0437\u0430\u043f\u043d\u043e \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f O(n!)</li> </ul> <p></p> <p>\u0412\u044b\u0448\u0435 \u0436\u0435\u043b\u0442\u043e\u0439 \u043b\u0438\u043d\u0438\u0438 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u0438 \u0440\u043e\u0441\u0442\u0435 \u043e\u0431\u044a\u0435\u043c\u0430 \u0434\u0430\u043d\u043d\u044b\u0445.</p> <p>\u0412\u043e\u0442 \u043f\u0440\u0438\u043c\u0435\u0440\u044b \u0438 \u043f\u043e\u0440\u043e\u0433\u0438 \u0434\u043b\u044f n (\u0434\u043b\u044f O(n!) \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u0442\u044c \u043d\u0435 \u0441\u043c\u043e\u0433):</p> <p></p>","tags":["first-nine","series","performance","functions"]},{"location":"ru/function-atomic-unit.html#_2","title":"\u0422\u0438\u043f\u044b \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u043c\u044b\u0445 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432","text":"<p>\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f - \u044d\u0442\u043e \u043d\u0435 \u0432\u0441\u0435, \u043c\u044b \u0436\u0435 \u043f\u0440\u043e \u043f\u0435\u0440\u0444\u043e\u0440\u043c\u0430\u043d\u0441.</p> <p>\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0436\u0434\u0443\u0442 \u0434\u0438\u0441\u043a, \u0441\u0435\u0442\u044c \u0438\u043b\u0438 \u043a\u044d\u0448, \u0434\u0440\u0443\u0433\u0438\u0435 - \u043a\u0443\u0448\u0430\u044e\u0442 CPU.</p> <p>\u041d\u0430\u043c \u0432\u0430\u0436\u043d\u043e \u043a\u043b\u0430\u0441\u0441\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e (\u0436\u0435\u043b\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0430 \u044d\u0442\u0430\u043f\u0435 \u0435\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f):</p> <ul> <li>IO-bound - \u0436\u0434\u0435\u0442 \u0441\u0435\u0442\u044c, \u0434\u0438\u0441\u043a, \u0411\u0414</li> <li>CPU-bound - \u043f\u0430\u0440\u0441\u0438\u0442, \u0441\u0447\u0438\u0442\u0430\u0435\u0442</li> <li>Memory-bound - \u0442\u0430\u0449\u0438\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 RAM, \u043d\u043e \u043d\u0435 \u043d\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 CPU</li> <li>GPU-bound - \u043f\u043e\u043d\u044f\u0442\u043d\u043e, \u043a\u0443\u0448\u0430\u0435\u0442 GPU</li> </ul> <p>\u042d\u0442\u043e \u0432\u0430\u0436\u043d\u043e, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c, \u0433\u0434\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0437\u0430\u0440\u044b\u0442 \u0431\u043e\u0442\u043b\u043d\u0435\u043a: \u0432 \u044f\u0434\u0440\u0435, \u043f\u0430\u043c\u044f\u0442\u0438, \u0441\u043e\u043a\u0435\u0442\u0435 \u0438\u043b\u0438 \u0432 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0435.</p> <p></p>","tags":["first-nine","series","performance","functions"]},{"location":"ru/function-atomic-unit.html#_3","title":"\u041f\u043e\u0442\u043e\u043a\u043e\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","text":"<p>\u0415\u0441\u043b\u0438 \u043a\u043e\u0434 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e - \u0430 \u043e\u043d \u043f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e - \u0432\u0430\u0436\u043d\u043e \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441\u044b:</p> <ul> <li>\u0430 \u043c\u044b \u043d\u0435 \u0438\u0441\u043f\u043e\u0440\u0442\u0438\u043c \u043b\u0438 \u043e\u0431\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435?</li> <li>\u0430 \u043c\u044b \u043d\u0435 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u043c \u043b\u0438 \u0441\u043e\u0441\u0435\u0434\u0435\u0439?</li> </ul> <p>\u0420\u0430\u0437\u0434\u0435\u043b\u044f\u044e\u0442 3 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0439:</p> <ul> <li>Thread-safe - \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c \u0438\u0437 \u043b\u044e\u0431\u043e\u0433\u043e \u043f\u043e\u0442\u043e\u043a\u0430</li> <li>Thread-unsafe - \u043c\u043e\u0436\u0435\u0442 \u0432\u0441\u0435 \u043f\u043e\u043b\u043e\u043c\u0430\u0442\u044c (\u0437\u043d\u0430\u0439\u0442\u0435 \u0438\u0445 \u0432 \u043b\u0438\u0446\u043e)</li> <li>Conditionally-safe - \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u0441\u043e\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439</li> </ul> <p>\u041f\u043e\u0442\u043e\u043a\u043e\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0435 (Thread-safe):</p> <ol> <li>\u0420\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0441 \u043d\u0435\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u044b\u043c\u0438 (immutable) \u0434\u0430\u043d\u043d\u044b\u043c\u0438.</li> <li>\u041d\u0435 \u0438\u043c\u0435\u044e\u0442 \u043e\u0431\u0449\u0435\u0433\u043e \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u043e\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f.</li> <li>\u0414\u043e\u0441\u0442\u0443\u043f \u043a \u043e\u0431\u0449\u0438\u043c \u0434\u0430\u043d\u043d\u044b\u043c \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d (\u0447\u0435\u0440\u0435\u0437 \u043b\u043e\u043a\u0438).</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u0442\u043e\u043c\u0430\u0440\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438.</li> </ol> <p>\u041f\u043e\u0442\u043e\u043a\u043e\u043d\u0435\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0435 (Thread-unsafe):</p> <ol> <li>\u0418\u0437\u043c\u0435\u043d\u044f\u044e\u0442 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435.</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 \u0441\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u044b\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.</li> <li>\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442 \u043d\u0435\u0430\u0442\u043e\u043c\u0430\u0440\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \"\u0447\u0442\u0435\u043d\u0438\u0435-\u043c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f-\u0437\u0430\u043f\u0438\u0441\u044c\".</li> <li>\u041f\u0440\u0438\u043c\u0435\u0440\u044b: strtok() \u0432 C, SimpleDateFormat \u0432 Java.</li> </ol> <p>\u0423\u0441\u043b\u043e\u0432\u043d\u043e-\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0435:</p> <ol> <li>\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0432\u043d\u0435\u0448\u043d\u0435\u0439 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u0438.</li> <li>\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f \u043d\u0430\u0434 \u043e\u0431\u0449\u0438\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438.</li> </ol>","tags":["first-nine","series","performance","functions"]},{"location":"ru/function-atomic-unit.html#call-overhead","title":"Call overhead","text":"<p>\u041a\u0430\u0436\u0434\u044b\u0439 \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u0432\u044b\u0437\u043e\u0432, \u043b\u044e\u0431\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0443\u0447\u0430\u0441\u0442\u043e\u043a \u043f\u0430\u043c\u044f\u0442\u0438 \u043f\u043e\u0434 \u0441\u0435\u0431\u044f - \u043e\u043d \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f stack frame.</p> <p>\u041a\u0430\u0436\u0434\u044b\u0439 \u043d\u043e\u0432\u044b\u0439 \u0432\u044b\u0437\u043e\u0432 \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u043d\u043e\u0432\u044b\u0439 \u0444\u0440\u0435\u0439\u043c \u043d\u0430\u0432\u0435\u0440\u0445\u0443 \u0441\u0442\u0435\u043a\u0430. \u041a\u043e\u0433\u0434\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430, \u043a\u0430\u0434\u0440 \u0443\u0434\u0430\u043b\u044f\u0435\u0442\u0441\u044f. \u0414\u0430\u0436\u0435 int sum(int a, int b) \u0441\u043e\u0437\u0434\u0430\u0435\u0442 16-64 \u0431\u0430\u0439\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432.</p> <p></p> <p>\u0417\u0430\u0447\u0435\u043c \u044d\u0442\u043e \u0432\u043e\u043e\u0431\u0449\u0435 \u0437\u043d\u0430\u0442\u044c?</p> <p>\u041f\u0440\u043e\u0441\u0442\u043e:</p> <ul> <li>\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 stack frame? 10-50 CPU \u0446\u0438\u043a\u043b\u043e\u0432 (\u043e\u0447\u0435\u043d\u044c \u0431\u044b\u0441\u0442\u0440\u043e, \u043d\u043e \u0432\u043e\u0442 \u0432 \u0446\u0438\u043a\u043b\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u043d\u043e).</li> </ul> <p>\u0427\u0435\u043c \u0433\u043b\u0443\u0431\u0436\u0435 \u0437\u0430\u043a\u043e\u043f\u0430\u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0432 \u043a\u043e\u0434\u0435 \u0447\u0435\u0440\u0435\u0437 \u0446\u0435\u043f\u043e\u0447\u043a\u0443 \u0432\u044b\u0437\u043e\u0432\u043e\u0432, \u0442\u0435\u043c \u0434\u043e\u0440\u043e\u0436\u0435 \u0435\u0435 \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c (\u043f\u0440\u0438\u0432\u0435\u0442, stack overflow). \u041b\u044f\u043c\u0431\u0434\u044b/\u0430\u043d\u043e\u043d\u0438\u043c\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0435\u0449\u0435 \u0434\u043e\u0440\u043e\u0436\u0435.</p> <p>\u0413\u0440\u044f\u0437\u043d\u044b\u0439 \u0445\u0430\u043a: inline-\u0444\u0443\u043d\u043a\u0446\u0438\u044f. \u041e\u043d\u0430 \u043d\u0435 \u0442\u0430\u0449\u0438\u0442 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 stack frame, \u043d\u043e try/catch/finally \u043b\u043e\u043c\u0430\u044e\u0442 inlining.</p>","tags":["first-nine","series","performance","functions"]},{"location":"ru/function-atomic-unit.html#_4","title":"\u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u043b\u043e\u0432\u0443\u0448\u043a\u0438 (\u0437\u0430\u0432\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u0435\u043c \u0441 \u0441\u043e\u0431\u043e\u0439)","text":"<p>\u0426\u0438\u043a\u043b\u044b:</p> <ul> <li>\u041a\u043e\u043d\u043a\u0430\u0442\u0435\u043d\u0430\u0446\u0438\u044f \u0441\u0442\u0440\u043e\u043a \u0432 \u0446\u0438\u043a\u043b\u0435 (str += char \u0447\u0430\u0441\u0442\u043e \u0434\u0430\u0435\u0442 O(n^2)).</li> <li>\u0412\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0446\u0438\u043a\u043b\u044b \u043f\u043e \u0431\u043e\u043b\u044c\u0448\u0438\u043c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f\u043c (\u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u043d\u0435 \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u043c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f\u043c).</li> </ul> <p>\u0420\u0438\u0441\u043a \u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043a\u0430 (Stack Overflow):</p> <ul> <li>\u041a\u0430\u0436\u0434\u044b\u0439 \u0432\u044b\u0437\u043e\u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u0444\u0440\u0435\u0439\u043c \u043d\u0430 \u0441\u0442\u0435\u043a\u0435 (~100-1000 \u0431\u0430\u0439\u0442).</li> <li>\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0433\u043b\u0443\u0431\u043e\u043a\u0430\u044f \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u044f \u0438\u0441\u0447\u0435\u0440\u043f\u0430\u0435\u0442 \u0441\u0442\u0435\u043a (\u043e\u0431\u044b\u0447\u043d\u043e ~1 \u041c\u0411 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e).</li> </ul> <p>Hybrid-bound \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u0441\u043c\u0435\u0448\u0438\u0432\u0430\u043d\u0438\u0435 \u0442\u0438\u043f\u043e\u0432:</p> <ul> <li>Blocking I/O \u0432 CPU \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0441\u043b\u043e\u0436\u043d\u043e \u0434\u0435\u0431\u0430\u0436\u0438\u0442\u044c \u0438 \u0441\u043a\u0435\u0439\u043b\u0438\u0442\u044c, \u043b\u0443\u0447\u0448\u0435 \u0438\u0437\u0431\u0435\u0433\u0430\u0442\u044c.</li> </ul> <p>\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c \u0432\u044b\u043f\u0443\u0441\u043a\u0435 - \u0440\u0430\u0437\u0431\u043e\u0440 runtime \u043c\u043e\u0434\u0435\u043b\u0435\u0439.</p> <p>\u041f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0439\u0441\u044f \u043d\u0430 \u043a\u0430\u043d\u0430\u043b @r9yo11yp9e - \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043a\u0430\u0442\u044c \u0434\u0435\u0432\u044f\u0442\u043a\u0438 \u0432\u043c\u0435\u0441\u0442\u0435.</p>","tags":["first-nine","series","performance","functions"]},{"location":"ru/ideal-deployment.html","title":"Ideal application deployment","text":"<p>The First Nine Guide. \u0411\u043b\u043e\u043a 4</p> <p></p> <p>\u0418\u0442\u0430\u043a, \u043d\u0430\u043a\u043e\u043d\u0435\u0446-\u0442\u043e - \u043c\u044b \u043d\u0430\u043f\u0438\u0441\u0430\u043b\u0438 \u0438\u0434\u0435\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u0435\u0431-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435:</p> <ol> <li>\u0412 \u043d\u0435\u043c \u043f\u0440\u043e\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u0430 \u0438 \u0441\u043d\u0438\u0436\u0435\u043d\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u043e\u0441\u0442\u044c \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043c\u0435\u0442\u043e\u0434\u0430 \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043a\u0430\u043a \u044d\u0442\u043e \u043c\u044b \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u043b\u0438 \u0432 \u0431\u043b\u043e\u043a\u0435 1.</li> <li>\u041c\u044b \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043b\u0443\u0447\u0448\u0438\u0439 \u0440\u0430\u043d\u0442\u0430\u0439\u043c \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u0447\u0443, \u043e\u043f\u0438\u0440\u0430\u044f\u0441\u044c \u043d\u0430 \u043c\u043e\u0434\u0435\u043b\u0438 \u0438\u0437 \u0431\u043b\u043e\u043a\u0430 2.</li> <li>\u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u043a\u043e\u0434\u0430 \u043c\u044b \u043f\u043e\u043d\u0438\u043c\u0430\u043b\u0438 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044e\u044e \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0443, \u043e\u0442 \u044d\u0442\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u043c.</li> </ol> <p>\u0418 \u043f\u043e\u0434\u043e\u0448\u043b\u0438 \u0432\u043f\u043b\u043e\u0442\u043d\u0443\u044e \u043a \u043c\u043e\u043c\u0435\u043d\u0442\u0443, \u043a\u043e\u0433\u0434\u0430 \u043d\u0430\u043c \u043d\u0430\u0434\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0435\u0433\u043e \u0432 \u043f\u0440\u043e\u0434\u0435. \u041d\u0443 \u0438 \u043a\u043e\u043d\u0435\u0447\u043d\u043e \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435. \u0420\u0430\u0437\u0431\u0435\u0440\u0435\u043c\u0441\u044f, \u0447\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0439\u0442\u0438 \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0443\u0442\u043d\u043e \u043e\u0446\u0435\u043d\u0438\u043c \u044f\u0437\u044b\u043a\u0438 \u0438 \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u0438 \u0437\u0430 \u0442\u043e, \u043d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043e\u043d\u0438 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u043f\u0440\u043e\u0439\u0442\u0438 \u044d\u0442\u043e\u0442 \u043f\u0443\u0442\u044c \u0431\u0435\u0437 \u043b\u043e\u0432\u0443\u0448\u0435\u043a \u0438 \u0431\u043e\u043b\u0438.</p> <p>\u041a\u0430\u043a \u0431\u0443\u0434\u0435\u043c \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0442\u044c\u0441\u044f? \u0412\u0441\u0435\u043c \u0441\u0434\u0435\u043b\u0430\u0435\u043c \u0441\u0445\u0435\u043c\u0443 \u0432 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430\u0445 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438 \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440.</p> <p>\u0412 \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0445\u0435\u043c\u0435 \u0442\u0440\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u0441\u0432\u0435\u0440\u0445\u0443 \u0432\u043d\u0438\u0437:</p> <p>1) \u041d\u0430\u0438\u0432\u043d\u044b\u0439 - \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \"\u043a\u0430\u043a \u0435\u0441\u0442\u044c\", \u0431\u0435\u0437 \u0442\u044e\u043d\u0438\u043d\u0433\u0430: \u043f\u0440\u043e\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0442\u0438\u043f\u043e\u0432\u044b\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b.</p> <p>2) \u041f\u043e\u0434\u043a\u0440\u0443\u0447\u0435\u043d\u043d\u044b\u0439 - \u0441\u043d\u0438\u043c\u0430\u0435\u043c CPU limits (quota=0) \u0438 \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u043c \u0431\u0430\u0437\u043e\u0432\u044b\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b: \u0443\u0431\u0438\u0440\u0430\u0435\u043c CFS throttling \u0438 \u043d\u0435\u043f\u0440\u0435\u0434\u0441\u043a\u0430\u0437\u0443\u0435\u043c\u043e\u0441\u0442\u044c.</p> <p>3) \u0418\u0434\u0435\u0430\u043b\u044c\u043d\u044b\u0439 - \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b (requests/\u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0437\u043c) \u0438 \u043b\u0438\u043c\u0438\u0442\u044b \u043f\u0430\u043c\u044f\u0442\u0438.</p> <p>\u0421\u043f\u0440\u0430\u0432\u0430 \u043e\u0442 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432 \u043f\u043e\u0434\u0441\u0432\u0435\u0447\u0438\u0432\u0430\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 \u0442\u0440\u0435\u0434\u0430\u043c\u0438, \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0437\u043c \u0438 \u0438\u0445 \u043c\u0430\u043f\u043f\u0438\u043d\u0433 \u043d\u0430 \u0442\u044f\u0436\u0435\u043b\u044b\u0435 \u043f\u043e\u0442\u043e\u043a\u0438 \u041e\u0421.</p> <p>\u041f\u043e\u0447\u0435\u043c\u0443 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u0441\u043d\u0438\u043c\u0430\u0442\u044c CPU limits?</p> <ul> <li>\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u043d\u043e: \u044f\u0434\u0440\u043e \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043f\u0440\u0438\u0442\u043e\u0440\u043c\u0430\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u0441\u0441 (CFS throttling). \u0412\u0440\u0435\u043c\u044f \u043e\u0442\u0432\u0435\u0442\u0430 \u0441\u043a\u0430\u0447\u0435\u0442, \u043f\u0440\u0438 \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0445 \u043f\u0438\u043a\u0430\u0445 \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 CPU.</li> <li>\u0427\u0442\u043e \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c: cpu.requests - \u0446\u0435\u043b\u0435\u0432\u0430\u044f \u0434\u043e\u043b\u044f CPU \u0434\u043b\u044f \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0430 Kubernetes, \u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e memory.limits + memory.requests.</li> </ul> <p>(\u0432 \u0446\u0435\u043b\u043e\u043c \u043d\u0430 \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0441\u0442 \u0432 \u043a\u0430\u043d\u0430\u043b\u0435, \u043d\u043e \u0440\u0430\u0434\u0438 \u0445\u043e\u043b\u0438\u0432\u0430\u0440\u0430 - \u0437\u0430\u043b\u0435\u0442\u0430\u0439\u0442\u0435 \u0432 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u044b)</p> <p>\u041a\u043e\u0433\u0434\u0430 \u043b\u0438\u043c\u0438\u0442\u044b \u043d\u0443\u0436\u043d\u043e \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c?</p> <p>\u041a\u043e\u0433\u0434\u0430 \u0443 \u0432\u0430\u0441 \u043d\u0435\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u0443\u0435\u043c\u043e\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435 CPU, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0435\u0441\u043b\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u0445\u043e\u0447\u0435\u0442 \u0441\u044a\u0435\u0441\u0442\u044c \u0432\u0441\u0435 \u044f\u0434\u0440\u0430 \u043d\u043e\u0434\u044b. \u041b\u0438\u043c\u0438\u0442\u044b \u043e\u043f\u0440\u0430\u0432\u0434\u0430\u043d\u044b \u043f\u0440\u0438 \u043d\u0435\u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u043e\u043c \u043a\u043e\u0434\u0435 \u0438\u043b\u0438 \u0448\u0430\u0440\u0435\u043d\u043d\u043e\u043c \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0435. \u041f\u043e\u0434\u0445\u043e\u0434 \u0431\u0435\u0437 cpu.limits \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0437\u0430\u0432\u044b\u0448\u0430\u0442\u044c cpu.requests \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f, \u0437\u0430 \u044d\u0442\u0438\u043c \u043d\u0430\u0434\u043e \u0441\u043b\u0435\u0434\u0438\u0442\u044c. \u0422\u0435\u0441\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0434 \u0442\u0435\u043c \u043a\u0430\u043a \u0441\u043d\u0438\u043c\u0430\u0442\u044c \u043b\u0438\u043c\u0438\u0442\u044b.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ru/ideal-deployment.html#java-virtual-machine-11","title":"Java Virtual Machine 11+","text":"<p>\u0420\u0430\u043d\u0435\u0435 \u044f \u043f\u0438\u0441\u0430\u043b \u043f\u043e\u0441\u0442 \u043f\u0440\u043e \u0442\u043e \u043a\u0430\u043a \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c JVM \u0438 \u043d\u0435 \u0432\u0437\u043e\u0440\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043f\u0440\u043e\u0434\u0435. \u041a\u043e\u0440\u043e\u0442\u043a\u043e \u043f\u0440\u043e\u0434\u0443\u0431\u043b\u0438\u0440\u0443\u044e, \u0447\u0442\u043e\u0431\u044b \u0441\u0442\u0430\u0442\u044c\u044f \u0431\u044b\u043b\u0430 \u043f\u043e\u043b\u043d\u043e\u0439.</p> <p></p> <p>\u041d\u0430\u0438\u0432\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>JVM \u0432\u0438\u0434\u0438\u0442 \u043b\u0438\u043c\u0438\u0442 \u0432 2 CPU \u0438 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0437\u043c \u043f\u043e\u0434 \u043d\u0435\u0433\u043e: GC, ForkJoinPool \u0438 \u043f\u0443\u043b\u044b \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440\u043e\u0432 (Tomcat). \u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430: \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433 \u043d\u0430 \u0441\u0442\u0430\u0440\u0442\u0435, \u0441\u043a\u0430\u0447\u043a\u0438 \u043b\u0430\u0442\u0435\u043d\u0441\u0438, off-heap \u0443\u0442\u0435\u0447\u043a\u0438.</p> <p>\u0421\u043d\u0438\u043c\u0430\u0435\u043c \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433</p> <p>\u0412 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435 B \u0443\u0431\u0438\u0440\u0430\u0435\u043c \u043b\u0438\u043c\u0438\u0442\u044b. \u041b\u043e\u0432\u0443\u0448\u043a\u0430: JVM, \u043d\u0435 \u0432\u0438\u0434\u044f \u043b\u0438\u043c\u0438\u0442\u0430, \u0441\u043c\u043e\u0442\u0440\u0438\u0442 \u043d\u0430 \u0432\u0441\u044e \u043d\u043e\u0434\u0443 \u0438 \u0440\u0435\u0448\u0430\u0435\u0442, \u0447\u0442\u043e \u0435\u0439 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0432\u0441\u0435 128 \u044f\u0434\u0435\u0440. availableProcessors() \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 128, \u0440\u0430\u043d\u0442\u0430\u0439\u043c \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u043e\u0433\u0440\u043e\u043c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043f\u043e\u0442\u043e\u043a\u043e\u0432. \u0418\u0442\u043e\u0433: \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0431\u043e\u0440\u044c\u0431\u0430 \u0437\u0430 \u0440\u0435\u0441\u0443\u0440\u0441\u044b, \u0434\u0435\u0433\u0440\u0430\u0434\u0430\u0446\u0438\u044f. \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c 128 \u044f\u0434\u0435\u0440, \u0438\u043c\u0435\u044f \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u044e \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u043e\u0434\u043d\u043e.</p> <p>\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u0423\u0431\u0438\u0440\u0430\u0435\u043c \u043b\u0438\u043c\u0438\u0442\u044b, \u043d\u043e \u0434\u0430\u0435\u043c JVM \u043f\u043e\u043d\u044f\u0442\u044c, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e. \u0412\u044b\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c -XX:ActiveProcessorCount=1 (\u0440\u0430\u0432\u043d\u043e requests). JVM \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0437\u043c, \u0438\u0437\u0431\u0435\u0433\u0430\u0435\u0442 \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433\u0430 \u0438 \u043d\u0435 \u0432\u0437\u0440\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0442\u043e\u043a\u043e\u0432. \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c \u043f\u0430\u043c\u044f\u0442\u044c (-XX:MaxRAMPercentage, -XX:MaxMetaspaceSize), \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c OOM Killer.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ru/ideal-deployment.html#java-virtual-machine-21-virtual-threads","title":"Java Virtual Machine 21+ (Virtual Threads)","text":"<p>\u0414\u043e\u0431\u0430\u0432\u0438\u043c \u043f\u0440\u043e JVM \u0441 virtual threads.</p> <p></p> <p>\u041d\u0430\u0438\u0432\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u0412\u0441\u0435 \u043a\u0430\u043a \u0432 JVM 11+: \u0440\u0435\u043a\u0432\u0435\u0441\u0442\u044b/\u043b\u0438\u043c\u0438\u0442\u044b, \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433. \u041f\u043b\u044e\u0441 \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a virtual threads \u0442\u043e\u0436\u0435 \u043e\u0440\u0438\u0435\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u043b\u0438\u043c\u0438\u0442\u044b.</p> <p>\u0421\u043d\u0438\u043c\u0430\u0435\u043c \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433</p> <p>\u0423\u0431\u0438\u0440\u0430\u0435\u043c \u043b\u0438\u043c\u0438\u0442\u044b - \u0442\u044f\u0436\u0435\u043b\u044b\u0445 \u0442\u0440\u0435\u0434\u043e\u0432 \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0430 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e, \u043e\u0442 \u044d\u0442\u043e\u0433\u043e \u043a\u043e\u043f\u044f\u0442\u0441\u044f \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u0442\u043e\u043a\u0438.</p> <p>\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u0423\u0431\u0438\u0440\u0430\u0435\u043c \u043b\u0438\u043c\u0438\u0442\u044b \u0438 \u0434\u0435\u043b\u0430\u0435\u043c \u043a\u0430\u043a \u0432 JVM 11+, \u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0432\u0442\u043e\u0440\u043e\u0439 \u0444\u043b\u0430\u0433:</p> <ol> <li>-XX:ActiveProcessorCount=1 - \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0437\u043c\u043e\u043c GC \u0438 ForkJoinPool.</li> <li>-Djdk.virtualThreadScheduler.parallelism=1 - \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0443\u043b\u0430 \u0442\u044f\u0436\u0435\u043b\u044b\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u0434\u043b\u044f \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0445 \u0442\u0440\u0435\u0434\u043e\u0432.</li> </ol> <p>\u0422\u0430\u043a \u043c\u044b \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u044b\u0432\u0430\u0435\u043c \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0437\u043c \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0430 \u0441 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u0430\u043c\u0438 \u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043f\u0440\u0435\u0434\u0441\u043a\u0430\u0437\u0443\u0435\u043c\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ru/ideal-deployment.html#golang-110","title":"Golang 1.10+","text":"<p>\u041d\u0430\u0438\u0432\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0441 \u0440\u0435\u043a\u0432\u0435\u0441\u0442\u0430\u043c\u0438 \u0438 \u043b\u0438\u043c\u0438\u0442\u0430\u043c\u0438. \u0420\u0430\u043d\u0442\u0430\u0439\u043c Go \u0432\u0438\u0434\u0438\u0442 \u043b\u0438\u043c\u0438\u0442\u044b, runtime.NumCPU() \u0432\u0435\u0440\u043d\u0435\u0442 2. \u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b: CPU throttling \u0438 GC \u043d\u0435 \u0437\u043d\u0430\u0435\u0442 \u0433\u0440\u0430\u043d\u0438\u0446\u044b \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 - \u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d OOMKill.</p> <p>\u0421\u043d\u0438\u043c\u0430\u0435\u043c \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433</p> <p>\u0423\u0431\u0438\u0440\u0430\u0435\u043c \u043b\u0438\u043c\u0438\u0442\u044b. \u041b\u043e\u0432\u0443\u0448\u043a\u0430: \u0440\u0430\u043d\u0442\u0430\u0439\u043c Go \u0432\u0438\u0434\u0438\u0442 \u0432\u0441\u044e \u043c\u0430\u0448\u0438\u043d\u0443 \u0438 runtime.NumCPU() \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 128. \u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a \u0441\u043e\u0437\u0434\u0430\u0435\u0442 128 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432. \u0418\u0442\u043e\u0433 - \u0434\u0435\u0433\u0440\u0430\u0434\u0430\u0446\u0438\u044f.</p> <p>\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u042f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u044f\u0434\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c: GOMAXPROCS=1 (\u0438\u0437 requests). GOMEMLIMIT \u043b\u0443\u0447\u0448\u0435 \u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 70-90% \u043e\u0442 memory limit, \u0442\u0430\u043a \u043a\u0430\u043a Go \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442 memory.limit. \u0414\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438 - automemlimit. \u0420\u0430\u043d\u0442\u0430\u0439\u043c \u043f\u043e\u043d\u0438\u043c\u0430\u0435\u0442 \u0433\u0440\u0430\u043d\u0438\u0446\u044b \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u0438 \u043f\u0440\u0435\u0434\u0441\u043a\u0430\u0437\u0443\u0435\u043c\u043e \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u0443\u0435\u0442\u0441\u044f.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ru/ideal-deployment.html#nodejs-1820","title":"Node.js 18+/20+","text":"<p>\u041d\u0430\u0438\u0432\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u0420\u0435\u043a\u0432\u0435\u0441\u0442\u044b 1, \u043b\u0438\u043c\u0438\u0442\u044b 2. \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043f\u043e\u0442\u043e\u043a Node.js \u043e\u0434\u043d\u043e\u043f\u043e\u0442\u043e\u0447\u043d\u044b\u0439, libuv pool \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 4. \u041f\u0440\u043e\u0431\u043b\u0435\u043c \u043c\u0438\u043d\u0438\u043c\u0443\u043c, \u043a\u0440\u043e\u043c\u0435 CPU throttling \u043f\u0440\u0438 CPU-bound \u0437\u0430\u0434\u0430\u0447\u0430\u0445.</p> <p>\u0421\u043d\u0438\u043c\u0430\u0435\u043c \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433</p> <p>\u0422\u0443\u0442 \u043f\u043e\u0447\u0442\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0441\u043b\u0443\u0447\u0438\u0442\u0441\u044f. Node.js \u043d\u0435 \u0432\u0437\u043e\u0440\u0432\u0435\u0442\u0441\u044f \u0438 \u043d\u0435 \u043f\u043e\u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u044f\u0434\u0440\u0430. \u041d\u043e \u0438 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0437\u043c\u0430 \u043d\u0435 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f.</p> <p>\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439 \u0434\u043b\u044f Node.js - \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432 \u0440\u0430\u0432\u043d\u044b\u043c requests. \u042d\u0442\u043e \u0434\u0430\u0435\u0442 \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c \u0438 \u0443\u0442\u0438\u043b\u0438\u0437\u0430\u0446\u0438\u044e.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ru/ideal-deployment.html#python-38-gunicorn-uvicorn","title":"Python 3.8+ (Gunicorn / Uvicorn)","text":"<p>\u041d\u0430\u0438\u0432\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u0412 \u0441\u0435\u0440\u0434\u0446\u0435 Python \u0436\u0438\u0432\u0435\u0442 GIL, \u043a\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0432 \u043e\u0434\u043d\u043e\u043c \u043f\u043e\u0442\u043e\u043a\u0435. \u041c\u043e\u0436\u043d\u043e \u0443\u0445\u043e\u0434\u0438\u0442\u044c \u0432 \u043f\u0441\u0435\u0432\u0434\u043e\u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0437\u043c \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432. \u041d\u0430\u0438\u0432\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439 \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u043a, \u043d\u043e \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433 \u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d.</p> <p>\u0421\u043d\u0438\u043c\u0430\u0435\u043c \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433</p> <p>\u0423\u0431\u0438\u0440\u0430\u0435\u043c \u043b\u0438\u043c\u0438\u0442\u044b. \u041b\u043e\u0432\u0443\u0448\u043a\u0430: C-\u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 (NumPy, Pandas, OpenCV) \u043c\u043e\u0433\u0443\u0442 \u0443\u0432\u0438\u0434\u0435\u0442\u044c 128 \u044f\u0434\u0435\u0440 \u0438 \u0440\u0430\u0441\u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u0438\u0442\u044c \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f. \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 - \u0431\u043e\u0440\u044c\u0431\u0430 \u0437\u0430 \u0440\u0435\u0441\u0443\u0440\u0441\u044b.</p> <p>\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <ul> <li>Gunicorn processes = requests.</li> <li>\u0414\u043b\u044f \u0432\u0437\u0440\u044b\u0432\u043e\u043e\u043f\u0430\u0441\u043d\u044b\u0445 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a: OPENBLAS_NUM_THREADS=1 \u0438 \u0430\u043d\u0430\u043b\u043e\u0433\u0438.</li> <li>\u0414\u043b\u044f \u0434\u043e\u043b\u0433\u043e\u0436\u0438\u0432\u0443\u0449\u0438\u0445 \u0432\u043e\u0440\u043a\u0435\u0440\u043e\u0432: max-requests(+jitter), preload.</li> </ul>","tags":["first-nine","series","deployment","containers"]},{"location":"ru/ideal-deployment.html#ruby-3","title":"Ruby 3+","text":"<p>\u041d\u0430\u0438\u0432\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u041e\u0434\u043d\u043e\u043f\u043e\u0442\u043e\u0447\u043d\u044b\u0439 \u0440\u0430\u043d\u0442\u0430\u0439\u043c MRI. \u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433\u0430 \u0442\u0435 \u0436\u0435, \u043d\u043e \u0432 \u0446\u0435\u043b\u043e\u043c \u043d\u0430\u0438\u0432\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439 \u0447\u0430\u0449\u0435 \u0432\u0441\u0435\u0433\u043e \u0442\u0435\u0440\u043f\u0438\u043c.</p> <p>\u0421\u043d\u0438\u043c\u0430\u0435\u043c \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433</p> <p>\u0423\u0431\u0438\u0440\u0430\u0435\u043c \u043b\u0438\u043c\u0438\u0442\u044b. \u041b\u043e\u0432\u0443\u0448\u043a\u0430: Puma \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 Etc.nprocessors. \u0411\u0435\u0437 \u043b\u0438\u043c\u0438\u0442\u043e\u0432 \u043e\u043d \u0443\u0432\u0438\u0434\u0438\u0442 \u0432\u0441\u0435 \u044f\u0434\u0440\u0430 \u0438 \u043f\u043e\u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432 \u0438\u043b\u0438 \u043f\u043e\u0442\u043e\u043a\u043e\u0432.</p> <p>\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c \u044f\u0432\u043d\u043e:</p> <ul> <li>WEB_CONCURRENCY=1 (\u043f\u043e requests) - \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432-\u0432\u043e\u0440\u043a\u0435\u0440\u043e\u0432.</li> <li>RAILS_MAX_THREADS=5 - \u0440\u0430\u0437\u043c\u0435\u0440 \u043f\u0443\u043b\u0430 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u0432\u043d\u0443\u0442\u0440\u0438 \u0432\u043e\u0440\u043a\u0435\u0440\u0430 (\u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438).</li> <li>\u0414\u043b\u044f Unicorn \u0438 Sidekiq \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0437\u0430\u0434\u0430\u0435\u043c \u0432\u043e\u0440\u043a\u0435\u0440\u044b/\u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u044f\u0432\u043d\u043e.</li> </ul>","tags":["first-nine","series","deployment","containers"]},{"location":"ru/ideal-deployment.html#php-fpm-74","title":"PHP-FPM 7.4+","text":"<p>\u041d\u0430\u0438\u0432\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>PHP-FPM \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 dynamic (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e), \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u044f \u0438 \u0443\u0434\u0430\u043b\u044f\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b \u043f\u043e \u043c\u0435\u0440\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 (process-per-request). \u041f\u0440\u043e\u0436\u043e\u0440\u043b\u0438\u0432\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u0443\u043f\u0438\u0440\u0430\u0435\u0442\u0441\u044f \u0432 \u043b\u0438\u043c\u0438\u0442\u044b \u0438 \u0441\u0442\u0440\u0430\u0434\u0430\u0435\u0442. \u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0435\u0436\u0438\u043c (pm=dynamic) \u043c\u043e\u0436\u0435\u0442 \u0434\u0430\u0432\u0430\u0442\u044c \u0441\u043a\u0430\u0447\u043a\u0438 \u043f\u0430\u043c\u044f\u0442\u0438 \u0438 \u043d\u0435\u043f\u0440\u0435\u0434\u0441\u043a\u0430\u0437\u0443\u0435\u043c\u043e\u0441\u0442\u044c.</p> <p>\u0421\u043d\u0438\u043c\u0430\u0435\u043c \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433</p> <p>\u041b\u0438\u043c\u0438\u0442\u044b \u0443\u0431\u0438\u0440\u0430\u0435\u043c. PHP-FPM \u043d\u0435 \u0432\u0437\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0430\u043c \u043f\u043e \u0441\u0435\u0431\u0435. \u041b\u043e\u0432\u0443\u0448\u043a\u0430: \u0435\u0441\u043b\u0438 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c CPU \u0447\u0435\u0440\u0435\u0437 getconf _NPROCESSORS_ONLN, \u043e\u043d\u0430 \u0443\u0432\u0438\u0434\u0438\u0442 \u0432\u0441\u0435 128 \u044f\u0434\u0435\u0440.</p> <p>\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <ul> <li>\u0420\u0435\u0436\u0438\u043c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430\u043c\u0438: pm = static.</li> <li>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432: pm.max_children = 1 (\u0440\u0430\u0432\u043d\u043e cpu.requests).</li> </ul> <p>\u0422\u0430\u043a\u043e\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u0435\u0442 \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u043e\u0435 \u0438 \u043f\u0440\u0435\u0434\u0441\u043a\u0430\u0437\u0443\u0435\u043c\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435. \u0418\u0437-\u0437\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0430 PHP-FPM \u0441\u043b\u043e\u0436\u043d\u0435\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u043d\u043e \u044d\u0442\u043e \u0440\u0435\u0448\u0430\u044e\u0442 Roadrunner \u0438 FrankenPHP.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ru/ideal-deployment.html#net-6","title":".NET 6+","text":"<p>\u041d\u0430\u0438\u0432\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u0420\u0430\u043d\u0442\u0430\u0439\u043c .NET \u0445\u043e\u0440\u043e\u0448\u043e container-aware: \u0432\u0438\u0434\u0438\u0442 \u043b\u0438\u043c\u0438\u0442 \u0432 2 CPU, \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442 ThreadPool \u0438 GC. \u041d\u043e \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433 \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e \u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d.</p> <p>\u0421\u043d\u0438\u043c\u0430\u0435\u043c \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433</p> <p>\u0423\u0431\u0438\u0440\u0430\u0435\u043c \u043b\u0438\u043c\u0438\u0442\u044b. \u041b\u043e\u0432\u0443\u0448\u043a\u0430: \u0440\u0430\u043d\u0442\u0430\u0439\u043c \u0432\u0438\u0434\u0438\u0442 \u0432\u0441\u0435 \u044f\u0434\u0440\u0430 \u043d\u043e\u0434\u044b \u0438 \u0440\u0430\u0437\u0434\u0443\u0432\u0430\u0435\u0442 ThreadPool. \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u044e 1 CPU, \u043d\u043e \u043f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u0442 \u043d\u0430 128.</p> <p>\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0435\u043f\u043b\u043e\u0439</p> <p>\u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c \u0440\u0430\u043d\u0442\u0430\u0439\u043c \u043f\u043e\u0434 requests:</p> <ul> <li>DOTNET_PROCESSOR_COUNT=1 - \u043d\u0430\u0441\u043b\u0435\u0434\u0443\u0435\u0442\u0441\u044f \u0432\u043e \u0432\u0441\u0435 \u043f\u0443\u043b\u044b.</li> <li>DOTNET_GCServer=true - \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u044b\u0439 GC \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u0441\u043a\u0430\u0437\u0443\u0435\u043c\u043e\u0441\u0442\u0438 (\u0438\u043d\u043e\u0433\u0434\u0430 \u043d\u0435 \u043d\u0443\u0436\u0435\u043d, \u043d\u043e \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u0442 \u043d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c).</li> </ul> <p>\u0420\u0430\u043d\u0435\u0435 \u044f \u043f\u044b\u0442\u0430\u043b\u0441\u044f \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442\u044c \u0441\u0432\u043e\u0434\u043d\u0443\u044e \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0441 \u0441\u0443\u0431\u044a\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u043e\u0446\u0435\u043d\u043a\u043e\u0439 \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u043e\u0432. \u0421\u0435\u0439\u0447\u0430\u0441 \u0441\u0447\u0438\u0442\u0430\u044e, \u0447\u0442\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0438\u0432\u043d\u043e \u0435\u0435 \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u043d\u0435\u043b\u044c\u0437\u044f. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u044d\u0442\u0443 \u0437\u0430\u0442\u0435\u044e \u0438 \u0441\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u043e\u0432\u0430\u043b\u0441\u044f \u043d\u0430 \u043b\u043e\u0432\u0443\u0448\u043a\u0430\u0445 \u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f\u0445.</p> <p>\u0421\u0442\u0430\u0442\u044c\u044e \u0431\u0443\u0434\u0443 \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u043e\u043d\u0430 \u0441\u043b\u0443\u0436\u0438\u043b\u0430 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u0448\u043f\u0430\u0440\u0433\u0430\u043b\u043a\u043e\u0439. \u0411\u0443\u0434\u0443 \u0444\u0438\u043a\u0441\u0438\u0442\u044c \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0435 \u0443\u0437\u043a\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u043d\u0435\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 - \u0432\u0435\u043b\u043a\u0430\u043c \u0432 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u044b.</p> <p>\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c \u0432\u044b\u043f\u0443\u0441\u043a\u0435 \u043c\u044b \u043d\u0430\u043a\u043e\u043d\u0435\u0446-\u0442\u043e \u043f\u043e\u0439\u043c\u0435\u043c \u043a\u0442\u043e \u0442\u0430\u043a\u043e\u0439 \"\u0442\u044f\u0436\u0435\u043b\u044b\u0439 \u043f\u043e\u0442\u043e\u043a\" \u0438 \u043a\u0430\u043a \u0441 \u043d\u0438\u043c \u043f\u043e\u043b\u0430\u0434\u0438\u0442\u044c.</p> <p>\u0412 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0439 \u0441\u0435\u0440\u0438\u0438 - \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u043b\u0438\u0441\u044c \u0441 \u0442\u0435\u043c, \u043a\u0430\u043a \u0443\u0441\u0442\u0440\u043e\u0435\u043d \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440 \u0432\u043d\u0443\u0442\u0440\u0438.</p> <p>\u041f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0439\u0441\u044f \u043d\u0430 \u043a\u0430\u043d\u0430\u043b @r9yo11yp9e - \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043a\u0430\u0442\u044c \u0434\u0435\u0432\u044f\u0442\u043a\u0438 \u0432\u043c\u0435\u0441\u0442\u0435.</p>","tags":["first-nine","series","deployment","containers"]},{"location":"ru/inner-architecture.html","title":"Typical web-application inner architecture","text":"<p>The First Nine Guide. \u0411\u043b\u043e\u043a 3</p> <p></p> <p>\u0414\u0438\u0441\u043a\u043b\u0435\u0439\u043c\u0435\u0440 - \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u043c\u0438\u0440\u0435 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u043a\u0440\u0430\u0439\u043d\u0435 \u0440\u0430\u0437\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u043d\u044b, \u043d\u043e \u0435\u0441\u0442\u044c \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u043b\u043e\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u044e\u0442\u0441\u044f \u043f\u043e\u0447\u0442\u0438 \u0432\u0435\u0437\u0434\u0435. \u041e \u043d\u0438\u0445 \u0438 \u043f\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u043c.</p> <p>\u0412 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0439 \u0441\u0435\u0440\u0438\u0438 \u043c\u044b \u0433\u043e\u0432\u043e\u0440\u0438\u043b\u0438 \u043e \u0442\u043e\u043c, \u043a\u0430\u043a \u0443\u0441\u0442\u0440\u043e\u0435\u043d\u044b \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u044b. \u041d\u043e \u0440\u0430\u043d\u0442\u0430\u0439\u043c \u0441\u0430\u043c \u043f\u043e \u0441\u0435\u0431\u0435 \u043d\u0430 \u0445\u043b\u0435\u0431 \u043d\u0435 \u043d\u0430\u043c\u0430\u0436\u0435\u0448\u044c. \u0421\u0435\u0433\u043e\u0434\u043d\u044f \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u043f\u043e\u043d\u044f\u0442\u044c, \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0435, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0441\u043b\u0443\u0436\u0438\u0442\u044c \u0437\u0432\u0430\u043d\u0438\u0435 \u0432\u0435\u0431-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p> <p>\u042f \u043f\u044b\u0442\u0430\u043b\u0441\u044f \u043d\u0430\u0439\u0442\u0438 \u0433\u043e\u0442\u043e\u0432\u0443\u044e \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0443, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u044b \u043e\u0431\u044a\u044f\u0441\u043d\u044f\u043b\u0430 \u0432\u0435\u0431-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e \u043e\u0442 \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0430 \u0438 \u044f\u0437\u044b\u043a\u0430, \u043d\u043e \u043d\u0435 \u043d\u0430\u0448\u0435\u043b. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0441\u043e\u0431\u0440\u0430\u043b \u0441\u0432\u043e\u044e \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0430\u0446\u0438\u044e, \u0447\u0442\u043e\u0431\u044b \u0440\u0435\u0448\u0438\u0442\u044c \u0434\u0432\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b:</p> <ol> <li>\u041c\u043d\u043e\u0433\u0438\u0435 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u044b \u043d\u0435 \u0445\u043e\u0442\u044f\u0442 \u043f\u043e\u0433\u0440\u0443\u0436\u0430\u0442\u044c\u0441\u044f \u0432 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f: \u043a\u0430\u0436\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u044d\u0442\u043e \u043d\u0435\u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e \u0441\u043b\u043e\u0436\u043d\u043e \u0438\u043b\u0438 \u043d\u0435\u043f\u043e\u043d\u044f\u0442\u043d\u043e \u0441 \u0447\u0435\u0433\u043e \u043d\u0430\u0447\u0430\u0442\u044c.</li> <li>\u0412\u0441\u0442\u0440\u0435\u0447\u0430\u0435\u0442\u0441\u044f \u0438 \u043e\u0431\u0440\u0430\u0442\u043d\u043e\u0435 - \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u043d\u044b\u0439 \u0432\u0437\u0433\u043b\u044f\u0434: \"\u0435\u0441\u0442\u044c \u043a\u043e\u0440\u043e\u0431\u043e\u0447\u043a\u0430, \u0432\u0445\u043e\u0434, \u0432\u044b\u0445\u043e\u0434 \u0438 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430 \u043f\u043e\u0441\u0435\u0440\u0435\u0434\u0438\u043d\u0435\". \u042d\u0442\u043e \u0440\u0430\u0437\u043c\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a\u043e\u0439 \u0440\u0435\u0441\u0443\u0440\u0441 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u0442 \u0442\u0430 \u0438\u043b\u0438 \u0438\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f.</li> </ol> <p>\u041f\u043e\u0435\u0445\u0430\u043b\u0438 - \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u044b, \u0438 \u043a\u0438\u0448\u043a\u0438.</p>","tags":["first-nine","series","architecture","http"]},{"location":"ru/inner-architecture.html#http-","title":"\u0421\u043b\u043e\u0438 HTTP-\u0437\u0430\u043f\u0440\u043e\u0441\u0430","text":"<p>\u041d\u0430\u0447\u043d\u0435\u043c \u0441 \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u044f \u0442\u043e\u0433\u043e, \u0447\u0435\u0440\u0435\u0437 \u043a\u0430\u043a\u0438\u0435 \u0441\u043b\u043e\u0438 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442 HTTP-\u0437\u0430\u043f\u0440\u043e\u0441. \u0414\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u044b \u0432\u044b\u0434\u0435\u043b\u0438\u043c 4 \u0441\u043b\u043e\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p>","tags":["first-nine","series","architecture","http"]},{"location":"ru/inner-architecture.html#network-layer","title":"NETWORK LAYER","text":"<p>\u0421\u0443\u0442\u044c: \u043f\u0440\u0435\u0432\u0440\u0430\u0449\u0430\u0435\u0442 HTTP-\u0437\u0430\u043f\u0440\u043e\u0441 \u0432 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438.</p> <p></p> <p>\u0427\u0442\u043e \u0442\u0443\u0442 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442:</p> <ul> <li>socket listen \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 (8080, 443)</li> <li>accept connections - \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c \u043d\u043e\u0432\u044b\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f</li> <li>TLS handshake - \u0440\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430 HTTPS \u0442\u0440\u0430\u0444\u0438\u043a\u0430</li> <li>HTTP parsing - \u0440\u0430\u0437\u0431\u043e\u0440 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432 \u0438 \u0442\u0435\u043b\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430</li> </ul> <p>\u0427\u0430\u0441\u0442\u043e \u0442\u0443\u0442 \u0434\u0443\u043c\u0430\u044e\u0442, \u0447\u0442\u043e \u044d\u0442\u043e \u0442\u043e\u043b\u044c\u043a\u043e IO-bound. \u041d\u0430 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0442\u0435\u043b\u0430\u0445 \u0441 HTTPS CPU \u0442\u043e\u0436\u0435 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u0431\u043e\u043b\u0435\u0442\u044c.</p>","tags":["first-nine","series","architecture","http"]},{"location":"ru/inner-architecture.html#request-processing","title":"REQUEST PROCESSING","text":"<p>\u0421\u0443\u0442\u044c: \u043f\u0440\u0435\u0432\u0440\u0430\u0449\u0430\u0435\u0442 HTTP-\u0437\u0430\u043f\u0440\u043e\u0441 \u0432 \u0432\u044b\u0437\u043e\u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043a \u043d\u0443\u0436\u043d\u043e\u043c\u0443 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0443.</p> <p></p> <p>\u0427\u0442\u043e \u0442\u0443\u0442 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442:</p> <ul> <li>deserialize (JSON/XML/Proto) - \u0440\u0430\u0437\u0431\u043e\u0440 \u0442\u0435\u043b\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u044b</li> <li>validation &amp; auth - \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0442\u043e\u043a\u0435\u043d\u043e\u0432, \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430, \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>rate limiting - \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432</li> <li>request routing - \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 handler \u043f\u043e URL</li> </ul> <p>\u041f\u0440\u043e \u0440\u0435\u0439\u0442\u044b \u0432\u0430\u0436\u043d\u043e \u0441\u043a\u0430\u0437\u0430\u0442\u044c: memory-bound - \u044d\u0442\u043e \u0447\u0430\u0449\u0435 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b. \u0420\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0432 Redis \u0438 \u044d\u0442\u043e \u0443\u0436\u0435 IO.</p>","tags":["first-nine","series","architecture","http"]},{"location":"ru/inner-architecture.html#business-logic","title":"BUSINESS LOGIC","text":"<p>\u0421\u0443\u0442\u044c: \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043e\u0441\u043d\u043e\u0432\u043d\u0443\u044e \u043b\u043e\u0433\u0438\u043a\u0443 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f - \u0442\u043e, \u0440\u0430\u0434\u0438 \u0447\u0435\u0433\u043e \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0441\u0435\u0440\u0432\u0438\u0441.</p> <p></p> <p>\u0427\u0442\u043e \u0442\u0443\u0442 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442:</p> <ul> <li>domain operations - \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u044b \u0438 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b\u0430</li> <li>calculations - \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>external API calls - \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043a \u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c</li> <li>database queries - \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043a PostgreSQL/MySQL/MongoDB</li> <li>cache operations - \u0447\u0442\u0435\u043d\u0438\u0435/\u0437\u0430\u043f\u0438\u0441\u044c Redis/Memcached</li> </ul> <p>\u042d\u0442\u043e\u0442 \u0441\u043b\u043e\u0439 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u043f\u0440\u0438\u0437 SRE \u0441\u0438\u043c\u043f\u0430\u0442\u0438\u0439 \u043a\u0430\u043a \u0441\u0430\u043c\u044b\u0439 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u043d\u044b\u0439. \u0422\u0443\u0442 \u0438 \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u0435 SQL, \u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438, \u0438 \u0432\u043d\u0435\u0448\u043d\u0438\u0435 API \u0431\u0435\u0437 \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u043e\u0432, \u0438 \u0442\u044f\u0436\u0435\u043b\u044b\u0435 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f O(n!).</p>","tags":["first-nine","series","architecture","http"]},{"location":"ru/inner-architecture.html#response-formation","title":"RESPONSE FORMATION","text":"<p>\u0421\u0443\u0442\u044c: \u0443\u043f\u0430\u043a\u043e\u0432\u044b\u0432\u0430\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u0432 HTTP-\u043e\u0442\u0432\u0435\u0442 \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443.</p> <p></p> <p>\u0427\u0442\u043e \u0442\u0443\u0442 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442:</p> <ul> <li>\u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f (JSON/XML/Proto)</li> <li>compression (gzip/brotli) - \u0441\u0436\u0430\u0442\u0438\u0435 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432</li> <li>encryption - \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f HTTPS</li> <li>send to socket - \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0431\u0430\u0439\u0442\u043e\u0432 \u043f\u043e \u0441\u0435\u0442\u0438</li> </ul> <p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0442\u0435 \u0436\u0435, \u0447\u0442\u043e \u0438 \u0443 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0441\u043b\u043e\u044f.</p>","tags":["first-nine","series","architecture","http"]},{"location":"ru/inner-architecture.html#_1","title":"\u041f\u043e\u043b\u043d\u0430\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u0430","text":"","tags":["first-nine","series","architecture","http"]},{"location":"ru/inner-architecture.html#_2","title":"\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430","text":"<p>\u0422\u0435\u043f\u0435\u0440\u044c, \u043a\u043e\u0433\u0434\u0430 \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e \u0441\u043b\u043e\u044f\u0445, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u043d\u0430\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u043e \u043a\u0430\u043a \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u0443\u044e \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0443, \u0431\u0443\u0434\u0442\u043e \u0443 \u043d\u0430\u0441 \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b.</p> <p></p> <p>\u0417\u043d\u0430\u043a\u043e\u043c\u0438\u043c\u0441\u044f \u0441 \u043e\u0431\u044a\u0435\u043a\u0442\u0430\u043c\u0438. \u0418\u0445 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u043c\u0435\u043d\u044c\u0448\u0435 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438. \u0422\u0443\u0442 \u0433\u043b\u0430\u0432\u043d\u043e\u0435 \u043f\u043e\u0434\u0445\u043e\u0434: \u0432\u044b\u043d\u043e\u0441\u0438\u043c \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0443\u044e \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u0432\u0441\u0435, \u0447\u0442\u043e \u0438\u043c\u0435\u0435\u0442 \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u0439 \u043f\u0443\u043b \u0432\u043e\u0440\u043a\u0435\u0440\u043e\u0432 \u0438\u043b\u0438 \u043b\u044e\u0431\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u0437\u0430 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u043c\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p> <p>\u0421\u043f\u0438\u0441\u043e\u043a:</p> <ul> <li>HTTP Ingress - \u0432\u0445\u043e\u0434\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430, \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u0430\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u044f, load balancing \u043c\u0435\u0436\u0434\u0443 \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0430\u043c\u0438.</li> <li>Dispatcher - \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043c\u0435\u0436\u0434\u0443 \u0432\u043e\u0440\u043a\u0435\u0440\u0430\u043c\u0438, \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u0447\u0435\u0440\u0435\u0434\u044f\u043c\u0438 \u0438 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0430\u043c\u0438.</li> <li>Worker Execution - \u043c\u0435\u0441\u0442\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438, \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u044b \u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u044b.</li> <li>Runtime Overhead - GC, \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0438, thread scheduling. \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0440\u043e\u0447\u0438\u0442\u043e \u0436\u0435\u0441\u0442\u043a\u043e\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044c \u0446\u0435\u043d\u0443 \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0430.</li> <li>Cache Access - in-memory \u043a\u0435\u0448\u0438 \u0438 \u0432\u043d\u0435\u0448\u043d\u0438\u0435 \u043a\u0435\u0448\u0438 (Redis/Memcached).</li> <li>Scripting &amp; Serialization - JSON/XML/Protobuf \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f, template engines, \u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445.</li> <li>Logging &amp; Instrumentation - \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438 \u0442\u0440\u0435\u0439\u0441\u0438\u043d\u0433.</li> <li>External Interaction - \u0431\u0430\u0437\u044b, \u043e\u0447\u0435\u0440\u0435\u0434\u0438, HTTP API, \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b.</li> </ul> <p>\u041f\u043e\u0447\u0435\u043c\u0443 \u044d\u0442\u043e \u0432\u0430\u0436\u043d\u043e? \u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 \u0441 \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u0430\u043c\u0438:</p> <ul> <li>\u0412 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0435 \u0434\u0435\u043b\u0430\u0435\u043c SQL-\u0437\u0430\u043f\u0440\u043e\u0441 \u0432 \u0411\u0414. \u0423 \u0431\u0430\u0437\u044b \u0441\u0432\u043e\u0439 \u043f\u0443\u043b, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Hikari.</li> <li>\u041f\u0443\u043b\u044b \u043a \u0411\u0414 \u0437\u0430\u043d\u044f\u0442\u044b, \u0432\u043e\u0440\u043a\u0435\u0440 \u0432\u0438\u0441\u0438\u0442 \u0438 \u0436\u0434\u0435\u0442, \u043a\u043e\u0433\u0434\u0430 \u043e\u0441\u0432\u043e\u0431\u043e\u0434\u0438\u0442\u0441\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435.</li> <li>\u0412 \u0438\u0442\u043e\u0433\u0435 \u043a\u043e\u043f\u044f\u0442\u0441\u044f \u0433\u043e\u0440\u0443\u0442\u0438\u043d\u044b \u0438\u043b\u0438 \u0437\u0430\u0431\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0443\u043b \u0432\u043e\u0440\u043a\u0435\u0440\u043e\u0432.</li> </ul> <p>\u0414\u0430, \u044d\u0442\u043e \u0440\u0435\u0448\u0430\u0435\u0442\u0441\u044f \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u043e\u043c \u0432 \u043f\u0443\u043b\u0435, \u043d\u043e \u0447\u0435\u043c \u0431\u043e\u043b\u0435\u0435 \u0440\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u0440\u0430\u043d\u0442\u0430\u0439\u043c, \u0442\u0435\u043c \u0447\u0430\u0449\u0435 \u044d\u0442\u043e \u0443\u043f\u0443\u0441\u043a\u0430\u044e\u0442.</p>","tags":["first-nine","series","architecture","http"]},{"location":"ru/inner-architecture.html#_3","title":"\u041c\u0435\u0448\u043e\u0447\u0435\u043a \u0441 \u0441\u043e\u0432\u0435\u0442\u0430\u043c\u0438","text":"<p>\u0420\u0430\u0431\u043e\u0442\u0430\u044f \u0441 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435\u0439 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043e\u0439, \u043f\u0440\u043e\u0449\u0435 \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u043e\u0442\u043a\u0430\u0437\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438:</p> <ul> <li>\u0442\u0430\u0439\u043c\u0430\u0443\u0442\u044b \u0438 TTL \u043d\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0445 \u043e\u0447\u0435\u0440\u0435\u0434\u044f\u0445</li> <li>bulkhead \u0438 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u0443\u043b\u043e\u0432 \u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043b\u044f CPU \u0438 IO)</li> <li>fallback \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0438, \u0432\u043f\u043b\u043e\u0442\u044c \u0434\u043e \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0445 circuit breaker</li> </ul> <p>\u041f\u0440\u043e \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u0431\u0443\u0434\u0435\u0442 \u043c\u043d\u043e\u0433\u043e \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0445 \u0441\u0442\u0430\u0442\u0435\u0439.</p> <p>\u041d\u0430 \u044d\u0442\u043e\u043c \u043f\u043e\u043a\u0430 \u0432\u0441\u0435.</p> <p>\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c \u0432\u044b\u043f\u0443\u0441\u043a\u0435 \u043c\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0434\u0435\u0430\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0438 \u043f\u043e\u0439\u0434\u0435\u043c \u0435\u0433\u043e \u0434\u0435\u043f\u043b\u043e\u0438\u0442\u044c.</p> <p>\u0412 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0439 \u0441\u0435\u0440\u0438\u0438 - \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u043b\u0438\u0441\u044c \u0441 \u0442\u0435\u043c, \u043a\u0430\u043a\u0438\u0435 \u0435\u0441\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u0438 \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0430.</p> <p>\u041f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0439\u0441\u044f \u043d\u0430 \u043a\u0430\u043d\u0430\u043b @r9yo11yp9e - \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043a\u0430\u0442\u044c \u0434\u0435\u0432\u044f\u0442\u043a\u0438 \u0432\u043c\u0435\u0441\u0442\u0435.</p>","tags":["first-nine","series","architecture","http"]},{"location":"ru/runtime-models.html","title":"Runtime models - \u043a\u0430\u043a \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0442\u044b\u0441\u044f\u0447\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e","text":"<p>The First Nine Guide. \u0411\u043b\u043e\u043a 2</p> <p></p> <p>\u0414\u0438\u0441\u043a\u043b\u0435\u0439\u043c\u0435\u0440 - \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u043c\u0438\u0440\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0438 \u0431\u044d\u043a\u0435\u043d\u0434\u044b \u0441\u043e\u0447\u0435\u0442\u0430\u044e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u043e\u0434\u0435\u043b\u0435\u0439, \u0432 \u0447\u0438\u0441\u0442\u043e\u043c \u0432\u0438\u0434\u0435 \u0438\u0445 \u043f\u043e\u0447\u0442\u0438 \u043d\u0438\u0433\u0434\u0435 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.</p> <p>\u0412 \u043f\u0440\u043e\u0448\u043b\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u043c\u044b \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u043b\u0438 \u0430\u0442\u043e\u043c \u043a\u043e\u0434\u0430 - \u0444\u0443\u043d\u043a\u0446\u0438\u044e. \u041f\u043e\u043d\u044f\u043b\u0438, \u043a\u0430\u043a \u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0438 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c.</p> <p>\u041d\u043e \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u043c\u0438\u0440\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442 \u043d\u0435 \u043e\u0434\u043d\u0443, \u0430 \u0442\u044b\u0441\u044f\u0447\u0438 \u0438 \u0434\u0435\u0441\u044f\u0442\u043a\u0438 \u0442\u044b\u0441\u044f\u0447 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e. \u041a\u0442\u043e \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u044d\u0442\u0438\u043c \u0445\u0430\u043e\u0441\u043e\u043c? \u041e\u0442\u0432\u0435\u0442 - \u043c\u043e\u0434\u0435\u043b\u044c \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f (runtime model). \u0412\u044b\u0431\u043e\u0440 \u044d\u0442\u043e\u0439 \u043c\u043e\u0434\u0435\u043b\u0438 - \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442 \u0441\u043e\u0444\u0442\u0432\u0430\u0440\u043d\u043e\u0439 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b.</p> <p>\u041a\u0430\u0436\u0434\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u043d\u0430 \u0434\u0432\u0430 \u0432\u043e\u043f\u0440\u043e\u0441\u0430:</p> <ol> <li>\u041a\u0442\u043e \u0440\u0443\u043b\u0438\u0442 \u043f\u043e\u0442\u043e\u043a\u0430\u043c\u0438? (\u044f\u0434\u0440\u043e \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0430 \u0438\u043b\u0438 \u0441\u0430\u043c \u043a\u043e\u0434)</li> <li>\u0427\u0442\u043e \u0431\u0443\u0434\u0435\u0442, \u0435\u0441\u043b\u0438 \u043f\u043e\u0442\u043e\u043a \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f?</li> </ol> <p>\u041e\u0431\u0441\u0443\u0434\u0438\u043c \u043f\u043b\u044e\u0441\u044b, \u043c\u0438\u043d\u0443\u0441\u044b \u0438 \u0433\u0434\u0435 \u0438\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"ru/runtime-models.html#1-thread-per-request","title":"1. Thread-per-request","text":"<p>\u041f\u0435\u0440\u0432\u0430\u044f \u0438 \u043e\u0434\u043d\u0430 \u0438\u0437 \u0434\u0440\u0435\u0432\u043d\u0435\u0439\u0448\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439:</p> <p>\u043e\u0434\u0438\u043d \u0437\u0430\u043f\u0440\u043e\u0441 - \u043e\u0434\u0438\u043d \u043f\u043e\u0442\u043e\u043a - \u0437\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u043b\u0441\u044f - \u043f\u043e\u0442\u043e\u043a \u0443\u043c\u0435\u0440.</p> <p>\u041a\u0442\u043e \u0440\u0443\u043b\u0438\u0442: \u0441\u0430\u043c \u043a\u043e\u0434 \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u0442\u044f\u0436\u0435\u043b\u044b\u0435 \u043f\u043e\u0442\u043e\u043a\u0438 \u0438 \u0441\u0440\u0430\u0437\u0443 \u0437\u0430\u0431\u044b\u0432\u0430\u0435\u0442</p> <p>\u0412\u0435\u0441: 1-8 \u041c\u0411 \u043d\u0430 \u0441\u0442\u0435\u043a; \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 ~100 \u043c\u043a\u0441</p> <p>\u0415\u0441\u043b\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f: \u0436\u0435\u043b\u0435\u0437\u043e \u0442\u0443\u043f\u043e \u043f\u0440\u043e\u0441\u0442\u0430\u0438\u0432\u0430\u0435\u0442</p> <p></p> <p>\u0411\u0440\u0430\u0442\u044c, \u0435\u0441\u043b\u0438: \u0443\u043d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043d\u043e\u043b\u0438\u0442 \u0438 3 RPS - \u0438\u043d\u0430\u0447\u0435 \u043d\u0435\u0442.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"ru/runtime-models.html#2-thread-pool","title":"2. Thread pool","text":"<p>\u041b\u043e\u0433\u0438\u0447\u043d\u0430\u044f \u044d\u0432\u043e\u043b\u044e\u0446\u0438\u044f \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0439 \u043c\u043e\u0434\u0435\u043b\u0438. \u0423\u0431\u0438\u0440\u0430\u0435\u043c \u043e\u0432\u0435\u0440\u0445\u044d\u0434 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0438 \u0441\u043c\u0435\u0440\u0442\u044c, \u0434\u0435\u0440\u0436\u0438\u043c \u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0443\u043b \u0442\u044f\u0436\u0435\u043b\u044b\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u0437\u0430\u0434\u0430\u0447. \u0421\u0435\u0439\u0447\u0430\u0441 \u0432 \u043c\u0438\u0440\u0435 \u043f\u043e\u043b\u043d\u043e \u0442\u0430\u043a\u0438\u0445 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439, \u0445\u043e\u0442\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u043e\u043b\u0434\u0441\u043a\u0443\u043b\u044c\u043d\u0430\u044f.</p> <p>\u041a\u0442\u043e \u0440\u0443\u043b\u0438\u0442: \u043f\u0443\u043b \u0440\u0430\u0437\u0434\u0430\u0435\u0442 \u0437\u0430\u0434\u0430\u0447\u0438 \u0433\u043e\u0442\u043e\u0432\u044b\u043c \u043f\u043e\u0442\u043e\u043a\u0430\u043c</p> <p>\u0415\u0441\u043b\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f: \u043f\u043e\u0442\u043e\u043a \u0432\u0438\u0441\u0438\u0442, \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u043f\u0443\u0445\u043d\u0435\u0442</p> <p></p> <p>\u041c\u043e\u0436\u043d\u043e \u0431\u0440\u0430\u0442\u044c, \u0435\u0441\u043b\u0438: \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043c\u0435\u0448\u0430\u043d\u043d\u0430\u044f (CPU + I/O), \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u0438, \u0442\u043e\u0448\u043d\u0438\u0442 \u043e\u0442 \u043c\u043e\u0434\u043d\u043e\u0433\u043e \u0438 \u043c\u043e\u043b\u043e\u0434\u0435\u0436\u043d\u043e\u0433\u043e.</p> <p>\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 - \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u0440\u0435\u0448\u0438\u0442\u044c \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443 \u043f\u0443\u043b\u043e\u0432: \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0442\u044f\u0436\u0435\u043b\u044b\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f I/O.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"ru/runtime-models.html#3-event-loop","title":"3. Event loop","text":"<p>\u0420\u0430\u0434\u0438\u043a\u0430\u043b\u044c\u043d\u043e \u0438\u043d\u043e\u0439 \u043f\u043e\u0434\u0445\u043e\u0434. \u0412\u043c\u0435\u0441\u0442\u043e \u0430\u0440\u043c\u0438\u0438 \u0432\u043e\u0440\u043a\u0435\u0440\u043e\u0432 \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u043e\u0434\u0438\u043d, \u043d\u043e \u0448\u0443\u0441\u0442\u0440\u044b\u0439 \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440 (event loop), \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0438\u0439 \u043d\u0430 \u043e\u0434\u043d\u043e\u043c \u0442\u044f\u0436\u0435\u043b\u043e\u043c \u043f\u043e\u0442\u043e\u043a\u0435. \u041e\u043d \u0438\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u0435\u0442 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0443\u044e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0437\u0430\u043f\u0440\u043e\u0441 \u0432 \u0411\u0414) \u0438 \u0442\u0443\u0442 \u0436\u0435 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0434\u0440\u0443\u0433\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f. \u041a\u043e\u0433\u0434\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0433\u043e\u0442\u043e\u0432, \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0435\u0433\u043e.</p> <p>\u043e\u043f\u0440\u043e\u0441 I/O - \u043a\u043e\u043b\u0431\u044d\u043a\u0438 - \u0442\u0430\u0439\u043c\u0435\u0440\u044b - ...</p> <p>\u041a\u0442\u043e \u0440\u0443\u043b\u0438\u0442: \u0441\u0430\u043c loop; \u0442\u044f\u0436\u0435\u043b\u044b\u0439 \u043f\u043e\u0442\u043e\u043a \u0432\u0441\u0435\u0433\u043e \u043e\u0434\u0438\u043d</p> <p>\u0415\u0441\u043b\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f: \u0437\u0430\u043c\u0438\u0440\u0430\u0435\u0442 \u0432\u0441\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435</p> <p></p> <p>\u0411\u0440\u0430\u0442\u044c, \u0435\u0441\u043b\u0438: \u0447\u0438\u0441\u0442\u044b\u0439 I/O \u0438 \u043c\u0438\u043d\u0438\u043c\u0443\u043c CPU.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"ru/runtime-models.html#4-fibers","title":"4. Fibers","text":"<p>\u042d\u0442\u043e \u043d\u0435 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c, \u0430 \u043f\u043e\u0434\u0445\u043e\u0434, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u043e\u043a\u0430\u0447\u0438\u0432\u0430\u0435\u0442 event loop (\u0438 \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e), \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u0440\u0435\u0448\u0430\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443 callback hell. \u041b\u043e\u0433\u0438\u043a\u0430 \u043f\u0438\u0448\u0435\u0442\u0441\u044f \u0432\u043d\u0443\u0442\u0440\u0438 \u043b\u0435\u0433\u043a\u0438\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 (\u0444\u0430\u0439\u0431\u0435\u0440\u043e\u0432). Event loop \u043f\u043e-\u043f\u0440\u0435\u0436\u043d\u0435\u043c\u0443 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0432\u0441\u0435\u043c, \u043d\u043e \u0442\u0435\u043f\u0435\u0440\u044c \u043e\u043d \u043d\u0435 \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043b\u0431\u044d\u043a\u0438, \u0430 \u0432\u043e\u0437\u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442 (resume) \u043d\u0443\u0436\u043d\u044b\u0439 \u0444\u0430\u0439\u0431\u0435\u0440. \u0421\u0430\u043c \u0444\u0430\u0439\u0431\u0435\u0440, \u0434\u043e\u0439\u0434\u044f \u0434\u043e I/O, \u0434\u043e\u0431\u0440\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u043e\u0442\u0434\u0430\u0435\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 (yield), \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044f \u043a\u043e\u0434\u0443 \u0432\u044b\u0433\u043b\u044f\u0434\u0435\u0442\u044c \u043b\u0438\u043d\u0435\u0439\u043d\u044b\u043c. \u0424\u0430\u0439\u0431\u0435\u0440\u044b \u043c\u043e\u0433\u0443\u0442 \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u0430 \u043f\u043e \u043b\u043e\u0433\u0438\u043a\u0435, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u0438\u043a\u0442\u0443\u0435\u0442 \u043d\u0435 \u0440\u0430\u043d\u0442\u0430\u0439\u043c, \u0430 \u0441\u0430\u043c \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.</p> <p>\u041a\u0442\u043e \u0440\u0443\u043b\u0438\u0442: \u0431\u043e\u043b\u044c\u0448\u0435 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0443 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430, \u043d\u043e \u0440\u0443\u043b\u044c \u0443 \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0430</p> <p>\u0415\u0441\u043b\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f: \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442 loop \u0442\u0430\u043a \u0436\u0435</p> <p></p> <p>\u0411\u0440\u0430\u0442\u044c, \u0435\u0441\u043b\u0438: \u0445\u043e\u0447\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u0442\u044b\u0439 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d \u0432 I/O-\u0441\u0435\u0440\u0432\u0438\u0441\u0435.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"ru/runtime-models.html#5-green-threads","title":"5. Green threads","text":"<p>\u042d\u0442\u043e \u0441\u0442\u0430\u0440\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c, \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f \u043c\u043d\u043e\u0433\u0438\u0445 \u043d\u043e\u0432\u044b\u0445. \u0412 \u043d\u0435\u0439 \u043c\u043d\u043e\u0433\u043e \u043b\u0435\u0433\u043a\u0438\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u0432\u043d\u0443\u0442\u0440\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0442\u044f\u0436\u0435\u043b\u043e\u0433\u043e. \u0420\u0430\u043d\u0442\u0430\u0439\u043c \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0438\u0445 \u043f\u043e \u0442\u0430\u0439\u043c\u0435\u0440\u0443.</p> <p>\u041a\u0442\u043e \u0440\u0443\u043b\u0438\u0442: \u0440\u0430\u043d\u0442\u0430\u0439\u043c, \u0432\u0441\u0435 \u0436\u0438\u0432\u0443\u0442 \u0432 \u043e\u0434\u043d\u043e\u043c \u0442\u044f\u0436\u0435\u043b\u043e\u043c \u043f\u043e\u0442\u043e\u043a\u0435</p> <p>\u0415\u0441\u043b\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f: \u0435\u0441\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0438\u0437 \u043b\u0435\u0433\u043a\u0438\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u0434\u0435\u043b\u0430\u0435\u0442 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0439 \u0432\u044b\u0437\u043e\u0432, \u043e\u043d \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442 \u0442\u043e\u0442 \u0435\u0434\u0438\u043d\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u044f\u0436\u0435\u043b\u044b\u0439 \u043f\u043e\u0442\u043e\u043a. \u0412\u0441\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u043e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f.</p> <p></p> <p>\u0411\u0440\u0430\u0442\u044c, \u0435\u0441\u043b\u0438: \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f, \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u0439 \u0441\u043a\u0440\u0438\u043f\u0442, \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043a\u0430.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"ru/runtime-models.html#6-virtual-threads","title":"6. Virtual threads","text":"<p>\u042d\u0442\u043e \u0433\u0435\u0439\u043c\u0447\u0435\u043d\u0434\u0436\u0435\u0440. \u042d\u0432\u043e\u043b\u044e\u0446\u0438\u044f green threads. \u041c\u0438\u043b\u043b\u0438\u043e\u043d\u044b \u043b\u0435\u0433\u043a\u0438\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432, \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0445 \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u043e\u043c \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0430 \u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u044b\u0445 \u043d\u0430 \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u043c \u043f\u0443\u043b\u0435 \u0442\u044f\u0436\u0435\u043b\u044b\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432. \u0420\u0435\u0430\u043b\u044c\u043d\u0430\u044f \u043a\u0440\u0443\u0442\u043e\u0441\u0442\u044c - \u0432 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430\u0445.</p> <p>\u041a\u0442\u043e \u0440\u0443\u043b\u0438\u0442: \u0440\u0430\u043d\u0442\u0430\u0439\u043c \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u043b\u0435\u0433\u043a\u0438\u0435 \u043f\u043e\u0442\u043e\u043a\u0438, \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0438\u0445 \u043f\u043e \u043f\u0443\u043b\u0443 \u0442\u044f\u0436\u0435\u043b\u044b\u0445</p> <p>\u0415\u0441\u043b\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f: \u043b\u0435\u0433\u043a\u0438\u0439 \u043f\u043e\u0442\u043e\u043a \u0438\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u0435\u0442 I/O, \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a \u043d\u0435 \u0434\u0430\u0435\u0442 \u0435\u043c\u0443 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u044f\u0436\u0435\u043b\u044b\u0439 \u043f\u043e\u0442\u043e\u043a. \u041e\u043d \"\u043f\u0430\u0440\u043a\u0443\u0435\u0442\" \u043b\u0435\u0433\u043a\u0438\u0439 \u043f\u043e\u0442\u043e\u043a \u0438 \u0441\u0442\u0430\u0432\u0438\u0442 \u043d\u0430 \u0435\u0433\u043e \u043c\u0435\u0441\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439. \u0422\u044f\u0436\u0435\u043b\u044b\u0439 \u043f\u043e\u0442\u043e\u043a \u043d\u0435 \u043f\u0440\u043e\u0441\u0442\u0430\u0438\u0432\u0430\u0435\u0442.</p> <p>\u041f\u0440\u0438 blocking I/O (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, Thread.sleep() \u0438\u043b\u0438 File.read() \u043d\u0430 \u043e\u0431\u044b\u0447\u043d\u043e\u043c \u0441\u043e\u043a\u0435\u0442\u0435) \u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d pinning, \u0447\u0442\u043e \u0441\u043d\u0438\u0436\u0430\u0435\u0442 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c.</p> <p></p> <p>\u0411\u0440\u0430\u0442\u044c, \u0435\u0441\u043b\u0438: \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0439 high-load \u0438 \u043c\u043e\u0440\u0435 \u0441\u0435\u0442\u0435\u0432\u044b\u0445 \u0432\u044b\u0437\u043e\u0432\u043e\u0432. \u041d\u043e \u043d\u0435 \u0437\u0430\u0431\u044b\u0432\u0430\u0439\u0442\u0435 \u043f\u0440\u043e mutex, \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u044b \u0438 fail-fast, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043d\u0430\u043a\u0430\u043f\u043b\u0438\u0432\u0430\u0442\u044c \u043c\u0438\u043b\u043b\u0438\u043e\u043d\u044b \u043b\u0435\u0433\u043a\u0438\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u0432 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0438.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"ru/runtime-models.html#7-actor-model","title":"7. Actor model","text":"<p>\u042d\u0442\u043e \u043d\u0435 \u0441\u043e\u0432\u0441\u0435\u043c \u043c\u043e\u0434\u0435\u043b\u044c \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u0430, \u0430 \u043c\u043e\u0434\u0435\u043b\u044c \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u0438, \u043d\u043e \u0441\u0438\u043b\u044c\u043d\u043e \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0443. \u0412 \u043d\u0435\u0439 \u043d\u0435\u0442 \u043e\u0431\u0449\u0435\u0439 \u043f\u0430\u043c\u044f\u0442\u0438: \u0430\u043a\u0442\u043e\u0440\u044b \u043e\u0431\u0449\u0430\u044e\u0442\u0441\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438. \u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a \u0440\u0430\u0437\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0435\u0442 \u0430\u043a\u0442\u043e\u0440\u043e\u0432 \u043f\u043e \u043f\u043e\u0442\u043e\u043a\u0430\u043c-\u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f\u043c.</p> <p>\u041f\u0440\u0438\u043d\u0446\u0438\u043f\u044b:</p> <ul> <li>\u043d\u0435\u0442 \u043e\u0431\u0449\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f</li> <li>\u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u043c\u0435\u043d \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438, \u043d\u0438\u043a\u0430\u043a\u043e\u0439 \u0448\u0430\u0440\u0435\u043d\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438 \u0438\u043b\u0438 \u043b\u043e\u043a\u043e\u0432</li> <li>\u043e\u0434\u0438\u043d \u0430\u043a\u0442\u043e\u0440 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043e\u0434\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0437\u0430 \u0440\u0430\u0437</li> <li>\"let it crash\" \u0444\u0438\u043b\u043e\u0441\u043e\u0444\u0438\u044f \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438</li> </ul> <p>\u041a\u0442\u043e \u0440\u0443\u043b\u0438\u0442: \u0440\u0430\u043d\u0442\u0430\u0439\u043c \u0430\u043a\u0442\u043e\u0440\u043e\u0432; \u0430\u043a\u0442\u043e\u0440 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043f\u043e \u043e\u0434\u043d\u043e\u043c\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044e</p> <p>\u0415\u0441\u043b\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f: \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u0431\u044f, \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442</p> <p></p> <p>\u0411\u0440\u0430\u0442\u044c, \u0435\u0441\u043b\u0438: \u043d\u0443\u0436\u043d\u0430 \u0432\u044b\u0441\u043e\u043a\u0430\u044f \u043e\u0442\u043a\u0430\u0437\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u0438 \u0433\u043e\u0442\u043e\u0432\u044b\u0439 \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a. \u041c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c \u0438 \u043a \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c, \u0438 \u043a \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435\u0439 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u0430.</p>","tags":["first-nine","series","runtime","concurrency"]},{"location":"ru/runtime-models.html#_1","title":"\u0421\u0432\u043e\u0434\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430","text":"","tags":["first-nine","series","runtime","concurrency"]},{"location":"ru/runtime-models.html#_2","title":"\u0413\u0438\u0431\u0440\u0438\u0434\u043d\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u0438 \u0433\u0434\u0435 \u043e\u043d\u0438 \u043e\u0431\u0438\u0442\u0430\u044e\u0442","text":"<p>\u0412 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0447\u0438\u0441\u0442\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u044e\u0442\u0441\u044f \u0440\u0435\u0434\u043a\u043e. \u0421\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0440\u0430\u043d\u0442\u0430\u0439\u043c\u044b \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u0443\u044e\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u044b, \u0443\u0441\u0442\u0440\u0430\u043d\u044f\u044f \u0441\u043b\u0430\u0431\u043e\u0441\u0442\u0438 \u043a\u0430\u0436\u0434\u043e\u0433\u043e.</p> <p>\u0428\u043e\u0440\u0442\u043b\u0438\u0441\u0442:</p> <ol> <li>Worker threads + event loop. \u0412\u0438\u0434\u0438\u043c \u0432 Node.js (c Worker Threads). \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 event loop \u0434\u043b\u044f I/O + \u043f\u0443\u043b \u0432\u043e\u0440\u043a\u0435\u0440\u043e\u0432 \u0434\u043b\u044f CPU-\u0437\u0430\u0434\u0430\u0447.</li> <li>Multi-loop architecture. \u0412\u0441\u0442\u0440\u0435\u0447\u0430\u0435\u0442\u0441\u044f \u0432 Vert.x. \u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e event loop'\u043e\u0432 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e, \u043a\u0430\u0436\u0434\u044b\u0439 \u043d\u0430 \u0441\u0432\u043e\u0435\u043c \u0442\u044f\u0436\u0435\u043b\u043e\u043c \u043f\u043e\u0442\u043e\u043a\u0435. \u0411\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0449\u0438\u043a \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f.</li> <li>Actor model + thread pools. \u0422\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 Akka \u0441 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c\u044b\u043c\u0438 \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0430\u043c\u0438. \u0420\u0430\u0437\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u0430\u043a\u0442\u043e\u0440\u043e\u0432 \u043d\u0430 \u0440\u0430\u0437\u043d\u044b\u0445 \u043f\u0443\u043b\u0430\u0445: I/O-\u0430\u043a\u0442\u043e\u0440\u044b \u043d\u0430 \u0431\u043e\u043b\u044c\u0448\u043e\u043c \u043f\u0443\u043b\u0435, CPU-\u0430\u043a\u0442\u043e\u0440\u044b \u043d\u0430 \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u043e\u043c, \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u044b\u0435 \u043d\u0430 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u0442\u043e\u043a\u0430\u0445.</li> </ol> <p>\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c \u0432\u044b\u043f\u0443\u0441\u043a\u0435 - \u0440\u0430\u0437\u0431\u043e\u0440 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0445 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p> <p>\u0412 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0439 \u0441\u0435\u0440\u0438\u0438 - \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u043b\u0438\u0441\u044c \u0441 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430\u043c\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</p> <p>\u041f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0439\u0441\u044f \u043d\u0430 \u043a\u0430\u043d\u0430\u043b @r9yo11yp9e - \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043a\u0430\u0442\u044c \u0434\u0435\u0432\u044f\u0442\u043a\u0438 \u0432\u043c\u0435\u0441\u0442\u0435.</p>","tags":["first-nine","series","runtime","concurrency"]}]}